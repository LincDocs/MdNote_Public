import{_ as o,c as s,a as l,b as n,d as e,e as i,o as a,r as p}from"./app-D56eNcZZ.js";const A={},d={href:"https://zhuanlan.zhihu.com/p/351490508",target:"_blank",rel:"noopener noreferrer"},u={href:"https://www.sdnlab.com/25307.html",target:"_blank",rel:"noopener noreferrer"},E={href:"https://juejin.cn/post/7067706621220093965",target:"_blank",rel:"noopener noreferrer"},P={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E4%B8%93%E7%94%A8%E7%BD%91/1006818",target:"_blank",rel:"noopener noreferrer"},T={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E4%B8%BB%E6%9C%BA",target:"_blank",rel:"noopener noreferrer"},k={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E9%9D%A2%E5%90%91%E6%97%A0%E8%BF%9E%E6%8E%A5",target:"_blank",rel:"noopener noreferrer"},m={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E7%AB%AF%E5%8F%A3%E5%8F%B7",target:"_blank",rel:"noopener noreferrer"},N={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/TCP%2FIP%E5%8D%8F%E8%AE%AE/212915",target:"_blank",rel:"noopener noreferrer"},b={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E8%B7%AF%E7%94%B1%E5%99%A8",target:"_blank",rel:"noopener noreferrer"},g={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E4%BC%A0%E8%BE%93%E5%B1%82",target:"_blank",rel:"noopener noreferrer"},B={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB",target:"_blank",rel:"noopener noreferrer"},h={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E4%B8%BB%E6%9C%BA",target:"_blank",rel:"noopener noreferrer"},f={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E4%B8%AD%E5%9B%BD%E6%95%99%E8%82%B2%E5%92%8C%E7%A7%91%E7%A0%94%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91/6175431",target:"_blank",rel:"noopener noreferrer"},I={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8",target:"_blank",rel:"noopener noreferrer"},C={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E8%B7%AF%E7%94%B1%E5%99%A8",target:"_blank",rel:"noopener noreferrer"},D={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E9%9D%99%E6%80%81",target:"_blank",rel:"noopener noreferrer"},F={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E9%9D%99%E6%80%81",target:"_blank",rel:"noopener noreferrer"},v={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/ISP/10152",target:"_blank",rel:"noopener noreferrer"},R={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E6%BA%90%E7%AB%AF%E5%8F%A3",target:"_blank",rel:"noopener noreferrer"},z={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2",target:"_blank",rel:"noopener noreferrer"},w={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E4%B8%BB%E6%9C%BA",target:"_blank",rel:"noopener noreferrer"},x={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E4%B8%BB%E6%9C%BA",target:"_blank",rel:"noopener noreferrer"},y={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE/3668945",target:"_blank",rel:"noopener noreferrer"},M={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E8%BD%AC%E6%8D%A2",target:"_blank",rel:"noopener noreferrer"},L={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84",target:"_blank",rel:"noopener noreferrer"},S={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E7%AB%AF%E5%8F%A3%E5%8F%B7",target:"_blank",rel:"noopener noreferrer"},U={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E6%8E%A5%E5%85%A5%E8%AE%BE%E5%A4%87",target:"_blank",rel:"noopener noreferrer"},G={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2",target:"_blank",rel:"noopener noreferrer"},q={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E5%8A%A8%E6%80%81%E5%9C%B0%E5%9D%80",target:"_blank",rel:"noopener noreferrer"},O={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E7%AB%AF%E5%8F%A3%E5%8F%B7",target:"_blank",rel:"noopener noreferrer"},j={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E7%AB%AF%E5%8F%A3%E5%8F%B7",target:"_blank",rel:"noopener noreferrer"},V={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E7%AB%AF%E5%8F%A3%E5%8F%B7",target:"_blank",rel:"noopener noreferrer"},H={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E4%B8%BB%E6%9C%BA",target:"_blank",rel:"noopener noreferrer"},Z={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E7%A9%BF%E9%80%8F%E6%8A%80%E6%9C%AF",target:"_blank",rel:"noopener noreferrer"};function J(K,t){const r=p("ExternalLinkIcon");return a(),s("div",null,[t[109]||(t[109]=l("h1",{id:"nat-网络地址转换-network-address-translation",tabindex:"-1"},[l("a",{class:"header-anchor",href:"#nat-网络地址转换-network-address-translation"},[l("span",null,"NAT（网络地址转换，Network Address Translation）")])],-1)),t[110]||(t[110]=l("p",null,"又称IP动态伪装（英語：IP Masquerade）",-1)),t[111]||(t[111]=l("p",null,"参考：",-1)),l("ul",null,[t[6]||(t[6]=l("li",null,"RFC 2663",-1)),l("li",null,[l("a",d,[t[0]||(t[0]=n("NAT（网络地址转换协议）")),e(r)]),t[1]||(t[1]=n("，全但排版巨丑"))]),l("li",null,[l("a",u,[t[2]||(t[2]=n("23 张图详解路由协议：计算机网络的核心技术")),e(r)]),t[3]||(t[3]=n("，美观，但主要讲路由协议而非NAT"))]),l("li",null,[l("a",E,[t[4]||(t[4]=n("图文并茂详解 NAT 协议！")),e(r)]),t[5]||(t[5]=n("，主要补充NAT-PT"))])]),t[112]||(t[112]=l("h2",{id:"概念",tabindex:"-1"},[l("a",{class:"header-anchor",href:"#概念"},[l("span",null,"概念")])],-1)),t[113]||(t[113]=l("h3",{id:"作用",tabindex:"-1"},[l("a",{class:"header-anchor",href:"#作用"},[l("span",null,"作用")])],-1)),t[114]||(t[114]=l("p",null,"作用：",-1)),l("ul",null,[l("li",null,[t[11]||(t[11]=n("内网上外网 ")),l("ul",null,[l("li",null,[t[8]||(t[8]=n("当在")),l("a",P,[t[7]||(t[7]=n("专用网")),e(r)]),t[9]||(t[9]=n("内部的一些主机本来已经分配到了本地IP地址（即仅在本专用网内使用的专用地址），但现在又想和因特网上的主机通信（并不需要加密）时，可使用NAT方法。"))]),t[10]||(t[10]=l("li",null,"这种方法需要在专用网（私网IP）连接到因特网（公网IP）的路由器上安装NAT软件。装有NAT软件的路由器叫做NAT路由器，它至少有一个有效的外部全球IP地址（公网IP地址）。这样，所有使用本地地址（私网IP地址）的主机在和外界通信时，都要在NAT路由器上将其本地地址转换成全球IP地址，才能和因特网连接。",-1))])]),t[12]||(t[12]=l("li",null,"宽带分享：这是 NAT 主机的最大功能",-1)),t[13]||(t[13]=l("li",null,[n("解决IP地址不足 "),l("ul",null,[l("li",null,"（诞生背景）有助于减缓可用的IP地址空间的枯竭")])],-1)),t[14]||(t[14]=l("li",null,[n("安全性 "),l("ul",null,[l("li",null,"隐藏并保护网络内部的计算机"),l("li",null,"NAT 之内的 PC 联机到 Internet 上面时，他所显示的 IP 是 NAT 主机的公共 IP，所以 Client 端的 PC 当然就具有一定程度的安全了。 外界在进行 portscan（端口扫描） 的时候，就侦测不到源 Client 端的 PC 。")])],-1))]),t[115]||(t[115]=i('<h3 id="不属于协议" tabindex="-1"><a class="header-anchor" href="#不属于协议"><span>不属于协议</span></a></h3><p>NAT（Network Address Translation）严格来说不属于协议，而是一种技术或方法，用于在IP地址间进行转换。</p><p>与NAT相关的协议：</p><blockquote><ul><li>如TCP和UDP。在NAT过程中，特别是当进行端口地址转换（PAT）时，路由器或防火墙需要查看TCP或UDP头部信息（如源端口和目标端口），来正确地进行地址和端口的转换。</li><li>然而，这并不意味着路由协议与NAT没有关系。例如，静态路由协议可能被用于配置NAT设备，以使其知道应将哪些地址翻译为其他地址。而在更复杂的环境中，动态路由协议（如RIP，OSPF等）也可以与NAT一起使用，以实现更复杂的网络地址转换需求。</li></ul><p>总的来说，NAT主要与传输层协议如TCP/UDP相关，而路由协议可以根据需要与NAT一起使用，来完成更复杂的网络需求。</p></blockquote><h3 id="iso作用" tabindex="-1"><a class="header-anchor" href="#iso作用"><span>ISO作用</span></a></h3><p>NAT协议通常工作在<strong>网络层（第三层）和传输层（第四层）之间</strong></p><h3 id="局限性" tabindex="-1"><a class="header-anchor" href="#局限性"><span>局限性</span></a></h3>',7)),l("ol",null,[l("li",null,[t[19]||(t[19]=l("p",null,"NAT违反了IP地址结构模型的设计原则。",-1)),l("ul",null,[l("li",null,[t[18]||(t[18]=l("p",null,[n("IP地址结构模型的基础是每个"),l("strong",null,"IP地址均标识"),n("了一个网络的连接，Internet的软件设计就是建立在这个前提之上。")],-1)),l("p",null,[t[16]||(t[16]=n("而NAT使得有很多")),l("a",T,[t[15]||(t[15]=n("主机")),e(r)]),t[17]||(t[17]=n("可能在使用相同的地址，如10.0.0.1。"))])])])]),l("li",null,[l("p",null,[t[21]||(t[21]=n("NAT使得IP协议从")),l("a",k,[t[20]||(t[20]=n("面向无连接")),e(r)]),t[22]||(t[22]=n("变成")),t[23]||(t[23]=l("strong",null,"面向连接",-1))]),l("ul",null,[l("li",null,[l("p",null,[t[25]||(t[25]=n("NAT必须维护专用IP地址与公用IP地址以及")),l("a",m,[t[24]||(t[24]=n("端口号")),e(r)]),t[26]||(t[26]=n("的映射关系。"))]),l("p",null,[t[29]||(t[29]=n("在")),l("a",N,[t[27]||(t[27]=n("TCP/IP协议")),e(r)]),t[30]||(t[30]=n("体系中，如果一个")),l("a",b,[t[28]||(t[28]=n("路由器")),e(r)]),t[31]||(t[31]=n("出现故障，不会影响到TCP协议的执行。因为只要几秒收不到应答，发送进程就会进入超时重传处理。"))]),t[32]||(t[32]=l("p",null,"而当存在NAT时，最初设计的TCP/IP协议过程将发生变化，Internet可能变得非常脆弱。",-1))])])]),t[41]||(t[41]=l("li",null,[l("p",null,"NAT违反了基本的网络分层结构模型的设计原则"),l("ul",null,[l("li",null,[n("因为在传统的网络分层结构模型中，第N层是不能"),l("strong",null,"修改第N+1层"),n("的报头内容的。NAT破坏了这种各层独立的原则。")])])],-1)),l("li",null,[t[40]||(t[40]=l("p",null,"有些应用是将IP地址插入到正文的内容中，例如标准的FTP协议与IP　Phone协议H.323。",-1)),l("ul",null,[t[39]||(t[39]=l("li",null,"如果NAT与这一类协议一起工作，那么NAT协议一定要做适当地修正。",-1)),l("li",null,[t[34]||(t[34]=n("同时，网络的")),l("a",g,[t[33]||(t[33]=n("传输层")),e(r)]),t[35]||(t[35]=n("也可能使用TCP与UDP协议之外的其他协议，那么NAT协议必须知道并且做相应的修改。"))]),l("li",null,[t[37]||(t[37]=n("由于NAT的存在，使得P2P应用实现出现困难，因为P2P的")),l("a",B,[t[36]||(t[36]=n("文件共享")),e(r)]),t[38]||(t[38]=n("与语音共享都是建立在IP协议的基础上的。"))])])]),t[42]||(t[42]=l("li",null,[l("p",null,"NAT同时存在对高层协议和安全性的影响问题。"),l("ul",null,[l("li",null,"RFC对NAT存在的问题进行了讨论。NAT的反对者认为这种临时性的缓解IP地址短缺的方案推迟了Ipv6迁移的进程，而并没有解决深层次的问题，他们认为是不可取的。")])],-1))]),t[116]||(t[116]=l("h3",{id:"历史背景",tabindex:"-1"},[l("a",{class:"header-anchor",href:"#历史背景"},[l("span",null,"历史背景")])],-1)),l("p",null,[t[44]||(t[44]=n("要真正了解NAT就必须先了解现在IP地址的使用情况，私有 IP 地址是指内部网络或")),l("a",h,[t[43]||(t[43]=n("主机")),e(r)]),t[45]||(t[45]=n("的IP 地址，公有IP 地址是指在因特网上全球唯一的IP 地址。RFC 1918 为私有网络预留出了三个IP 地址块，如下："))]),t[117]||(t[117]=l("ul",null,[l("li",null,"A 类：10.0.0.0～10.255.255.255"),l("li",null,"B 类：172.16.0.0～172.31.255.255"),l("li",null,"C 类：192.168.0.0～192.168.255.255")],-1)),t[118]||(t[118]=l("p",null,"上述三个范围内的地址不会在因特网上被分配，因此可以不必向ISP 或注册中心申请而在公司或企业内部自由使用。 [1]",-1)),l("p",null,[t[47]||(t[47]=n("随着接入Internet的计算机数量的不断猛增，IP地址资源也就愈加显得捉襟见肘。事实上，除了")),l("a",f,[t[46]||(t[46]=n("中国教育和科研计算机网")),e(r)]),t[48]||(t[48]=n("（CERNET）外，一般用户几乎申请不到整段的C类IP地址。在其他ISP那里，即使是拥有几百台计算机的大型局域网用户，当他们申请IP地址时，所分配的地址也不过只有几个或十几个IP地址。显然，这样少的IP地址根本无法满足网络用户的需求，于是也就产生了NAT技术。"))]),l("p",null,[t[51]||(t[51]=n("虽然NAT可以借助于某些")),l("a",I,[t[49]||(t[49]=n("代理服务器")),e(r)]),t[52]||(t[52]=n("来实现，但考虑到运算成本和网络性能，很多时候都是在")),l("a",C,[t[50]||(t[50]=n("路由器")),e(r)]),t[53]||(t[53]=n("上来实现的。"))]),t[119]||(t[119]=i('<h2 id="实现方式" tabindex="-1"><a class="header-anchor" href="#实现方式"><span>实现方式</span></a></h2><h3 id="三种实现" tabindex="-1"><a class="header-anchor" href="#三种实现"><span>三种实现</span></a></h3><p>NAT的实现方式有三种：</p><ul><li>静态转换 Static Nat</li><li>动态转换 Dynamic Nat</li><li>端口多路复用 OverLoad</li></ul><h4 id="静态转换" tabindex="-1"><a class="header-anchor" href="#静态转换"><span>静态转换</span></a></h4>',5)),l("p",null,[l("strong",null,[l("a",D,[t[54]||(t[54]=n("静态")),e(r)]),t[55]||(t[55]=n("转换"))]),t[57]||(t[57]=n("是指将内部网络的私有IP地址转换为公有IP地址，IP地址对是一对一的，是一成不变的，某个私有IP地址只转换为某个公有IP地址。借助于")),l("a",F,[t[56]||(t[56]=n("静态")),e(r)]),t[58]||(t[58]=n("转换，可以实现外部网络对内部网络中某些特定设备（如服务器）的访问。"))]),t[120]||(t[120]=l("h4",{id:"动态转换",tabindex:"-1"},[l("a",{class:"header-anchor",href:"#动态转换"},[l("span",null,"动态转换")])],-1)),l("p",null,[t[60]||(t[60]=l("strong",null,"动态转换",-1)),t[61]||(t[61]=n("是指将内部网络的私有IP地址转换为公用IP地址时，IP地址是不确定的，是随机的，所有被授权访问上Internet的私有IP地址可随机转换为任何指定的合法IP地址。也就是说，只要指定哪些内部地址可以进行转换，以及用哪些合法地址作为外部地址时，就可以进行动态转换。动态转换可以使用多个合法外部地址集。当")),l("a",v,[t[59]||(t[59]=n("ISP")),e(r)]),t[62]||(t[62]=n("提供的合法IP地址略少于网络内部的计算机数量时。可以采用动态转换的方式。"))]),t[121]||(t[121]=l("h4",{id:"pat-端口多路复用-port-address-translation",tabindex:"-1"},[l("a",{class:"header-anchor",href:"#pat-端口多路复用-port-address-translation"},[l("span",null,"PAT（端口多路复用，Port Address Translation）")])],-1)),l("p",null,[t[67]||(t[67]=n("端口多路复用 是指改变外出数据包的")),l("a",R,[t[63]||(t[63]=n("源端口")),e(r)]),t[68]||(t[68]=n("并进行端口转换，即端口")),l("a",z,[t[64]||(t[64]=n("地址转换")),e(r)]),t[69]||(t[69]=n("（PAT，Port Address Translation).采用端口多路复用方式。内部网络的所有")),l("a",w,[t[65]||(t[65]=n("主机")),e(r)]),t[70]||(t[70]=n("均可共享一个合法外部IP地址实现对Internet的访问，从而可以最大限度地节约IP地址资源。同时，又可隐藏网络内部的所有")),l("a",x,[t[66]||(t[66]=n("主机")),e(r)]),t[71]||(t[71]=n("，有效避免来自internet的攻击。因此，目前网络中应用最多的就是端口多路复用方式。"))]),t[122]||(t[122]=l("h4",{id:"alg-应用程序级网关技术-application-level-gateway",tabindex:"-1"},[l("a",{class:"header-anchor",href:"#alg-应用程序级网关技术-application-level-gateway"},[l("span",null,"ALG（应用程序级网关技术，Application Level Gateway）")])],-1)),l("p",null,[t[73]||(t[73]=n("ALG，即应用程序级网关技术：传统的NAT技术只对IP层和传输层头部进行转换处理，但是一些")),l("a",y,[t[72]||(t[72]=n("应用层协议")),e(r)]),t[74]||(t[74]=n('，在协议数据报文中包含了地址信息。为了使得这些应用也能透明地完成NAT转换，NAT使用一种称作ALG的技术，它能对这些应用程序在通信时所包含的地址信息也进行相应的NAT转换。例如：对于FTP协议的PORT/PASV命令、DNS协议的 "A" 和 "PTR" queries命令和部分ICMP消息类型等都需要相应的ALG来支持。'))]),t[123]||(t[123]=l("h4",{id:"_0",tabindex:"-1"},[l("a",{class:"header-anchor",href:"#_0"},[l("span",null,"0")])],-1)),t[124]||(t[124]=l("p",null,"如果协议数据报文中不包含地址信息，则很容易利用传统的NAT技术来完成透明的地址转换功能，通常我们使用的如下应用就可以直接利用传统的NAT技术：HTTP、TELNET、FINGER、NTP、NFS、ARCHIE、RLOGIN、RSH、RCP等。",-1)),t[125]||(t[125]=l("h2",{id:"napt",tabindex:"-1"},[l("a",{class:"header-anchor",href:"#napt"},[l("span",null,"NAPT")])],-1)),l("p",null,[t[80]||(t[80]=n("NAPT（Network Address Port Translation），即网络地址端口")),l("a",M,[t[75]||(t[75]=n("转换")),e(r)]),t[81]||(t[81]=n("，可将多个内部")),l("a",L,[t[76]||(t[76]=n("地址映射")),e(r)]),t[82]||(t[82]=n("为一个合法公网地址，但以不同的协议")),l("a",S,[t[77]||(t[77]=n("端口号")),e(r)]),t[83]||(t[83]=n("与不同的内部地址相对应，也就是与之间的转换。NAPT普遍用于")),l("a",U,[t[78]||(t[78]=n("接入设备")),e(r)]),t[84]||(t[84]=n("中，它可以将中小型的网络隐藏在一个合法的IP地址后面。NAPT也被称为“多对一”的NAT，或者叫PAT（Port Address Translations，端口")),l("a",G,[t[79]||(t[79]=n("地址转换")),e(r)]),t[85]||(t[85]=n("）、地址超载（address overloading）。"))]),l("p",null,[t[90]||(t[90]=n("NAPT与")),l("a",q,[t[86]||(t[86]=n("动态地址")),e(r)]),t[91]||(t[91]=n("NAT不同，它将内部连接映射到外部网络中的一个单独的IP地址上，同时在该地址上加上一个由NAT设备选定的TCP")),l("a",O,[t[87]||(t[87]=n("端口号")),e(r)]),t[92]||(t[92]=n("。NAPT算得上是一种较流行的NAT变体，通过转换TCP或UDP协议")),l("a",j,[t[88]||(t[88]=n("端口号")),e(r)]),t[93]||(t[93]=n("以及地址来提供并发性。除了一对源和目的IP地址以外，这个表还包括一对源和目的协议")),l("a",V,[t[89]||(t[89]=n("端口号")),e(r)]),t[94]||(t[94]=n("，以及NAT盒使用的一个协议端口号。"))]),l("p",null,[t[96]||(t[96]=n("NAPT的主要优势在于，能够使用一个全球有效IP地址获得通用性。主要缺点在于其通信仅限于TCP或UDP。当所有通信都采用TCP或UDP，NAPT允许一台内部计算机访问多台外部计算机，并允许多台内部")),l("a",H,[t[95]||(t[95]=n("主机")),e(r)]),t[97]||(t[97]=n("访问同一台外部计算机，相互之间不会发生冲突。 [2]"))]),t[126]||(t[126]=l("h2",{id:"穿透方法",tabindex:"-1"},[l("a",{class:"header-anchor",href:"#穿透方法"},[l("span",null,"穿透方法")])],-1)),l("p",null,[t[99]||(t[99]=n("目前常用的针对UDP的NAT 穿透（NAT Traversal）方法主要有：")),t[100]||(t[100]=l("strong",null,"STUN",-1)),t[101]||(t[101]=n("、")),t[102]||(t[102]=l("strong",null,"TURN",-1)),t[103]||(t[103]=n("、")),t[104]||(t[104]=l("strong",null,"ICE",-1)),t[105]||(t[105]=n("、")),t[106]||(t[106]=l("strong",null,"uPnP",-1)),t[107]||(t[107]=n("等。其中ICE方式由于其结合了STUN和TURN的特点，所以使用最为广泛。针对TCP的NAT")),l("a",Z,[t[98]||(t[98]=n("穿透技术")),e(r)]),t[108]||(t[108]=n("目前仍为难点。实用的技术仍然不多。"))]),t[127]||(t[127]=i('<h1 id="路由协议-routing-protocol" tabindex="-1"><a class="header-anchor" href="#路由协议-routing-protocol"><span>路由协议（Routing protocol）</span></a></h1><h2 id="路由表" tabindex="-1"><a class="header-anchor" href="#路由表"><span>路由表</span></a></h2><h3 id="区别-路由表、arp表、nat表" tabindex="-1"><a class="header-anchor" href="#区别-路由表、arp表、nat表"><span>区别：路由表、ARP表、NAT表</span></a></h3><ul><li>映射关系不同：NAT表是IP到IP，ARP表是IP到MAC</li><li>维护/老化等可能不同？</li><li>学习方式可能不同？</li></ul><p>GPT4</p><ul><li><p>路由表</p><p>路由表是一种让路由器知道如何将数据包路由到其目的地的表格。这种表格包含了关于网络中所有其他路由器的信息，以及它们到达目的地的路径。路由表中的每个条目都包含一个网络目标（即网络地址）和下一步的路由器地址。</p></li><li><p>ARP表</p><p>ARP(Address Resolution Protocol)表，即地址解析协议表，是存储在网络设备中的一种表格，用于映射网络层（IP地址）到链路层（MAC地址）的地址。当一个设备需要将数据包发送到另一个设备时，它将查阅ARP表，以确定接收设备的MAC地址。如果ARP表中没有相关的映射信息，发送设备将通过ARP协议请求接收设备的MAC地址，并更新ARP表。</p></li><li><p>NAT表</p><p>NAT(Network Address Translation)表，即网络地址转换表，是一种在网络设备（如路由器）上执行IP地址转换的技术。它允许一个IP地址的设备与另一个IP地址的设备进行通信，即使这些设备在不同的网络上。例如，在家庭网络中，路由器使用NAT表将私有（内部）IP地址转换为公共（外部）IP地址，这样家庭网络中的设备就可以与互联网上的设备进行通信。</p></li></ul><p>区别</p><ul><li>数据处理阶段 <ul><li>路由表：主要在网络层处理和转发IP包</li><li>ARP表：主要在数据链路层处理MAC地址和IP地址的转换</li><li>NAT表：主在网络层处理私网IP和公网IP的转换。</li></ul></li><li>作用和功能 <ul><li>路由表：负责决定IP数据包的转发路径，目标是找到最佳路径将数据包送达目标地址</li><li>ARP表：负责解析并存储网络中设备的IP地址和MAC地址的对应关系，目的是获取目标设备的MAC地址以保证数据包能够成功在本网络中传递</li><li>NAT表：负责转换私有IP地址和公共IP地址，目的是在有限的公网IP地址下，能够使更多的私有网络设备能够访问公网。</li></ul></li><li>存储位置 <ul><li>路由表、ARP表和NAT表都是存储在网络设备上的</li><li>路由表：存储在路由器上</li><li>ARP表：可能存储在交换机或者计算机上</li><li>NAT表：通常存储在执行NAT功能的设备，如防火墙或路由器上</li></ul></li><li>更新方式 <ul><li>路由表：更新通常通过路由协议（如RIP，OSPF等）自动完成</li><li>ARP表：更新通过ARP协议，当需要的IP地址和MAC地址映射关系不存在时，会发送ARP请求并更新ARP表；</li><li>NAT表：更新则是在需要进行网络地址转换时动态创建的。</li></ul></li><li>生存周期 <ul><li>路由表：生存周期比较长，只有网络拓扑发生变化时才会被更新；</li><li>ARP表：生存周期较短，通常在一段时间后需要进行刷新</li><li>NAT表：生命周期取决于NAT会话，当会话结束时，相关的NAT表项就会被删除。</li></ul></li></ul><h3 id="分类" tabindex="-1"><a class="header-anchor" href="#分类"><span>分类</span></a></h3><p>一个实际的网络中，一台路由器通常包含多条路由条目，这些路由条目从不同的来源获取。路由表的来源可分为三类：</p><ul><li>直连路由：路由器直接连接的路由条目，只要路由器接口配置了 IP 地址，接口状态正常，就会自动生成对应的直连路由</li><li>静态路由：通过命令手动添加的路由条目就是静态路由</li><li>动态路由：通过路由协议从相邻路由器动态学习到的路由条目</li></ul><h3 id="路由优先级" tabindex="-1"><a class="header-anchor" href="#路由优先级"><span>路由优先级</span></a></h3><h3 id="路由环路" tabindex="-1"><a class="header-anchor" href="#路由环路"><span>路由环路</span></a></h3><h3 id="黑洞路由" tabindex="-1"><a class="header-anchor" href="#黑洞路由"><span>黑洞路由</span></a></h3>',14))])}const W=o(A,[["render",J],["__file","2663 NAT.html.vue"]]),X=JSON.parse('{"path":"/01.%20DesignAndDevelop/Develop/02.%20Theory/Computer/03.%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%20-%20%E4%B8%93%E9%A2%98%E6%88%96%E5%AD%90%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%AD%97%E5%85%B8%E7%89%88/%E4%B8%8B%E5%B1%82%E7%9B%B8%E5%85%B3/Network/%E5%B8%B8%E7%94%A8%E5%8D%8F%E8%AE%AE/RFC/2663%20NAT.html","title":"NAT（网络地址转换，Network Address Translation）","lang":"zh-CN","frontmatter":{"description":"NAT（网络地址转换，Network Address Translation） 又称IP动态伪装（英語：IP Masquerade） 参考： RFC 2663 NAT（网络地址转换协议），全但排版巨丑 23 张图详解路由协议：计算机网络的核心技术，美观，但主要讲路由协议而非NAT 图文并茂详解 NAT 协议！，主要补充NAT-PT 概念 作用 作用： ...","head":[["meta",{"property":"og:url","content":"https://LincDocs.github.io/MdNote_Public/01.%20DesignAndDevelop/Develop/02.%20Theory/Computer/03.%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%20-%20%E4%B8%93%E9%A2%98%E6%88%96%E5%AD%90%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%AD%97%E5%85%B8%E7%89%88/%E4%B8%8B%E5%B1%82%E7%9B%B8%E5%85%B3/Network/%E5%B8%B8%E7%94%A8%E5%8D%8F%E8%AE%AE/RFC/2663%20NAT.html"}],["meta",{"property":"og:site_name","content":"MdNote_Public"}],["meta",{"property":"og:title","content":"NAT（网络地址转换，Network Address Translation）"}],["meta",{"property":"og:description","content":"NAT（网络地址转换，Network Address Translation） 又称IP动态伪装（英語：IP Masquerade） 参考： RFC 2663 NAT（网络地址转换协议），全但排版巨丑 23 张图详解路由协议：计算机网络的核心技术，美观，但主要讲路由协议而非NAT 图文并茂详解 NAT 协议！，主要补充NAT-PT 概念 作用 作用： ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-01-26T15:46:06.000Z"}],["meta",{"property":"article:author","content":"LincDocs"}],["meta",{"property":"article:modified_time","content":"2025-01-26T15:46:06.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"NAT（网络地址转换，Network Address Translation）\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-01-26T15:46:06.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"LincDocs\\",\\"url\\":\\"https://github.com/LincDocs/MdNote_Public/\\"}]}"]]},"headers":[{"level":1,"title":"NAT（网络地址转换，Network Address Translation）","slug":"nat-网络地址转换-network-address-translation","link":"#nat-网络地址转换-network-address-translation","children":[{"level":2,"title":"概念","slug":"概念","link":"#概念","children":[{"level":3,"title":"作用","slug":"作用","link":"#作用","children":[]},{"level":3,"title":"不属于协议","slug":"不属于协议","link":"#不属于协议","children":[]},{"level":3,"title":"ISO作用","slug":"iso作用","link":"#iso作用","children":[]},{"level":3,"title":"局限性","slug":"局限性","link":"#局限性","children":[]},{"level":3,"title":"历史背景","slug":"历史背景","link":"#历史背景","children":[]}]},{"level":2,"title":"实现方式","slug":"实现方式","link":"#实现方式","children":[{"level":3,"title":"三种实现","slug":"三种实现","link":"#三种实现","children":[{"level":4,"title":"静态转换","slug":"静态转换","link":"#静态转换","children":[]},{"level":4,"title":"动态转换","slug":"动态转换","link":"#动态转换","children":[]},{"level":4,"title":"PAT（端口多路复用，Port Address Translation）","slug":"pat-端口多路复用-port-address-translation","link":"#pat-端口多路复用-port-address-translation","children":[]},{"level":4,"title":"ALG（应用程序级网关技术，Application Level Gateway）","slug":"alg-应用程序级网关技术-application-level-gateway","link":"#alg-应用程序级网关技术-application-level-gateway","children":[]},{"level":4,"title":"0","slug":"_0","link":"#_0","children":[]}]}]},{"level":2,"title":"NAPT","slug":"napt","link":"#napt","children":[]},{"level":2,"title":"穿透方法","slug":"穿透方法","link":"#穿透方法","children":[]}]},{"level":1,"title":"路由协议（Routing protocol）","slug":"路由协议-routing-protocol","link":"#路由协议-routing-protocol","children":[{"level":2,"title":"路由表","slug":"路由表","link":"#路由表","children":[{"level":3,"title":"区别：路由表、ARP表、NAT表","slug":"区别-路由表、arp表、nat表","link":"#区别-路由表、arp表、nat表","children":[]},{"level":3,"title":"分类","slug":"分类","link":"#分类","children":[]},{"level":3,"title":"路由优先级","slug":"路由优先级","link":"#路由优先级","children":[]},{"level":3,"title":"路由环路","slug":"路由环路","link":"#路由环路","children":[]},{"level":3,"title":"黑洞路由","slug":"黑洞路由","link":"#黑洞路由","children":[]}]}]}],"git":{"createdTime":1737906366000,"updatedTime":1737906366000,"contributors":[{"name":"Linc","email":"762699299@qq.com","commits":1}]},"readingTime":{"minutes":13.91,"words":4172},"filePathRelative":"01. DesignAndDevelop/Develop/02. Theory/Computer/03. 计算机系统 - 专题或子系统的字典版/下层相关/Network/常用协议/RFC/2663 NAT.md","localizedDate":"2025年1月26日","excerpt":"\\n<p>又称IP动态伪装（英語：IP Masquerade）</p>\\n<p>参考：</p>\\n<ul>\\n<li>RFC 2663</li>\\n<li><a href=\\"https://zhuanlan.zhihu.com/p/351490508\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">NAT（网络地址转换协议）</a>，全但排版巨丑</li>\\n<li><a href=\\"https://www.sdnlab.com/25307.html\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">23 张图详解路由协议：计算机网络的核心技术</a>，美观，但主要讲路由协议而非NAT</li>\\n<li><a href=\\"https://juejin.cn/post/7067706621220093965\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">图文并茂详解 NAT 协议！</a>，主要补充NAT-PT</li>\\n</ul>","autoDesc":true,"bioChainData":{"outlink":[],"backlink":[],"localMap":{"nodes":[{"id":"01. DesignAndDevelop/Develop/02. Theory/Computer/03. 计算机系统 - 专题或子系统的字典版/下层相关/Network/常用协议/RFC/2663 NAT.md","value":{"title":"2663 NAT","path":"01. DesignAndDevelop/Develop/02. Theory/Computer/03. 计算机系统 - 专题或子系统的字典版/下层相关/Network/常用协议/RFC/2663 NAT.md","outlink":[],"backlink":[]}}],"links":[]}}}');export{W as comp,X as data};
