import{_ as t,c as a,e as n,o as i}from"./app-aXpiOGsR.js";const o="/MdNote_Public/assets/3a50eee71bbaf3ca9413241a51f3f374-Dstk0uDJ.png",l="/MdNote_Public/assets/2a421d33fff975bab83ae0f94e865253-gVWmXeJ0.png",r="/MdNote_Public/assets/b01c629dbdf117b47c5f5b9f4c0bfe7e-CWmuH4Wd.png",s="/MdNote_Public/assets/1a962ca613dbaa1b1788d3f3e2a40e31-Dbdq7ok1.png",d="/MdNote_Public/assets/837d9b2c0e63d8e54fa37c4f67f0ee9a-Cnz1Q1Z-.png",p="/MdNote_Public/assets/f5dd38cc55a352ec8bd5f9df827933f0-eo4Njybt.png",c={};function h(m,e){return i(),a("div",null,e[0]||(e[0]=[n('<h1 id="对于文章复制黏贴的优化" tabindex="-1">对于文章复制黏贴的优化</h1><p>（注意，该篇内容主要适用于对文章的html进行优化，而不是优化html2md）</p><h2 id="先来讨论代码块" tabindex="-1">先来讨论代码块</h2><h3 id="不同网站的优化性" tabindex="-1">不同网站的优化性</h3><p>一般代码块都会提供复制按钮，可以通过复制按钮轻松复制。但有时我们希望记笔记时，更倾向于连同代码块上下的文章部分一起复制。</p><p>而不同的网站对此的优化有所不同：</p><p>(1) CSDN，屎</p><p><img src="'+o+'" alt="" loading="lazy"></p><p>(2) 博客园，完美</p><p><img src="'+l+'" alt="" loading="lazy"></p><p>(3) MdBook，屎</p><p><img src="'+r+'" alt="" loading="lazy"></p><p>(4) VuePress，对于代码块类型存在缺失</p><p><img src="'+s+'" alt="" loading="lazy"></p><h3 id="不同高亮器的调研" tabindex="-1">不同高亮器的调研</h3><ul><li><a href="https://highlightjs.org/" target="_blank" rel="noopener noreferrer">highlightjs</a>： 行为不对。其pre里直接不包code标签，复制出来是内联代码</li><li><a href="https://www.cnblogs.com/vvital/p/18877128" target="_blank" rel="noopener noreferrer">cnblog 的 highlighter-hljs demo</a>: 行为正确。pre包含带type class的code</li><li><a href="https://shiki.tmrs.site/guide/install" target="_blank" rel="noopener noreferrer">prism</a>： 行为不对。pre包含不带type class的code</li></ul><h3 id="原理" tabindex="-1">原理</h3><p>然后我尝试追踪他们的区别，是有什么代码，影响了复制黏贴的内容。是有额外的js控制，还是纯属由dom结构决定。调试后发现是后者，只要给code加一个 <code>language-xxxx</code> 的class就可以了</p><p><img src="'+d+'" alt="" loading="lazy"></p><p>而之前在 Html2Md 笔记中，我们提到了，这种行为是由 Html2Md 来解析的。然后我侧了许多md环境：github typora obsidian 加浏览搜的两个在线md arya bejson。除了github，其他几个 md 编辑器都有相同的解析结果。</p><p>有可能他们都用相似的 html2md 库。而这种行为，确实也存在对应的规范，见commonmark: <a href="https://spec.commonmark.org/0.31.2/#fenced-code-blocks" target="_blank" rel="noopener noreferrer">https://spec.commonmark.org/0.31.2/#fenced-code-blocks</a></p><p>该规范中，md2html时，是需要在code标签去标注 <code>language-codeType</code> 的</p><h3 id="改善措施" tabindex="-1">改善措施</h3><p>一是查看我前面所说提到的不同高亮器的调研，去选用、反馈、魔改。有些我在反馈了，不知道读者阅读到这的时候，问题是否已经得到解决。</p><h2 id="标题锚点的优化" tabindex="-1">标题锚点的优化</h2><h3 id="问题" tabindex="-1">问题</h3><p>同理。简单来说就是：vuepress及很多博客系统都是 <code>hX</code> 标签下面放了一个 <code>a</code> 标签。所以复制出来会是这样的：</p><p><img src="'+p+`" alt="" loading="lazy"><br> 而有些不会，像博客园单纯是加了个id，没有加a标签，一样能满足锚点跳转的需求。</p><h3 id="不同网站的标题链接风格" tabindex="-1">不同网站的标题链接风格</h3><ul><li>无链接风格: <a href="https://www.cnblogs.com/vvital/p/18877128" target="_blank" rel="noopener noreferrer">cnblogs</a>, <a href="https://juejin.cn/post/7156565703716405255#heading-1" target="_blank" rel="noopener noreferrer">juejin</a>, <a href="https://segmentfault.com/a/1190000046534134#item-1" target="_blank" rel="noopener noreferrer">segmentfault</a> (其中cnblogs是用了一个button onclick)</li><li>linkAfterHeader风格: github</li><li>linkInsideHeader风格: vuepress</li><li>...</li></ul><p>而 <a href="github.com/valeriangalliat/markdown-it-anchor">markdown-it-anchor README</a> 也有相关的选项来控制风格的：</p><ul><li>不启用，即只生成标题，不生成a链接</li><li>linkInsideHeader</li><li>linkAfterHeader <ul><li>又分为: <code>[&#39;visually-hidden&#39;, &#39;aria-label&#39;, &#39;aria-describedby&#39;, &#39;aria-labelledby&#39;]</code></li></ul></li><li>ariaHidden</li><li>headerLink</li><li>...</li></ul><h3 id="改善措施-1" tabindex="-1">改善措施</h3><p>我之前是部署vuepress网站遇到这个问题，还以为是anchor插件的问题。后来发现anchor那边默认标题是不带<code>a</code>的，vuepress改过默认行为：</p><p><a href="https://github.com/vuepress/core/blob/769f8cf2ee12d68b678b1ff7fdab305df6cfe45b/packages/markdown/src/markdown.ts#L65-L76" target="_blank" rel="noopener noreferrer">https://github.com/vuepress/core/blob/769f8cf2ee12d68b678b1ff7fdab305df6cfe45b/packages/markdown/src/markdown.ts#L65-L76</a></p><p>如果有同需求的，在vuepress中把anchor的permalink选项换回默认值就行，即</p><div class="language-ts line-numbers-mode" data-highlighter="shiki" data-ext="ts" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-ts"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">markdown</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">  anchor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    permalink</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: () </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {},</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,37)]))}const g=t(c,[["render",h]]),k=JSON.parse('{"path":"/01.%20DesignAndDevelop/Develop/04.%20Project/Type/Doc/MarkdwonAbout/02.%20Parse%20and%20Render/Html2Md/%E5%AF%B9%E4%BA%8E%E6%96%87%E7%AB%A0%E5%A4%8D%E5%88%B6%E9%BB%8F%E8%B4%B4%E7%9A%84%E4%BC%98%E5%8C%96.html","title":"对于文章复制黏贴的优化","lang":"zh-CN","frontmatter":{"create_time":"2025-05-18T00:00:00.000Z","Author":"LincZero","description":"对于文章复制黏贴的优化 （注意，该篇内容主要适用于对文章的html进行优化，而不是优化html2md） 先来讨论代码块 不同网站的优化性 一般代码块都会提供复制按钮，可以通过复制按钮轻松复制。但有时我们希望记笔记时，更倾向于连同代码块上下的文章部分一起复制。 而不同的网站对此的优化有所不同： (1) CSDN，屎 (2) 博客园，完美 (3) MdBo...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"对于文章复制黏贴的优化\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-07-03T23:20:30.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://LincDocs.github.io/MdNote_Public/01.%20DesignAndDevelop/Develop/04.%20Project/Type/Doc/MarkdwonAbout/02.%20Parse%20and%20Render/Html2Md/%E5%AF%B9%E4%BA%8E%E6%96%87%E7%AB%A0%E5%A4%8D%E5%88%B6%E9%BB%8F%E8%B4%B4%E7%9A%84%E4%BC%98%E5%8C%96.html"}],["meta",{"property":"og:site_name","content":"MdNote_Public"}],["meta",{"property":"og:title","content":"对于文章复制黏贴的优化"}],["meta",{"property":"og:description","content":"对于文章复制黏贴的优化 （注意，该篇内容主要适用于对文章的html进行优化，而不是优化html2md） 先来讨论代码块 不同网站的优化性 一般代码块都会提供复制按钮，可以通过复制按钮轻松复制。但有时我们希望记笔记时，更倾向于连同代码块上下的文章部分一起复制。 而不同的网站对此的优化有所不同： (1) CSDN，屎 (2) 博客园，完美 (3) MdBo..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-07-03T23:20:30.000Z"}],["meta",{"property":"article:modified_time","content":"2025-07-03T23:20:30.000Z"}]],"author":"LincZero","date":"2025-05-18T00:00:00.000Z"},"git":{"createdTime":1751584830000,"updatedTime":1751584830000,"contributors":[{"name":"Linc","username":"Linc","email":"762699299@qq.com","commits":1,"url":"https://github.com/Linc"}]},"readingTime":{"minutes":2.5,"words":750},"filePathRelative":"01. DesignAndDevelop/Develop/04. Project/Type/Doc/MarkdwonAbout/02. Parse and Render/Html2Md/对于文章复制黏贴的优化.md","excerpt":"\\n<p>（注意，该篇内容主要适用于对文章的html进行优化，而不是优化html2md）</p>\\n<h2>先来讨论代码块</h2>\\n<h3>不同网站的优化性</h3>\\n<p>一般代码块都会提供复制按钮，可以通过复制按钮轻松复制。但有时我们希望记笔记时，更倾向于连同代码块上下的文章部分一起复制。</p>\\n<p>而不同的网站对此的优化有所不同：</p>\\n<p>(1) CSDN，屎</p>\\n<p></p>\\n<p>(2) 博客园，完美</p>\\n<p></p>\\n<p>(3) MdBook，屎</p>\\n<p></p>\\n<p>(4) VuePress，对于代码块类型存在缺失</p>\\n<p></p>\\n<h3>不同高亮器的调研</h3>","autoDesc":true,"bioChainData":{"outlink":[],"backlink":[{"title":"Html2Md","link":"01. DesignAndDevelop/Develop/04. Project/Type/Doc/MarkdwonAbout/02. Parse and Render/Html2Md/Html2Md.html"}],"localMap":{"nodes":[{"id":"01. DesignAndDevelop/Develop/04. Project/Type/Doc/MarkdwonAbout/02. Parse and Render/Html2Md/对于文章复制黏贴的优化.md","value":{"title":"对于文章复制黏贴的优化","path":"01. DesignAndDevelop/Develop/04. Project/Type/Doc/MarkdwonAbout/02. Parse and Render/Html2Md/对于文章复制黏贴的优化.md","outlink":[],"backlink":["01. DesignAndDevelop/Develop/04. Project/Type/Doc/MarkdwonAbout/02. Parse and Render/Html2Md/Html2Md.md"]}},{"id":"01. DesignAndDevelop/Develop/04. Project/Type/Doc/MarkdwonAbout/02. Parse and Render/Html2Md/Html2Md.md","value":{"title":"Html2Md","path":"01. DesignAndDevelop/Develop/04. Project/Type/Doc/MarkdwonAbout/02. Parse and Render/Html2Md/Html2Md.md","outlink":[],"backlink":[]}}],"links":[{"source":"01. DesignAndDevelop/Develop/04. Project/Type/Doc/MarkdwonAbout/02. Parse and Render/Html2Md/Html2Md.md","target":"01. DesignAndDevelop/Develop/04. Project/Type/Doc/MarkdwonAbout/02. Parse and Render/Html2Md/对于文章复制黏贴的优化.md"}]}}}');export{g as comp,k as data};
