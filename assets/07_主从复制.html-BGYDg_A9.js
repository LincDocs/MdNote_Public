import{_ as s,c as a,f as l,o as e}from"./app-B2g-EbEF.js";const t={};function n(h,i){return e(),a("div",null,i[0]||(i[0]=[l(`<h1 id="redis主从复制" tabindex="-1"><a class="header-anchor" href="#redis主从复制"><span>Redis主从复制</span></a></h1><h2 id="概念、主节点与从节点" tabindex="-1"><a class="header-anchor" href="#概念、主节点与从节点"><span>概念、主节点与从节点</span></a></h2><ul><li>主从复制：指将一台Redis服务器的数据复制到其他Redis服务器。</li><li>主节点 (master) 与 从节点 (slave)：主节点和从节点的关系是：一对多、主向从单向复制</li><li>职责：且一般来说主节点负责写操作，从节点负责读操作</li><li>方式：主节点将自己的数据变化异步发送给从节点，从节点接收到后更新自己的数据</li><li>集群：通过设置主节点和多个从节点，可以创建一个Redis集群</li></ul><h2 id="使用" tabindex="-1"><a class="header-anchor" href="#使用"><span>使用</span></a></h2><p>主节点不需要修改，默认就是主节点</p><p>从节点的修改有两种方式：</p><ul><li>命令</li><li>配置文件</li></ul><h3 id="命令方式" tabindex="-1"><a class="header-anchor" href="#命令方式"><span>命令方式</span></a></h3><ul><li>查看当前节点角色：role</li><li>配置所属主节点：replicaof host port 或者 slaveof host port (旧版)</li></ul><p>一般不用这种方式</p><h3 id="配置文件方式" tabindex="-1"><a class="header-anchor" href="#配置文件方式"><span>配置文件方式</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /opt/homebrew/etc</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">	# 配置文件一般在redis安装目录下</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ls</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ltr</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> redis.conf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ~</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cd</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> redis.conf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> redis-6380.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> code</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> redis-6380.conf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 改动项。因为是同机器上运行，我们将6379作为主节点，从节点则为6380，区分开</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">port</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6380</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">							# 端口号，默认6379</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pidfile</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /var/run/redis_6370.pid</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">		# 进程id，默认/var/run/redis.pid</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dbfilename</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dump-6380.rdb</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">			# 备份文件，默认dump.rdb</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">replicaof</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 127.0.0.1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6379</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">			# 指定主节点，默认注释掉</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> redis-server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> redis-6380.conf</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">		# 启动从节点服务</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> redis-cli</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6380</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">					# 连接到从节点</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; info replication					</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看信息</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Replication</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">role:slave</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">							# 这里可以看到是从节点</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>检查（可选）</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> redis-cli</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 或redis-cli -p 6380</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; keys *							</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 可以发现两边数据是一样的</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; set k4 v4							</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 在主节点进行修改后，从节点也会有该变化</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">OK</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,14)]))}const d=s(t,[["render",n],["__file","07_主从复制.html.vue"]]),k=JSON.parse('{"path":"/01.%20DesignAndDevelop/Develop/04.%20Project/Platform/Web/04.%20%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/01.%20Redis/03_%E5%85%B6%E4%BB%96/07_%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6.html","title":"Redis主从复制","lang":"zh-CN","frontmatter":{"description":"Redis主从复制 概念、主节点与从节点 主从复制：指将一台Redis服务器的数据复制到其他Redis服务器。 主节点 (master) 与 从节点 (slave)：主节点和从节点的关系是：一对多、主向从单向复制 职责：且一般来说主节点负责写操作，从节点负责读操作 方式：主节点将自己的数据变化异步发送给从节点，从节点接收到后更新自己的数据 集群：通过设...","head":[["meta",{"property":"og:url","content":"https://LincDocs.github.io/MdNote_Public/01.%20DesignAndDevelop/Develop/04.%20Project/Platform/Web/04.%20%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/01.%20Redis/03_%E5%85%B6%E4%BB%96/07_%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6.html"}],["meta",{"property":"og:site_name","content":"MdNote_Public"}],["meta",{"property":"og:title","content":"Redis主从复制"}],["meta",{"property":"og:description","content":"Redis主从复制 概念、主节点与从节点 主从复制：指将一台Redis服务器的数据复制到其他Redis服务器。 主节点 (master) 与 从节点 (slave)：主节点和从节点的关系是：一对多、主向从单向复制 职责：且一般来说主节点负责写操作，从节点负责读操作 方式：主节点将自己的数据变化异步发送给从节点，从节点接收到后更新自己的数据 集群：通过设..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-02-09T07:57:06.000Z"}],["meta",{"property":"article:modified_time","content":"2025-02-09T07:57:06.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Redis主从复制\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-02-09T07:57:06.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"LincDocs\\",\\"url\\":\\"https://github.com/LincDocs/MdNote_Public/\\"}]}"]]},"headers":[{"level":1,"title":"Redis主从复制","slug":"redis主从复制","link":"#redis主从复制","children":[{"level":2,"title":"概念、主节点与从节点","slug":"概念、主节点与从节点","link":"#概念、主节点与从节点","children":[]},{"level":2,"title":"使用","slug":"使用","link":"#使用","children":[{"level":3,"title":"命令方式","slug":"命令方式","link":"#命令方式","children":[]},{"level":3,"title":"配置文件方式","slug":"配置文件方式","link":"#配置文件方式","children":[]}]}]}],"git":{"createdTime":1739087826000,"updatedTime":1739087826000,"contributors":[{"name":"Linc","username":"Linc","email":"762699299@qq.com","commits":1,"url":"https://github.com/Linc"}]},"readingTime":{"minutes":1.38,"words":413},"filePathRelative":"01. DesignAndDevelop/Develop/04. Project/Platform/Web/04. 后端/数据库/01. Redis/03_其他/07_主从复制.md","localizedDate":"2025年2月9日","excerpt":"\\n<h2>概念、主节点与从节点</h2>\\n<ul>\\n<li>主从复制：指将一台Redis服务器的数据复制到其他Redis服务器。</li>\\n<li>主节点 (master) 与 从节点 (slave)：主节点和从节点的关系是：一对多、主向从单向复制</li>\\n<li>职责：且一般来说主节点负责写操作，从节点负责读操作</li>\\n<li>方式：主节点将自己的数据变化异步发送给从节点，从节点接收到后更新自己的数据</li>\\n<li>集群：通过设置主节点和多个从节点，可以创建一个Redis集群</li>\\n</ul>\\n<h2>使用</h2>\\n<p>主节点不需要修改，默认就是主节点</p>\\n<p>从节点的修改有两种方式：</p>","autoDesc":true,"bioChainData":{"outlink":[],"backlink":[],"localMap":{"nodes":[{"id":"01. DesignAndDevelop/Develop/04. Project/Platform/Web/04. 后端/数据库/01. Redis/03_其他/07_主从复制.md","value":{"title":"07_主从复制","path":"01. DesignAndDevelop/Develop/04. Project/Platform/Web/04. 后端/数据库/01. Redis/03_其他/07_主从复制.md","outlink":[],"backlink":[]}}],"links":[]}}}');export{d as comp,k as data};
