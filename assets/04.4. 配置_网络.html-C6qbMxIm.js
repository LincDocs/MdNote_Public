import{_ as s,c as n,f as l,a as i,b as e,o as t}from"./app-DgtOKJM1.js";const r="/MdNote_Public/assets/image%205-BK5Z0X7Q.webp",d="/MdNote_Public/assets/image%206-D7WCq9ml.webp",o={};function h(p,a){return t(),n("div",null,a[0]||(a[0]=[l('<h1 id="配置-网络" tabindex="-1"><a class="header-anchor" href="#配置-网络"><span>配置_网络</span></a></h1><h2 id="网络类型" tabindex="-1"><a class="header-anchor" href="#网络类型"><span>网络类型</span></a></h2><div class="callout" data-callout="warning"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Warning</div></div><div class="callout-content"><p></p><p>本节以VirtualBox为例，VMware和Hyper-V的配置有所不同，且一些网络功能受限</p></div></div><p>vagrant总是会将虚拟机的第一个网卡 (虚拟机的虚拟网卡) 设置为NAT (默认值)</p><p>且这第一个网卡不可修改，你可以在此基础上加上一些其他的网络模式，会自动创建其他的虚拟网卡</p><p>配置完成后，也可以在 VritualBox 中查看，就能看到多个虚拟机网卡了</p>',6),i("div",{class:"ab-note drop-shadow"},[i("table",{class:"ab-table ab-branch-table ab-table-fc"},[i("tbody",null,[i("tr",null,[i("td",{rowspan:"4",col_index:"0",class:"markdown-rendered"},[i("div",null,[i("p",null,"网络地址转换 NAT")])]),i("td",{rowspan:"1",col_index:"4",class:"markdown-rendered"},[i("div",null,[i("p",null,[e("配置方式： "),i("em",null,"(默认值)"),i("code",null,'config.vm.network "forwarded_port", guest: 80, host: 8080')])])])]),i("tr",null,[i("td",{rowspan:"1",col_index:"4",class:"markdown-rendered"},[i("div",null,[i("p",null,"特点："),i("ol",null,[i("li",null,"只能用于虚拟机向外访问 (通常用来访问互联网)，主机不能直接访问虚拟机"),i("li",null,"主机只能通过端口转发访问虚拟机，例如ssh默认有22端口转发"),i("li",null,"虚拟机与虚拟机之间不能通信")])])])]),i("tr",null,[i("td",{rowspan:"1",col_index:"4",class:"markdown-rendered"},[i("div",null,[i("p",null,"优点：可以访问虚拟机内的服务")])])]),i("tr",null,[i("td",{rowspan:"1",col_index:"4",class:"markdown-rendered"},[i("div",null,[i("p",null,"缺点：不适合搭建分布式集群")])])]),i("tr",null,[i("td",{rowspan:"2",col_index:"0",class:"markdown-rendered"},[i("div",null,[i("p",null,"桥接")])]),i("td",{rowspan:"1",col_index:"2",class:"markdown-rendered"},[i("div",null,[i("p",null,[e("配置方式： "),i("code",null,'config.vm.network "public_network", ip: "10.150.36.191", bridge: "en4: USB-eth"')])])])]),i("tr",null,[i("td",{rowspan:"1",col_index:"2",class:"markdown-rendered"},[i("div",null,[i("p",null,"特点："),i("ol",null,[i("li",null,"特点：Bridge网络将虚拟机等同为网络中的真实主机，可以像访问其他主机一样访问虚拟机")])])])]),i("tr",null,[i("td",{rowspan:"2",col_index:"0",class:"markdown-rendered"},[i("div",null,[i("p",null,[e("仅主机网络"),i("br"),e("(Host-Only)")])])]),i("td",{rowspan:"1",col_index:"2",class:"markdown-rendered"},[i("div",null,[i("p",null,[e("配置方式： "),i("code",null,'config.vm.network "private_network", ip: "192.168.56.20"')])])])]),i("tr",null,[i("td",{rowspan:"1",col_index:"2",class:"markdown-rendered"},[i("div",null,[i("p",null,"特点："),i("ol",null,[i("li",null,"只能从宿主机访问虚拟机，无法从外部主机访问虚拟机 (Host-only顾名思义)"),i("li",null,"虚拟机之间可以互相访问")])])])]),i("tr",null,[i("td",{rowspan:"1",col_index:"0",class:"markdown-rendered"},[i("div",null,[i("p",null,[e("仅主机适配器"),i("br"),e("(Host-Only)")])])]),i("td",{rowspan:"1",col_index:"1",class:"markdown-rendered"},[i("div",null,[i("p",null,[i("em",null,"(已过时)")])])])]),i("tr",null,[i("td",{rowspan:"1",col_index:"0",class:"markdown-rendered"},[i("div",null,[i("p",null,"内部网络")])])]),i("tr",null,[i("td",{rowspan:"1",col_index:"0",class:"markdown-rendered"},[i("div",null,[i("p",null,"通用驱动")])])]),i("tr",null,[i("td",{rowspan:"1",col_index:"0",class:"markdown-rendered"},[i("div",null,[i("p",null,"NAT网络")])]),i("td",{rowspan:"1",col_index:"1",class:"markdown-rendered"},[i("div",null,[i("p",null,[e("注意："),i("code",null,"网络地址转换(NAT)"),e(" 与 "),i("code",null,"NAT网络(NAT network)"),e(" 不一样，是两种不同的网络模式。"),i("code",null,"NAT network"),e(" 也叫 "),i("code",null,"NAT service"),e("，可以在虚拟机与虚拟机之间互相访问")])])])]),i("tr",null,[i("td",{rowspan:"1",col_index:"0",class:"markdown-rendered"},[i("div",null,[i("p",null,"云网络")])]),i("td",{rowspan:"1",col_index:"1",class:"markdown-rendered"},[i("div",null,[i("p",null,[i("em",null,"(试验功能)")])])])]),i("tr",null,[i("td",{rowspan:"1",col_index:"0",class:"markdown-rendered"},[i("div",null,[i("p",null,"未指定")])])])])])],-1),l('<p><strong>Vagrant 网络：</strong></p><ul><li>NAT(默认)</li><li>私有网络</li><li>共有网络</li></ul><h3 id="_1-nat-网络地址转换-默认" tabindex="-1"><a class="header-anchor" href="#_1-nat-网络地址转换-默认"><span>(1) NAT 网络地址转换（默认）</span></a></h3><blockquote><h4 id="介绍、设置" tabindex="-1"><a class="header-anchor" href="#介绍、设置"><span>介绍、设置</span></a></h4></blockquote><p>Vagrant总是将虚拟机的第一个网卡设置为NAT(网络地址转发)。</p><p>NAT模式下，虚拟机只能单向访问外部网络(通常用来访问互联网)，虚拟机对外部互联网是不可见和无法访问的，虚拟机之间也是相互隔离的。</p><blockquote><h4 id="端口转发" tabindex="-1"><a class="header-anchor" href="#端口转发"><span>端口转发</span></a></h4></blockquote><p>在NAT模式下，如果想访问虚拟机中的端口，可以使用端口转发</p><p>配置方式：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">config.vm.network </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;forwarded_port&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, guest: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">80</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, host: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">8080</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_3-私有网络-仅主机、hostonly" tabindex="-1"><a class="header-anchor" href="#_3-私有网络-仅主机、hostonly"><span>(3) 私有网络 (仅主机、HostOnly)</span></a></h3><blockquote><h4 id="介绍、设置-1" tabindex="-1"><a class="header-anchor" href="#介绍、设置-1"><span>介绍、设置</span></a></h4></blockquote><p>私有网络可以实现虚拟机之间的网络访问，在Virtual Box下，Vagrant将网卡设置为<em>仅主机访问(Host-only)模式</em>。</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">config.vm.network </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;private_network&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, ip: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;192.168.56.20&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>VirtualBox默认将192.168.56.0/21范围内的地址分配给虚拟机</p><blockquote><h4 id="验证" tabindex="-1"><a class="header-anchor" href="#验证"><span>验证</span></a></h4></blockquote><p>reload 后，可以简单验证一下：</p><ol><li>ssh时使用新ip</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ssh</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> vagrant@192.168.56.20</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="2"><li><p>ssh连接后，<code>在主机终端 ping 192.168.56.20</code></p></li><li><p>也可以在 VirtualBox 中查看虚拟机的网络设置来验证</p></li></ol><blockquote><h4 id="查看ip地址范围" tabindex="-1"><a class="header-anchor" href="#查看ip地址范围"><span>查看IP地址范围</span></a></h4></blockquote><p>可以使用以下命令查看IP地址范围</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">VBoxManage</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> list</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hostonlynets</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 好像报错？</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+r+'" alt="" loading="lazy"></p><blockquote><h4 id="dhcp" tabindex="-1"><a class="header-anchor" href="#dhcp"><span>DHCP</span></a></h4></blockquote><p>也可以使用 <code>DHCP</code> 自动获取IP (不推荐dhcp)</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">config.vm.network </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;private_network&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;dhcp&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><h4 id="注意项" tabindex="-1"><a class="header-anchor" href="#注意项"><span>注意项</span></a></h4></blockquote><ol><li>Windows 下使用Hyper-V创建私有网络无法指定IP，IP由Hyper-V进行分配。详见：<a href="https://developer.hashicorp.com/vagrant/docs/providers/hyperv/limitations" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/vagrant/docs/providers/hyperv/limitations</a></li><li>VMware 在 macOS 11 之后，无法指定IP，并且不支持端口转发。详见：<a href="https://developer.hashicorp.com/vagrant/docs/providers/vmware/known-issues" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/vagrant/docs/providers/vmware/known-issues</a></li></ol><h3 id="_4-外部网络-桥接模式" tabindex="-1"><a class="header-anchor" href="#_4-外部网络-桥接模式"><span>(4) 外部网络 (桥接模式)</span></a></h3><p>如果要从别的主机进行访问，也可以设置公有网络。</p><p>在VirutualBox中，使用bridge网络实现。</p><p>特点：Bridge网络将虚拟机等同为网络中的真实主机，可以像访问其他主机一样访问虚拟机。</p><p>设置方式：</p><ol><li>首先要查看桥接网络接口：</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">VBoxManage</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> list</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bridgedifs</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>打印： <img src="'+d+`" alt="" loading="lazy"></p><ol start="2"><li>然后要设置桥接网络：(这里的bridge值就是刚刚查到的名字)</li></ol><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">config.vm.network </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;public_network&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, ip: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;10.150.36.191&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, bridge: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;en4: USB-eth&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>注意：bridge的名称中不能包含中文，Vagrant无法识别，需要修改</p><ol start="3"><li>验证</li></ol><p>同一网络的其他主机ping一下，或者在本机上运行：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">~ ip addr</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 然后就会看到显示结果中多了一个</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div>`,43)]))}const k=s(o,[["render",h],["__file","04.4. 配置_网络.html.vue"]]),u=JSON.parse('{"path":"/01.%20DesignAndDevelop/Virtual/%E8%99%9A%E6%8B%9F%E6%9C%BA/Vagrant/%E3%80%8AVagrant%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E3%80%8B/04.4.%20%E9%85%8D%E7%BD%AE_%E7%BD%91%E7%BB%9C.html","title":"配置_网络","lang":"zh-CN","frontmatter":{"description":"配置_网络 网络类型 Warning 本节以VirtualBox为例，VMware和Hyper-V的配置有所不同，且一些网络功能受限 vagrant总是会将虚拟机的第一个网卡 (虚拟机的虚拟网卡) 设置为NAT (默认值) 且这第一个网卡不可修改，你可以在此基础上加上一些其他的网络模式，会自动创建其他的虚拟网卡 配置完成后，也可以在 VritualBo...","head":[["meta",{"property":"og:url","content":"https://LincDocs.github.io/MdNote_Public/01.%20DesignAndDevelop/Virtual/%E8%99%9A%E6%8B%9F%E6%9C%BA/Vagrant/%E3%80%8AVagrant%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E3%80%8B/04.4.%20%E9%85%8D%E7%BD%AE_%E7%BD%91%E7%BB%9C.html"}],["meta",{"property":"og:site_name","content":"MdNote_Public"}],["meta",{"property":"og:title","content":"配置_网络"}],["meta",{"property":"og:description","content":"配置_网络 网络类型 Warning 本节以VirtualBox为例，VMware和Hyper-V的配置有所不同，且一些网络功能受限 vagrant总是会将虚拟机的第一个网卡 (虚拟机的虚拟网卡) 设置为NAT (默认值) 且这第一个网卡不可修改，你可以在此基础上加上一些其他的网络模式，会自动创建其他的虚拟网卡 配置完成后，也可以在 VritualBo..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-02-03T15:36:56.000Z"}],["meta",{"property":"article:modified_time","content":"2025-02-03T15:36:56.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"配置_网络\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-02-03T15:36:56.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"LincDocs\\",\\"url\\":\\"https://github.com/LincDocs/MdNote_Public/\\"}]}"]]},"headers":[{"level":1,"title":"配置_网络","slug":"配置-网络","link":"#配置-网络","children":[{"level":2,"title":"网络类型","slug":"网络类型","link":"#网络类型","children":[{"level":3,"title":"(1) NAT 网络地址转换（默认）","slug":"_1-nat-网络地址转换-默认","link":"#_1-nat-网络地址转换-默认","children":[]},{"level":3,"title":"(3) 私有网络 (仅主机、HostOnly)","slug":"_3-私有网络-仅主机、hostonly","link":"#_3-私有网络-仅主机、hostonly","children":[]},{"level":3,"title":"(4) 外部网络 (桥接模式)","slug":"_4-外部网络-桥接模式","link":"#_4-外部网络-桥接模式","children":[]}]}]}],"git":{"createdTime":1738597016000,"updatedTime":1738597016000,"contributors":[{"name":"Linc","username":"Linc","email":"762699299@qq.com","commits":1,"url":"https://github.com/Linc"}]},"readingTime":{"minutes":3.47,"words":1041},"filePathRelative":"01. DesignAndDevelop/Virtual/虚拟机/Vagrant/《Vagrant快速入门》/04.4. 配置_网络.md","localizedDate":"2025年2月3日","excerpt":"\\n<h2>网络类型</h2>\\n\\n<div class=\\"callout\\" data-callout=\\"warning\\">\\n<div class=\\"callout-title\\">\\n<div class=\\"callout-title-icon\\">\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"24\\" height=\\"24\\" viewBox=\\"0 0 24 24\\" fill=\\"none\\" stroke=\\"currentColor\\" stroke-width=\\"2\\" stroke-linecap=\\"round\\" stroke-linejoin=\\"round\\" class=\\"lucide lucide-alert-triangle\\"><path d=\\"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\\"></path><path d=\\"M12 9v4\\"></path><path d=\\"M12 17h.01\\"></path></svg>\\n</div>\\n<div class=\\"callout-title-inner\\">Warning</div>\\n</div>\\n<div class=\\"callout-content\\"><p></p>\\n<p>本节以VirtualBox为例，VMware和Hyper-V的配置有所不同，且一些网络功能受限</p>\\n</div></div>","autoDesc":true,"bioChainData":{"outlink":[],"backlink":[],"localMap":{"nodes":[{"id":"01. DesignAndDevelop/Virtual/虚拟机/Vagrant/《Vagrant快速入门》/04.4. 配置_网络.md","value":{"title":"04.4. 配置_网络","path":"01. DesignAndDevelop/Virtual/虚拟机/Vagrant/《Vagrant快速入门》/04.4. 配置_网络.md","outlink":[],"backlink":[]}}],"links":[]}}}');export{k as comp,u as data};
