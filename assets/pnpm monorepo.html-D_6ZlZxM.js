import{_ as l,c as e,f as s,o as n}from"./app-DJfUzywl.js";const a={};function p(o,i){return n(),e("div",null,i[0]||(i[0]=[s(`<h1 id="pnpm-monorepo" tabindex="-1"><a class="header-anchor" href="#pnpm-monorepo"><span>pnpm monorepo</span></a></h1><p>参考：</p><ul><li><a href="https://www.bilibili.com/video/BV1hp4y1L7Mr" target="_blank" rel="noopener noreferrer">基于pnpm workspace，超清楚简单的monorepo项目创建与基础演示</a>，10min</li><li><a href="https://www.bilibili.com/video/BV1qg4y157dv" target="_blank" rel="noopener noreferrer">使用 pnpm workspace 管理 monorepo</a>，40min 有字幕</li></ul><h2 id="介绍-pnpm" tabindex="-1"><a class="header-anchor" href="#介绍-pnpm"><span>介绍 pnpm</span></a></h2><ul><li>快速：pnpm 会将包缓存到本地，减少二次安装需要的时间</li><li>节省磁盘空间：它会把包软链到项目本地，不需要反复安装</li><li>节省网络带宽：同样的道理</li><li>更好的依赖处理逻辑</li></ul><h2 id="介绍-monorepo" tabindex="-1"><a class="header-anchor" href="#介绍-monorepo"><span>介绍 monorepo</span></a></h2><h3 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍"><span>介绍</span></a></h3><p>在一个代码仓库中管理多个不同的项目</p><p>举个例子</p><ul><li>Webpack 及其插件</li><li>同时包含前后端的大型项目</li><li>Chrome 扩展等有多个入口的项目</li></ul><h3 id="使用-monorepo-的优劣" tabindex="-1"><a class="header-anchor" href="#使用-monorepo-的优劣"><span>使用 monorepo 的优劣</span></a></h3><p>使用 Monorepo 的优势</p><ul><li>便于管理多个互相依赖的项目</li><li>便于团队共享知识库</li><li>减少项目管理的成本</li></ul><p>使用 Monorepo 的劣势</p><ul><li>版本管理混乱</li><li>代码质量参差不齐，且互相影响</li><li>技术栈升级困难</li><li>难以进行权限管理</li></ul><p>浅尝 Monorepo https://blog.meathill.com/tech/some-basic-experience-about-monorepo.html</p><h3 id="什么时候使用-monorepo" tabindex="-1"><a class="header-anchor" href="#什么时候使用-monorepo"><span>什么时候使用 monorepo</span></a></h3><ul><li>充分条件 <ul><li>多个项目互相依赖</li><li>功能、版本之间存在强关联</li><li>项目中存在多个编译入口，且构建条件存在差异</li></ul></li><li>次要条件 <ul><li>希望在团队中共享知识</li><li>降低项目管理的成本</li></ul></li></ul><h3 id="为什么使用-pnpm-管理-monorepo" tabindex="-1"><a class="header-anchor" href="#为什么使用-pnpm-管理-monorepo"><span>为什么使用 pnpm 管理 monorepo</span></a></h3><p>为什么要用pnpm来进行mono管理</p><ul><li>速度快</li><li>磁盘占用少</li><li>项目依赖彼此独立、隔离</li><li>有各种命令方便操作</li></ul><p>其他例如yaml等，似乎不是很好</p><h2 id="项目实操" tabindex="-1"><a class="header-anchor" href="#项目实操"><span>项目实操</span></a></h2><h3 id="项目结构" tabindex="-1"><a class="header-anchor" href="#项目结构"><span>项目结构</span></a></h3><ul><li>/api/</li><li>/packages/ <ul><li>background/</li><li>content/</li><li>core/： 核心</li><li>popup/： 单页面应用</li><li>global.d.ts</li></ul></li><li>/supabase/</li><li>/...</li></ul><h3 id="创建-pnpm-workspace-yaml" tabindex="-1"><a class="header-anchor" href="#创建-pnpm-workspace-yaml"><span>创建 pnpm-workspace.yaml</span></a></h3><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" data-title="yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">packages</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;packages/*&#39;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;api&#39;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;supabase&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="互相引用" tabindex="-1"><a class="header-anchor" href="#互相引用"><span>互相引用</span></a></h3><ul><li>/api/</li><li>/packages/ <ul><li>background/</li><li>content/</li><li>core/： 核心<div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// package.json</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;name&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;@wooka/core&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li>popup/： 单页面应用<div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// package.json</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;name&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;@wooka/popup&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;dependencies&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        &quot;@wooka/core&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;workspace:*&quot;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // 告诉pnpm使用工作空间里面的的另一个模块</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li>global.d.ts</li></ul></li><li>/supabase/</li><li>/...</li></ul><h3 id="安装依赖" tabindex="-1"><a class="header-anchor" href="#安装依赖"><span>安装依赖</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> packages/popup</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pnpm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> i</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pnpm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lodash</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ll</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> node_modules/@wooka/core</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 这时会发现实际上这是一个软链接</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="常见问题解决" tabindex="-1"><a class="header-anchor" href="#常见问题解决"><span>常见问题解决</span></a></h2><p>基本原则：各司其职</p><ul><li>pnpm：只负责生成依赖目录 node modules</li><li>脚手架：负责在工作目录内构建开发环境、打包项目</li><li>lock 文件：负责记录依赖版本号</li><li>package.json：负责记录依赖和脚本</li></ul><p>FAQ</p><ul><li>需要每个项目文件夹配置单独的入口文件么? <ul><li>是的，需要。每个项目文件夹都是独立的项目</li></ul></li><li>怎么安装依赖? <ul><li>我建议在每个项目文件夹下面执行pnpm i</li></ul></li><li>怎么引用依赖? <ul><li>该怎么引用就怎么应用。</li></ul></li><li>怎么打包?怎么启动开发环境? <ul><li>对每个项目而言，跟以前一样。对整个项目，你可以自己写脚本</li></ul></li><li>单个项目需要发布到NPM 么? <ul><li>不需要。对同一个 monorepo 下的项目，它们就相当于已经发布了</li></ul></li><li>怎么处理端口? <ul><li>以前怎么处理，现在还是。workspace 并不会帮你处理端口。</li></ul></li></ul><p>Monorepo的好处在于自身 pnpm 只是帮我们管理</p><p>扩展阅读：工作空间 (Workspace) 的pnpm官方文档</p><h2 id="答疑" tabindex="-1"><a class="header-anchor" href="#答疑"><span>答疑</span></a></h2>`,39)]))}const r=l(a,[["render",p],["__file","pnpm monorepo.html.vue"]]),h=JSON.parse('{"path":"/01.%20DesignAndDevelop/Develop/03.%20Tools/03.%20%E7%AE%A1%E7%90%86%E5%B1%82/03.%20%E5%A4%9A%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86/02.%20%E5%AD%90%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E7%B3%BB%E7%BB%9F/FrontEnd/pnpm%20monorepo.html","title":"pnpm monorepo","lang":"zh-CN","frontmatter":{"description":"pnpm monorepo 参考： 基于pnpm workspace，超清楚简单的monorepo项目创建与基础演示，10min 使用 pnpm workspace 管理 monorepo，40min 有字幕 介绍 pnpm 快速：pnpm 会将包缓存到本地，减少二次安装需要的时间 节省磁盘空间：它会把包软链到项目本地，不需要反复安装 节省网络带宽：同...","head":[["meta",{"property":"og:url","content":"https://LincDocs.github.io/MdNote_Public/01.%20DesignAndDevelop/Develop/03.%20Tools/03.%20%E7%AE%A1%E7%90%86%E5%B1%82/03.%20%E5%A4%9A%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86/02.%20%E5%AD%90%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E7%B3%BB%E7%BB%9F/FrontEnd/pnpm%20monorepo.html"}],["meta",{"property":"og:site_name","content":"MdNote_Public"}],["meta",{"property":"og:title","content":"pnpm monorepo"}],["meta",{"property":"og:description","content":"pnpm monorepo 参考： 基于pnpm workspace，超清楚简单的monorepo项目创建与基础演示，10min 使用 pnpm workspace 管理 monorepo，40min 有字幕 介绍 pnpm 快速：pnpm 会将包缓存到本地，减少二次安装需要的时间 节省磁盘空间：它会把包软链到项目本地，不需要反复安装 节省网络带宽：同..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-02-07T17:05:32.000Z"}],["meta",{"property":"article:modified_time","content":"2025-02-07T17:05:32.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"pnpm monorepo\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-02-07T17:05:32.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"LincDocs\\",\\"url\\":\\"https://github.com/LincDocs/MdNote_Public/\\"}]}"]]},"headers":[{"level":1,"title":"pnpm monorepo","slug":"pnpm-monorepo","link":"#pnpm-monorepo","children":[{"level":2,"title":"介绍 pnpm","slug":"介绍-pnpm","link":"#介绍-pnpm","children":[]},{"level":2,"title":"介绍 monorepo","slug":"介绍-monorepo","link":"#介绍-monorepo","children":[{"level":3,"title":"介绍","slug":"介绍","link":"#介绍","children":[]},{"level":3,"title":"使用 monorepo 的优劣","slug":"使用-monorepo-的优劣","link":"#使用-monorepo-的优劣","children":[]},{"level":3,"title":"什么时候使用 monorepo","slug":"什么时候使用-monorepo","link":"#什么时候使用-monorepo","children":[]},{"level":3,"title":"为什么使用 pnpm 管理 monorepo","slug":"为什么使用-pnpm-管理-monorepo","link":"#为什么使用-pnpm-管理-monorepo","children":[]}]},{"level":2,"title":"项目实操","slug":"项目实操","link":"#项目实操","children":[{"level":3,"title":"项目结构","slug":"项目结构","link":"#项目结构","children":[]},{"level":3,"title":"创建 pnpm-workspace.yaml","slug":"创建-pnpm-workspace-yaml","link":"#创建-pnpm-workspace-yaml","children":[]},{"level":3,"title":"互相引用","slug":"互相引用","link":"#互相引用","children":[]},{"level":3,"title":"安装依赖","slug":"安装依赖","link":"#安装依赖","children":[]}]},{"level":2,"title":"常见问题解决","slug":"常见问题解决","link":"#常见问题解决","children":[]},{"level":2,"title":"答疑","slug":"答疑","link":"#答疑","children":[]}]}],"git":{"createdTime":1738947932000,"updatedTime":1738947932000,"contributors":[{"name":"Linc","username":"Linc","email":"762699299@qq.com","commits":1,"url":"https://github.com/Linc"}]},"readingTime":{"minutes":2.6,"words":781},"filePathRelative":"01. DesignAndDevelop/Develop/03. Tools/03. 管理层/03. 多项目管理/02. 子项目构建系统/FrontEnd/pnpm monorepo.md","localizedDate":"2025年2月7日","excerpt":"\\n<p>参考：</p>\\n<ul>\\n<li><a href=\\"https://www.bilibili.com/video/BV1hp4y1L7Mr\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">基于pnpm workspace，超清楚简单的monorepo项目创建与基础演示</a>，10min</li>\\n<li><a href=\\"https://www.bilibili.com/video/BV1qg4y157dv\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">使用 pnpm workspace 管理 monorepo</a>，40min 有字幕</li>\\n</ul>","autoDesc":true,"bioChainData":{"outlink":[],"backlink":[],"localMap":{"nodes":[{"id":"01. DesignAndDevelop/Develop/03. Tools/03. 管理层/03. 多项目管理/02. 子项目构建系统/FrontEnd/pnpm monorepo.md","value":{"title":"pnpm monorepo","path":"01. DesignAndDevelop/Develop/03. Tools/03. 管理层/03. 多项目管理/02. 子项目构建系统/FrontEnd/pnpm monorepo.md","outlink":[],"backlink":[]}}],"links":[]}}}');export{r as comp,h as data};
