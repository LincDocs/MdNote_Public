import{_ as a,c as i,f as s,o as t}from"./app-DgtOKJM1.js";const n="/MdNote_Public/assets/image-20230906094634937-CRx8xThB.png",l="/MdNote_Public/assets/image-20230906094624349-BOnO2qlG.png",r="/MdNote_Public/assets/image-20230906095433786-DFWfrCjo.png",h="/MdNote_Public/assets/webui_0813_1-CiF0QWGe.png",p="/MdNote_Public/assets/image-20230906100313064--osWr8cU.png",c="/MdNote_Public/assets/image-20230906095433786-DFWfrCjo.png",o="/MdNote_Public/assets/image-20230906101805804-DOVxlawV.png",d={};function g(k,e){return t(),i("div",null,e[0]||(e[0]=[s('<h1 id="langchain-chatchat" tabindex="-1"><a class="header-anchor" href="#langchain-chatchat"><span>Langchain-Chatchat</span></a></h1><p>é¡¹ç›®æ–‡æ¡£ç›®å½•</p><ul><li>FAQ.md</li><li><a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/docs/INSTALL.md" target="_blank" rel="noopener noreferrer">Install.md</a></li><li><a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/docs/Issue-with-Installing-Packages-Using-pip-in-Anaconda.md" target="_blank" rel="noopener noreferrer">åœ¨Anacondaä¸­ä½¿ç”¨pipå®‰è£…åŒ…çš„é—®é¢˜.md</a></li><li>å‘é‡åº“ç¯å¢ƒ docker.md</li><li>å¯åŠ¨APIæœåŠ¡.md</li><li><a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/docs/%E5%9C%A8Anaconda%E4%B8%AD%E4%BD%BF%E7%94%A8pip%E5%AE%89%E8%A3%85%E5%8C%85%E6%97%A0%E6%95%88%E9%97%AE%E9%A2%98.md" target="_blank" rel="noopener noreferrer">åœ¨Anacondaä¸­ä½¿ç”¨pipå®‰è£…åŒ…æ— æ•ˆé—®é¢˜.md</a></li></ul><p>å‚è€ƒï¼šhttps://github.com/chatchat-space/Langchain-Chatchat</p><p>README ç›®å½•</p><ul><li><a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/README.md#%E4%BB%8B%E7%BB%8D" target="_blank" rel="noopener noreferrer">ä»‹ç»</a></li><li><a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/README.md#%E5%8F%98%E6%9B%B4%E6%97%A5%E5%BF%97" target="_blank" rel="noopener noreferrer">å˜æ›´æ—¥å¿—</a></li><li><a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/README.md#%E6%A8%A1%E5%9E%8B%E6%94%AF%E6%8C%81" target="_blank" rel="noopener noreferrer">æ¨¡å‹æ”¯æŒ</a></li><li><a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/README.md#Docker-%E9%83%A8%E7%BD%B2" target="_blank" rel="noopener noreferrer">Docker éƒ¨ç½²</a></li><li>å¼€å‘éƒ¨ç½² <ul><li><a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/README.md#%E8%BD%AF%E4%BB%B6%E9%9C%80%E6%B1%82" target="_blank" rel="noopener noreferrer">è½¯ä»¶éœ€æ±‚</a></li><li><a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/README.md#1.-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87" target="_blank" rel="noopener noreferrer">1. å¼€å‘ç¯å¢ƒå‡†å¤‡</a></li><li><a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/README.md#2.-%E4%B8%8B%E8%BD%BD%E6%A8%A1%E5%9E%8B%E8%87%B3%E6%9C%AC%E5%9C%B0" target="_blank" rel="noopener noreferrer">2. ä¸‹è½½æ¨¡å‹è‡³æœ¬åœ°</a></li><li><a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/README.md#3.-%E8%AE%BE%E7%BD%AE%E9%85%8D%E7%BD%AE%E9%A1%B9" target="_blank" rel="noopener noreferrer">3. è®¾ç½®é…ç½®é¡¹</a></li><li><a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/README.md#4.-%E7%9F%A5%E8%AF%86%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%8E%E8%BF%81%E7%A7%BB" target="_blank" rel="noopener noreferrer">4. çŸ¥è¯†åº“åˆå§‹åŒ–ä¸è¿ç§»</a></li><li><a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/README.md#6.-%E4%B8%80%E9%94%AE%E5%90%AF%E5%8A%A8" target="_blank" rel="noopener noreferrer">5. ä¸€é”®å¯åŠ¨APIæœåŠ¡æˆ–WebUIæœåŠ¡</a></li><li><a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/README.md#5.-%E5%90%AF%E5%8A%A8-API-%E6%9C%8D%E5%8A%A1%E6%88%96-Web-UI" target="_blank" rel="noopener noreferrer">6. åˆ†æ­¥å¯åŠ¨ API æœåŠ¡æˆ– Web UI</a></li></ul></li><li><a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/README.md#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98" target="_blank" rel="noopener noreferrer">å¸¸è§é—®é¢˜</a></li><li><a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/README.md#%E8%B7%AF%E7%BA%BF%E5%9B%BE" target="_blank" rel="noopener noreferrer">è·¯çº¿å›¾</a></li><li><a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/README.md#%E9%A1%B9%E7%9B%AE%E4%BA%A4%E6%B5%81%E7%BE%A4" target="_blank" rel="noopener noreferrer">é¡¹ç›®äº¤æµç¾¤</a></li></ul><h2 id="ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#ä»‹ç»"><span>ä»‹ç»</span></a></h2><p>ğŸ¤–ï¸ ä¸€ç§åˆ©ç”¨ <a href="https://github.com/hwchase17/langchain" target="_blank" rel="noopener noreferrer">langchain</a> æ€æƒ³å®ç°çš„åŸºäºæœ¬åœ°çŸ¥è¯†åº“çš„é—®ç­”åº”ç”¨ï¼Œç›®æ ‡æœŸæœ›å»ºç«‹ä¸€å¥—å¯¹ä¸­æ–‡åœºæ™¯ä¸å¼€æºæ¨¡å‹æ”¯æŒå‹å¥½ã€å¯ç¦»çº¿è¿è¡Œçš„çŸ¥è¯†åº“é—®ç­”è§£å†³æ–¹æ¡ˆã€‚</p><p>ğŸ’¡ å— <a href="https://github.com/GanymedeNil" target="_blank" rel="noopener noreferrer">GanymedeNil</a> çš„é¡¹ç›® <a href="https://github.com/GanymedeNil/document.ai" target="_blank" rel="noopener noreferrer">document.ai</a> å’Œ <a href="https://github.com/AlexZhangji" target="_blank" rel="noopener noreferrer">AlexZhangji</a> åˆ›å»ºçš„ <a href="https://github.com/THUDM/ChatGLM-6B/pull/216" target="_blank" rel="noopener noreferrer">ChatGLM-6B Pull Request</a> å¯å‘ï¼Œå»ºç«‹äº†å…¨æµç¨‹å¯ä½¿ç”¨å¼€æºæ¨¡å‹å®ç°çš„æœ¬åœ°çŸ¥è¯†åº“é—®ç­”åº”ç”¨ã€‚æœ¬é¡¹ç›®çš„æœ€æ–°ç‰ˆæœ¬ä¸­é€šè¿‡ä½¿ç”¨ <a href="https://github.com/lm-sys/FastChat" target="_blank" rel="noopener noreferrer">FastChat</a> æ¥å…¥ Vicuna, Alpaca, LLaMA, Koala, RWKV ç­‰æ¨¡å‹ï¼Œä¾æ‰˜äº <a href="https://github.com/langchain-ai/langchain" target="_blank" rel="noopener noreferrer">langchain</a> æ¡†æ¶æ”¯æŒé€šè¿‡åŸºäº <a href="https://github.com/tiangolo/fastapi" target="_blank" rel="noopener noreferrer">FastAPI</a> æä¾›çš„ API è°ƒç”¨æœåŠ¡ï¼Œæˆ–ä½¿ç”¨åŸºäº <a href="https://github.com/streamlit/streamlit" target="_blank" rel="noopener noreferrer">Streamlit</a> çš„ WebUI è¿›è¡Œæ“ä½œã€‚</p><p>âœ… ä¾æ‰˜äºæœ¬é¡¹ç›®æ”¯æŒçš„å¼€æº <strong>LLM</strong> ä¸ <strong>Embedding</strong> æ¨¡å‹ï¼Œæœ¬é¡¹ç›®å¯å®ç°å…¨éƒ¨ä½¿ç”¨<strong>å¼€æº</strong>æ¨¡å‹<strong>ç¦»çº¿ç§æœ‰éƒ¨ç½²</strong>ã€‚ä¸æ­¤åŒæ—¶ï¼Œæœ¬é¡¹ç›®ä¹Ÿæ”¯æŒ OpenAI GPT API çš„è°ƒç”¨ï¼Œå¹¶å°†åœ¨åç»­æŒç»­æ‰©å……å¯¹å„ç±»æ¨¡å‹åŠæ¨¡å‹ API çš„æ¥å…¥ã€‚ ï¼ˆæœ¯è¯­ï¼šLLM æ˜¯å¤§å‹è¯­è¨€æ¨¡å‹ï¼ŒEmbedding æ˜¯å‘é‡åº“æ˜ å°„ï¼‰</p><p>â›“ï¸ æœ¬é¡¹ç›®å®ç°åŸç†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¿‡ç¨‹åŒ…æ‹¬åŠ è½½æ–‡ä»¶ -&gt; è¯»å–æ–‡æœ¬ -&gt; æ–‡æœ¬åˆ†å‰² -&gt; æ–‡æœ¬å‘é‡åŒ– -&gt; é—®å¥å‘é‡åŒ– -&gt; åœ¨æ–‡æœ¬å‘é‡ä¸­åŒ¹é…å‡ºä¸é—®å¥å‘é‡æœ€ç›¸ä¼¼çš„ <code>top k</code>ä¸ª -&gt; åŒ¹é…å‡ºçš„æ–‡æœ¬ä½œä¸ºä¸Šä¸‹æ–‡å’Œé—®é¢˜ä¸€èµ·æ·»åŠ åˆ° <code>prompt</code>ä¸­ -&gt; æäº¤ç»™ <code>LLM</code>ç”Ÿæˆå›ç­”ã€‚</p><p>ğŸ“º <a href="https://www.bilibili.com/video/BV13M4y1e7cN/?share_source=copy_web&amp;vd_source=e6c5aafe684f30fbe41925d61ca6d514" target="_blank" rel="noopener noreferrer">åŸç†ä»‹ç»è§†é¢‘</a></p><p><img src="'+n+'" alt="image-20230906094634937" loading="lazy"></p><p>ä»æ–‡æ¡£å¤„ç†è§’åº¦æ¥çœ‹ï¼Œå®ç°æµç¨‹å¦‚ä¸‹ï¼š</p><p><img src="'+l+`" alt="image-20230906094624349" loading="lazy"></p><p>ğŸš© æœ¬é¡¹ç›®æœªæ¶‰åŠå¾®è°ƒã€è®­ç»ƒè¿‡ç¨‹ï¼Œä½†å¯åˆ©ç”¨å¾®è°ƒæˆ–è®­ç»ƒå¯¹æœ¬é¡¹ç›®æ•ˆæœè¿›è¡Œä¼˜åŒ–ã€‚</p><p>ğŸŒ <a href="https://www.codewithgpu.com/i/imClumsyPanda/langchain-ChatGLM/Langchain-Chatchat" target="_blank" rel="noopener noreferrer">AutoDL é•œåƒ</a> ä¸­ <code>v7</code> ç‰ˆæœ¬æ‰€ä½¿ç”¨ä»£ç å·²æ›´æ–°è‡³æœ¬é¡¹ç›® <code>v0.2.3</code> ç‰ˆæœ¬ã€‚</p><p>ğŸ³ <a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/registry.cn-beijing.aliyuncs.com/chatchat/chatchat:0.2.0" target="_blank" rel="noopener noreferrer">Docker é•œåƒ</a></p><p>ğŸ’» ä¸€è¡Œå‘½ä»¤è¿è¡Œ Dockerï¼š</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --gpus</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> all</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 80:8501</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> registry.cn-beijing.aliyuncs.com/chatchat/chatchat:0.2.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="æ¨¡å‹æ”¯æŒ" tabindex="-1"><a class="header-anchor" href="#æ¨¡å‹æ”¯æŒ"><span>æ¨¡å‹æ”¯æŒ</span></a></h3><p>æœ¬é¡¹ç›®ä¸­é»˜è®¤ä½¿ç”¨çš„ LLM æ¨¡å‹ä¸º <a href="https://huggingface.co/THUDM/chatglm2-6b" target="_blank" rel="noopener noreferrer">THUDM/chatglm2-6b</a>ï¼Œé»˜è®¤ä½¿ç”¨çš„ Embedding æ¨¡å‹ä¸º <a href="https://huggingface.co/moka-ai/m3e-base" target="_blank" rel="noopener noreferrer">moka-ai/m3e-base</a> ä¸ºä¾‹ã€‚</p><h4 id="llm-æ¨¡å‹æ”¯æŒ" tabindex="-1"><a class="header-anchor" href="#llm-æ¨¡å‹æ”¯æŒ"><span>LLM æ¨¡å‹æ”¯æŒ</span></a></h4><p>æœ¬é¡¹ç›®æœ€æ–°ç‰ˆæœ¬ä¸­åŸºäº <a href="https://github.com/lm-sys/FastChat" target="_blank" rel="noopener noreferrer">FastChat</a> è¿›è¡Œæœ¬åœ° LLM æ¨¡å‹æ¥å…¥ï¼Œæ”¯æŒæ¨¡å‹å¦‚ä¸‹ï¼š</p><ul><li><a href="https://huggingface.co/meta-llama/Llama-2-7b-chat-hf" target="_blank" rel="noopener noreferrer">meta-llama/Llama-2-7b-chat-hf</a></li><li>Vicuna, Alpaca, LLaMA, Koala</li><li><a href="https://huggingface.co/BlinkDL/rwkv-4-raven" target="_blank" rel="noopener noreferrer">BlinkDL/RWKV-4-Raven</a></li><li><a href="https://huggingface.co/camel-ai/CAMEL-13B-Combined-Data" target="_blank" rel="noopener noreferrer">camel-ai/CAMEL-13B-Combined-Data</a></li><li><a href="https://huggingface.co/databricks/dolly-v2-12b" target="_blank" rel="noopener noreferrer">databricks/dolly-v2-12b</a></li><li><a href="https://huggingface.co/FreedomIntelligence/phoenix-inst-chat-7b" target="_blank" rel="noopener noreferrer">FreedomIntelligence/phoenix-inst-chat-7b</a></li><li><a href="https://huggingface.co/h2oai/h2ogpt-gm-oasst1-en-2048-open-llama-7b" target="_blank" rel="noopener noreferrer">h2oai/h2ogpt-gm-oasst1-en-2048-open-llama-7b</a></li><li><a href="https://huggingface.co/lcw99/polyglot-ko-12.8b-chang-instruct-chat" target="_blank" rel="noopener noreferrer">lcw99/polyglot-ko-12.8b-chang-instruct-chat</a></li><li><a href="https://huggingface.co/lmsys/fastchat-t5" target="_blank" rel="noopener noreferrer">lmsys/fastchat-t5-3b-v1.0</a></li><li><a href="https://huggingface.co/mosaicml/mpt-7b-chat" target="_blank" rel="noopener noreferrer">mosaicml/mpt-7b-chat</a></li><li><a href="https://huggingface.co/Neutralzz/BiLLa-7B-SFT" target="_blank" rel="noopener noreferrer">Neutralzz/BiLLa-7B-SFT</a></li><li><a href="https://huggingface.co/nomic-ai/gpt4all-13b-snoozy" target="_blank" rel="noopener noreferrer">nomic-ai/gpt4all-13b-snoozy</a></li><li><a href="https://huggingface.co/NousResearch/Nous-Hermes-13b" target="_blank" rel="noopener noreferrer">NousResearch/Nous-Hermes-13b</a></li><li><a href="https://huggingface.co/openaccess-ai-collective/manticore-13b-chat-pyg" target="_blank" rel="noopener noreferrer">openaccess-ai-collective/manticore-13b-chat-pyg</a></li><li><a href="https://huggingface.co/OpenAssistant/oasst-sft-4-pythia-12b-epoch-3.5" target="_blank" rel="noopener noreferrer">OpenAssistant/oasst-sft-4-pythia-12b-epoch-3.5</a></li><li><a href="https://huggingface.co/project-baize/baize-v2-7b" target="_blank" rel="noopener noreferrer">project-baize/baize-v2-7b</a></li><li><a href="https://huggingface.co/Salesforce/codet5p-6b" target="_blank" rel="noopener noreferrer">Salesforce/codet5p-6b</a></li><li><a href="https://huggingface.co/stabilityai/stablelm-tuned-alpha-7b" target="_blank" rel="noopener noreferrer">StabilityAI/stablelm-tuned-alpha-7b</a></li><li><a href="https://huggingface.co/THUDM/chatglm-6b" target="_blank" rel="noopener noreferrer">THUDM/chatglm-6b</a></li><li><a href="https://huggingface.co/THUDM/chatglm2-6b" target="_blank" rel="noopener noreferrer">THUDM/chatglm2-6b</a></li><li><a href="https://huggingface.co/tiiuae/falcon-40b" target="_blank" rel="noopener noreferrer">tiiuae/falcon-40b</a></li><li><a href="https://huggingface.co/timdettmers/guanaco-33b-merged" target="_blank" rel="noopener noreferrer">timdettmers/guanaco-33b-merged</a></li><li><a href="https://huggingface.co/togethercomputer/RedPajama-INCITE-7B-Chat" target="_blank" rel="noopener noreferrer">togethercomputer/RedPajama-INCITE-7B-Chat</a></li><li><a href="https://huggingface.co/WizardLM/WizardLM-13B-V1.0" target="_blank" rel="noopener noreferrer">WizardLM/WizardLM-13B-V1.0</a></li><li><a href="https://huggingface.co/WizardLM/WizardCoder-15B-V1.0" target="_blank" rel="noopener noreferrer">WizardLM/WizardCoder-15B-V1.0</a></li><li><a href="https://huggingface.co/baichuan-inc/baichuan-7B" target="_blank" rel="noopener noreferrer">baichuan-inc/baichuan-7B</a></li><li><a href="https://huggingface.co/internlm/internlm-chat-7b" target="_blank" rel="noopener noreferrer">internlm/internlm-chat-7b</a></li><li><a href="https://huggingface.co/Qwen/Qwen-7B-Chat" target="_blank" rel="noopener noreferrer">Qwen/Qwen-7B-Chat</a></li><li><a href="https://huggingface.co/HuggingFaceH4/starchat-beta" target="_blank" rel="noopener noreferrer">HuggingFaceH4/starchat-beta</a></li><li>ä»»ä½• <a href="https://huggingface.co/EleutherAI" target="_blank" rel="noopener noreferrer">EleutherAI</a> çš„ pythia æ¨¡å‹ï¼Œå¦‚ <a href="https://huggingface.co/EleutherAI/pythia-6.9b" target="_blank" rel="noopener noreferrer">pythia-6.9b</a></li><li>åœ¨ä»¥ä¸Šæ¨¡å‹åŸºç¡€ä¸Šè®­ç»ƒçš„ä»»ä½• <a href="https://github.com/huggingface/peft" target="_blank" rel="noopener noreferrer">Peft</a> é€‚é…å™¨ã€‚ä¸ºäº†æ¿€æ´»ï¼Œæ¨¡å‹è·¯å¾„ä¸­å¿…é¡»æœ‰ <code>peft</code> ã€‚æ³¨æ„ï¼šå¦‚æœåŠ è½½å¤šä¸ªpeftæ¨¡å‹ï¼Œä½ å¯ä»¥é€šè¿‡åœ¨ä»»ä½•æ¨¡å‹å·¥ä½œå™¨ä¸­è®¾ç½®ç¯å¢ƒå˜é‡ <code>PEFT_SHARE_BASE_WEIGHTS=true</code> æ¥ä½¿å®ƒä»¬å…±äº«åŸºç¡€æ¨¡å‹çš„æƒé‡ã€‚</li></ul><p>ä»¥ä¸Šæ¨¡å‹æ”¯æŒåˆ—è¡¨å¯èƒ½éš <a href="https://github.com/lm-sys/FastChat" target="_blank" rel="noopener noreferrer">FastChat</a> æ›´æ–°è€ŒæŒç»­æ›´æ–°ï¼Œå¯å‚è€ƒ <a href="https://github.com/lm-sys/FastChat/blob/main/docs/model_support.md" target="_blank" rel="noopener noreferrer">FastChat å·²æ”¯æŒæ¨¡å‹åˆ—è¡¨</a>ã€‚</p><p>é™¤æœ¬åœ°æ¨¡å‹å¤–ï¼Œæœ¬é¡¹ç›®ä¹Ÿæ”¯æŒç›´æ¥æ¥å…¥ OpenAI APIï¼Œå…·ä½“è®¾ç½®å¯å‚è€ƒ <code>configs/model_configs.py.example</code> ä¸­çš„ <code>llm_model_dict</code> çš„ <code>openai-chatgpt-3.5</code> é…ç½®ä¿¡æ¯ã€‚</p><h4 id="embedding-æ¨¡å‹æ”¯æŒ" tabindex="-1"><a class="header-anchor" href="#embedding-æ¨¡å‹æ”¯æŒ"><span>Embedding æ¨¡å‹æ”¯æŒ</span></a></h4><p>æœ¬é¡¹ç›®æ”¯æŒè°ƒç”¨ <a href="https://huggingface.co/models?pipeline_tag=sentence-similarity" target="_blank" rel="noopener noreferrer">HuggingFace</a> ä¸­çš„ Embedding æ¨¡å‹ï¼Œå·²æ”¯æŒçš„ Embedding æ¨¡å‹å¦‚ä¸‹ï¼š</p><ul><li><a href="https://huggingface.co/moka-ai/m3e-small" target="_blank" rel="noopener noreferrer">moka-ai/m3e-small</a></li><li><a href="https://huggingface.co/moka-ai/m3e-base" target="_blank" rel="noopener noreferrer">moka-ai/m3e-base</a></li><li><a href="https://huggingface.co/moka-ai/m3e-large" target="_blank" rel="noopener noreferrer">moka-ai/m3e-large</a></li><li><a href="https://huggingface.co/BAAI/bge-small-zh" target="_blank" rel="noopener noreferrer">BAAI/bge-small-zh</a></li><li><a href="https://huggingface.co/BAAI/bge-base-zh" target="_blank" rel="noopener noreferrer">BAAI/bge-base-zh</a></li><li><a href="https://huggingface.co/BAAI/bge-large-zh" target="_blank" rel="noopener noreferrer">BAAI/bge-large-zh</a></li><li><a href="https://huggingface.co/BAAI/bge-large-zh-noinstruct" target="_blank" rel="noopener noreferrer">BAAI/bge-large-zh-noinstruct</a></li><li><a href="https://huggingface.co/shibing624/text2vec-base-chinese-sentence" target="_blank" rel="noopener noreferrer">shibing624/text2vec-base-chinese-sentence</a></li><li><a href="https://huggingface.co/shibing624/text2vec-base-chinese-paraphrase" target="_blank" rel="noopener noreferrer">shibing624/text2vec-base-chinese-paraphrase</a></li><li><a href="https://huggingface.co/shibing624/text2vec-base-multilingual" target="_blank" rel="noopener noreferrer">shibing624/text2vec-base-multilingual</a></li><li><a href="https://huggingface.co/shibing624/text2vec-base-chinese" target="_blank" rel="noopener noreferrer">shibing624/text2vec-base-chinese</a></li><li><a href="https://huggingface.co/shibing624/text2vec-bge-large-chinese" target="_blank" rel="noopener noreferrer">shibing624/text2vec-bge-large-chinese</a></li><li><a href="https://huggingface.co/GanymedeNil/text2vec-large-chinese" target="_blank" rel="noopener noreferrer">GanymedeNil/text2vec-large-chinese</a></li><li><a href="https://huggingface.co/nghuyong/ernie-3.0-nano-zh" target="_blank" rel="noopener noreferrer">nghuyong/ernie-3.0-nano-zh</a></li><li><a href="https://huggingface.co/nghuyong/ernie-3.0-base-zh" target="_blank" rel="noopener noreferrer">nghuyong/ernie-3.0-base-zh</a></li><li><a href="https://platform.openai.com/docs/guides/embeddings" target="_blank" rel="noopener noreferrer">OpenAI/text-embedding-ada-002</a></li></ul><h2 id="docker-éƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#docker-éƒ¨ç½²"><span>Docker éƒ¨ç½²</span></a></h2><p>ğŸ³ Docker é•œåƒåœ°å€: <code>registry.cn-beijing.aliyuncs.com/chatchat/chatchat:0.2.0)</code></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --gpus</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> all</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 80:8501</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> registry.cn-beijing.aliyuncs.com/chatchat/chatchat:0.2.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>è¯¥ç‰ˆæœ¬é•œåƒå¤§å° <code>33.9GB</code>ï¼Œä½¿ç”¨ <code>v0.2.0</code>ï¼Œä»¥ <code>nvidia/cuda:12.1.1-cudnn8-devel-ubuntu22.04</code> ä¸ºåŸºç¡€é•œåƒ</li><li>è¯¥ç‰ˆæœ¬å†…ç½®ä¸€ä¸ª <code>embedding</code> æ¨¡å‹ï¼š<code>m3e-large</code>ï¼Œå†…ç½® <code>chatglm2-6b-32k</code></li><li>è¯¥ç‰ˆæœ¬ç›®æ ‡ä¸ºæ–¹ä¾¿ä¸€é”®éƒ¨ç½²ä½¿ç”¨ï¼Œè¯·ç¡®ä¿æ‚¨å·²ç»åœ¨Linuxå‘è¡Œç‰ˆä¸Šå®‰è£…äº†NVIDIAé©±åŠ¨ç¨‹åº</li><li>è¯·æ³¨æ„ï¼Œæ‚¨ä¸éœ€è¦åœ¨ä¸»æœºç³»ç»Ÿä¸Šå®‰è£…CUDAå·¥å…·åŒ…ï¼Œä½†éœ€è¦å®‰è£… <code>NVIDIA Driver</code> ä»¥åŠ <code>NVIDIA Container Toolkit</code>ï¼Œè¯·å‚è€ƒ<a href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html" target="_blank" rel="noopener noreferrer">å®‰è£…æŒ‡å—</a></li><li>é¦–æ¬¡æ‹‰å–å’Œå¯åŠ¨å‡éœ€è¦ä¸€å®šæ—¶é—´ï¼Œé¦–æ¬¡å¯åŠ¨æ—¶è¯·å‚ç…§ä¸‹å›¾ä½¿ç”¨ <code>docker logs -f &lt;container id&gt;</code> æŸ¥çœ‹æ—¥å¿—</li><li>å¦‚é‡åˆ°å¯åŠ¨è¿‡ç¨‹å¡åœ¨ <code>Waiting..</code> æ­¥éª¤ï¼Œå»ºè®®ä½¿ç”¨ <code>docker exec -it &lt;container id&gt; bash</code> è¿›å…¥ <code>/logs/</code> ç›®å½•æŸ¥çœ‹å¯¹åº”é˜¶æ®µæ—¥å¿—</li></ul><h2 id="å¼€å‘éƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#å¼€å‘éƒ¨ç½²"><span>å¼€å‘éƒ¨ç½²</span></a></h2><h3 id="ç¯å¢ƒå‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#ç¯å¢ƒå‡†å¤‡"><span>ç¯å¢ƒå‡†å¤‡</span></a></h3><p>å¼€å‘ç¯å¢ƒå‡†å¤‡</p><p>æœ¬é¡¹ç›®å·²åœ¨ Python 3.8.1 - 3.10ï¼ŒCUDA 11.7 ç¯å¢ƒä¸‹å®Œæˆæµ‹è¯•ã€‚å·²åœ¨ Windowsã€ARM æ¶æ„çš„ macOSã€Linux ç³»ç»Ÿä¸­å®Œæˆæµ‹è¯•ã€‚</p><p>å‚è§ <a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/docs/INSTALL.md" target="_blank" rel="noopener noreferrer">å¼€å‘ç¯å¢ƒå‡†å¤‡</a>ã€‚</p><p><strong>è¯·æ³¨æ„ï¼š</strong> <code>0.2.0</code> åŠæ›´æ–°ç‰ˆæœ¬çš„ä¾èµ–åŒ…ä¸ <code>0.1.x</code> ç‰ˆæœ¬ä¾èµ–åŒ…å¯èƒ½å‘ç”Ÿå†²çªï¼Œå¼ºçƒˆå»ºè®®æ–°å»ºç¯å¢ƒåé‡æ–°å®‰è£…ä¾èµ–åŒ…ã€‚</p><h4 id="ç¯å¢ƒæ£€æŸ¥" tabindex="-1"><a class="header-anchor" href="#ç¯å¢ƒæ£€æŸ¥"><span>ç¯å¢ƒæ£€æŸ¥</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># é¦–å…ˆï¼Œç¡®ä¿¡ä½ çš„æœºå™¨å®‰è£…äº† Python 3.8 - 3.10 ç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> python</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --version</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Python</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3.8.13</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># å¦‚æœä½äºè¿™ä¸ªç‰ˆæœ¬ï¼Œå¯ä½¿ç”¨condaå®‰è£…ç¯å¢ƒ</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> conda</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> create</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /your_path/env_name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> python=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3.8</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æ¿€æ´»ç¯å¢ƒ</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> activate</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /your_path/env_name</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æˆ–ï¼Œcondaå®‰è£…ï¼Œä¸æŒ‡å®šè·¯å¾„, æ³¨æ„ä»¥ä¸‹ï¼Œéƒ½å°†/your_path/env_nameæ›¿æ¢ä¸ºenv_name</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> conda</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> create</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> env_name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> python=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3.8</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> conda</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> activate</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> env_name</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # Activate the environment</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æ›´æ–°pyåº“</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pip3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --upgrade</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pip</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># å…³é—­ç¯å¢ƒ</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> deactivate</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /your_path/env_name</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># åˆ é™¤ç¯å¢ƒ</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> conda</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> env</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> remove</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  /your_path/env_name</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é¡¹ç›®ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#é¡¹ç›®ä¾èµ–"><span>é¡¹ç›®ä¾èµ–</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æ‹‰å–ä»“åº“</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> clone</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://github.com/chatchat-space/Langchain-Chatchat.git</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># è¿›å…¥ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Langchain-Chatchat</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># å®‰è£…ä¾èµ– (ä¸‰é€‰ä¸€ï¼Œä¸ºæ–¹ä¾¿ç”¨æˆ· API ä¸ webui åˆ†ç¦»è¿è¡Œï¼Œå¯å•ç‹¬æ ¹æ®è¿è¡Œéœ€æ±‚å®‰è£…ä¾èµ–åŒ…)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -r</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> requirements.txt</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # å®‰è£…å…¨éƒ¨ä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># $ pip install -r requirements_api.txt # å¦‚æœåªéœ€è¿è¡Œ API</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># $ pip install -r requirements_webui.txt # å¦‚æœåªéœ€è¿è¡Œ WebUI</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># é»˜è®¤ä¾èµ–åŒ…æ‹¬åŸºæœ¬è¿è¡Œç¯å¢ƒï¼ˆFAISSå‘é‡åº“ï¼‰ã€‚å¦‚æœè¦ä½¿ç”¨ milvus/pg_vector ç­‰å‘é‡åº“ï¼Œè¯·å°† requirements.txt ä¸­ç›¸åº”ä¾èµ–å–æ¶ˆæ³¨é‡Šå†å®‰è£…ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨ï¼šä½¿ç”¨ <code>langchain.document_loaders.UnstructuredFileLoader</code> è¿›è¡Œ <code>.docx</code> ç­‰æ ¼å¼éç»“æ„åŒ–æ–‡ä»¶æ¥å…¥æ—¶ï¼Œå¯èƒ½éœ€è¦ä¾æ®æ–‡æ¡£è¿›è¡Œå…¶ä»–ä¾èµ–åŒ…çš„å®‰è£…ï¼Œè¯·å‚è€ƒ <a href="https://python.langchain.com/en/latest/modules/indexes/document_loaders/examples/unstructured_file.html" target="_blank" rel="noopener noreferrer">langchain æ–‡æ¡£</a>ã€‚</p><h3 id="æ¨¡å‹ä¸‹è½½-llm-embedding" tabindex="-1"><a class="header-anchor" href="#æ¨¡å‹ä¸‹è½½-llm-embedding"><span>æ¨¡å‹ä¸‹è½½ (LLM &amp; Embedding)</span></a></h3><p>ä¸‹è½½æ¨¡å‹è‡³æœ¬åœ°</p><p>å¦‚éœ€åœ¨æœ¬åœ°æˆ–ç¦»çº¿ç¯å¢ƒä¸‹è¿è¡Œæœ¬é¡¹ç›®ï¼Œéœ€è¦é¦–å…ˆå°†é¡¹ç›®æ‰€éœ€çš„æ¨¡å‹ä¸‹è½½è‡³æœ¬åœ°ï¼Œé€šå¸¸å¼€æº LLM ä¸ Embedding æ¨¡å‹å¯ä»¥ä» <a href="https://huggingface.co/models" target="_blank" rel="noopener noreferrer">HuggingFace</a> ä¸‹è½½ã€‚</p><p>ä»¥æœ¬é¡¹ç›®ä¸­é»˜è®¤ä½¿ç”¨çš„ LLM æ¨¡å‹ <a href="https://huggingface.co/THUDM/chatglm2-6b" target="_blank" rel="noopener noreferrer">THUDM/chatglm2-6b</a> ä¸ Embedding æ¨¡å‹ <a href="https://huggingface.co/moka-ai/m3e-base" target="_blank" rel="noopener noreferrer">moka-ai/m3e-base</a> ä¸ºä¾‹ï¼š</p><p>ä¸‹è½½æ¨¡å‹éœ€è¦å…ˆ<a href="https://docs.github.com/zh/repositories/working-with-files/managing-large-files/installing-git-large-file-storage" target="_blank" rel="noopener noreferrer">å®‰è£…Git LFS</a>ï¼Œç„¶åè¿è¡Œ</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> clone</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://huggingface.co/THUDM/chatglm2-6b</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> clone</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://huggingface.co/moka-ai/m3e-base</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é…ç½®é€‰é¡¹" tabindex="-1"><a class="header-anchor" href="#é…ç½®é€‰é¡¹"><span>é…ç½®é€‰é¡¹</span></a></h3><p>è®¾ç½®é…ç½®é¡¹</p><p>å¤åˆ¶æ¨¡å‹ç›¸å…³å‚æ•°é…ç½®æ¨¡æ¿æ–‡ä»¶ <a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/configs/model_config.py.example" target="_blank" rel="noopener noreferrer">configs/model_config.py.example</a> å­˜å‚¨è‡³é¡¹ç›®è·¯å¾„ä¸‹ <code>./configs</code> è·¯å¾„ä¸‹ï¼Œå¹¶é‡å‘½åä¸º <code>model_config.py</code>ã€‚</p><p>å¤åˆ¶æœåŠ¡ç›¸å…³å‚æ•°é…ç½®æ¨¡æ¿æ–‡ä»¶ <a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/configs/server_config.py.example" target="_blank" rel="noopener noreferrer">configs/server_config.py.example</a> å­˜å‚¨è‡³é¡¹ç›®è·¯å¾„ä¸‹ <code>./configs</code> è·¯å¾„ä¸‹ï¼Œå¹¶é‡å‘½åä¸º <code>server_config.py</code>ã€‚</p><p>åœ¨å¼€å§‹æ‰§è¡Œ Web UI æˆ–å‘½ä»¤è¡Œäº¤äº’å‰ï¼Œè¯·å…ˆæ£€æŸ¥ <code>configs/model_config.py</code> å’Œ <code>configs/server_config.py</code> ä¸­çš„å„é¡¹æ¨¡å‹å‚æ•°è®¾è®¡æ˜¯å¦ç¬¦åˆéœ€æ±‚ï¼š</p><ul><li><p>è¯·ç¡®è®¤å·²ä¸‹è½½è‡³æœ¬åœ°çš„ LLM æ¨¡å‹æœ¬åœ°å­˜å‚¨è·¯å¾„å†™åœ¨ <code>llm_model_dict</code> å¯¹åº”æ¨¡å‹çš„ <code>local_model_path</code> å±æ€§ä¸­ï¼Œå¦‚:</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">llm_model_dict</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;chatglm2-6b&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;local_model_path&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/Users/xxx/Downloads/chatglm2-6b&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;api_base_url&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http://localhost:8888/v1&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># &quot;name&quot;ä¿®æ”¹ä¸º FastChat æœåŠ¡ä¸­çš„&quot;api_base_url&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;api_key&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;EMPTY&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    },</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>è¯·ç¡®è®¤å·²ä¸‹è½½è‡³æœ¬åœ°çš„ Embedding æ¨¡å‹æœ¬åœ°å­˜å‚¨è·¯å¾„å†™åœ¨ <code>embedding_model_dict</code> å¯¹åº”æ¨¡å‹ä½ç½®ï¼Œå¦‚ï¼š</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">embedding_model_dict </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;m3e-base&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/Users/xxx/Downloads/m3e-base&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>å¦‚æœä½ é€‰æ‹©ä½¿ç”¨OpenAIçš„Embeddingæ¨¡å‹ï¼Œè¯·å°†æ¨¡å‹çš„ <code>key</code>å†™å…¥ <code>embedding_model_dict</code>ä¸­ã€‚ä½¿ç”¨è¯¥æ¨¡å‹ï¼Œä½ éœ€è¦èƒ½å¤Ÿè®¿é—®OpenAIå®˜çš„APIï¼Œæˆ–è®¾ç½®ä»£ç†ã€‚</p><h3 id="çŸ¥è¯†åº“åˆå§‹åŒ–ä¸è¿ç§»" tabindex="-1"><a class="header-anchor" href="#çŸ¥è¯†åº“åˆå§‹åŒ–ä¸è¿ç§»"><span>çŸ¥è¯†åº“åˆå§‹åŒ–ä¸è¿ç§»</span></a></h3><p>å½“å‰é¡¹ç›®çš„çŸ¥è¯†åº“ä¿¡æ¯å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œåœ¨æ­£å¼è¿è¡Œé¡¹ç›®ä¹‹å‰è¯·å…ˆåˆå§‹åŒ–æ•°æ®åº“ï¼ˆæˆ‘ä»¬å¼ºçƒˆå»ºè®®æ‚¨åœ¨æ‰§è¡Œæ“ä½œå‰å¤‡ä»½æ‚¨çš„çŸ¥è¯†æ–‡ä»¶ï¼‰ã€‚</p><ul><li><p>å¦‚æœæ‚¨æ˜¯ä» <code>0.1.x</code> ç‰ˆæœ¬å‡çº§è¿‡æ¥çš„ç”¨æˆ·ï¼Œé’ˆå¯¹å·²å»ºç«‹çš„çŸ¥è¯†åº“ï¼Œè¯·ç¡®è®¤çŸ¥è¯†åº“çš„å‘é‡åº“ç±»å‹ã€Embedding æ¨¡å‹ä¸ <code>configs/model_config.py</code> ä¸­é»˜è®¤è®¾ç½®ä¸€è‡´ï¼Œå¦‚æ— å˜åŒ–åªéœ€ä»¥ä¸‹å‘½ä»¤å°†ç°æœ‰çŸ¥è¯†åº“ä¿¡æ¯æ·»åŠ åˆ°æ•°æ®åº“å³å¯ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> python</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> init_database.py</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>å¦‚æœæ‚¨æ˜¯ç¬¬ä¸€æ¬¡è¿è¡Œæœ¬é¡¹ç›®ï¼ŒçŸ¥è¯†åº“å°šæœªå»ºç«‹ï¼Œæˆ–è€…é…ç½®æ–‡ä»¶ä¸­çš„çŸ¥è¯†åº“ç±»å‹ã€åµŒå…¥æ¨¡å‹å‘ç”Ÿå˜åŒ–ï¼Œæˆ–è€…ä¹‹å‰çš„å‘é‡åº“æ²¡æœ‰å¼€å¯ <code>normalize_L2</code>ï¼Œéœ€è¦ä»¥ä¸‹å‘½ä»¤åˆå§‹åŒ–æˆ–é‡å»ºçŸ¥è¯†åº“ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> python</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> init_database.py</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --recreate-vs</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><h3 id="ä¸€é”®å¯åŠ¨api-æœåŠ¡æˆ–-web-ui" tabindex="-1"><a class="header-anchor" href="#ä¸€é”®å¯åŠ¨api-æœåŠ¡æˆ–-web-ui"><span>ä¸€é”®å¯åŠ¨API æœåŠ¡æˆ– Web UI</span></a></h3><h4 id="å¯åŠ¨å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#å¯åŠ¨å‘½ä»¤"><span>å¯åŠ¨å‘½ä»¤</span></a></h4><p>ä¸€é”®å¯åŠ¨è„šæœ¬ startup.py,ä¸€é”®å¯åŠ¨æ‰€æœ‰ Fastchat æœåŠ¡ã€API æœåŠ¡ã€WebUI æœåŠ¡ï¼Œç¤ºä¾‹ä»£ç ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>$ python startup.py -a</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å¹¶å¯ä½¿ç”¨ <code>Ctrl + C</code> ç›´æ¥å…³é—­æ‰€æœ‰è¿è¡ŒæœåŠ¡ã€‚å¦‚æœä¸€æ¬¡ç»“æŸä¸äº†ï¼Œå¯ä»¥å¤šæŒ‰å‡ æ¬¡ã€‚</p><p>å¯é€‰å‚æ•°åŒ…æ‹¬ <code>-a (æˆ–--all-webui)</code>, <code>--all-api</code>, <code>--llm-api</code>, <code>-c (æˆ–--controller)</code>, <code>--openai-api</code>, <code>-m (æˆ–--model-worker)</code>, <code>--api</code>, <code>--webui</code>ï¼Œå…¶ä¸­ï¼š</p><ul><li><code>--all-webui</code> ä¸ºä¸€é”®å¯åŠ¨ WebUI æ‰€æœ‰ä¾èµ–æœåŠ¡ï¼›</li><li><code>--all-api</code> ä¸ºä¸€é”®å¯åŠ¨ API æ‰€æœ‰ä¾èµ–æœåŠ¡ï¼›</li><li><code>--llm-api</code> ä¸ºä¸€é”®å¯åŠ¨ Fastchat æ‰€æœ‰ä¾èµ–çš„ LLM æœåŠ¡ï¼›</li><li><code>--openai-api</code> ä¸ºä»…å¯åŠ¨ FastChat çš„ controller å’Œ openai-api-server æœåŠ¡ï¼›</li><li>å…¶ä»–ä¸ºå•ç‹¬æœåŠ¡å¯åŠ¨é€‰é¡¹ã€‚</li></ul><h4 id="å¯åŠ¨éé»˜è®¤æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#å¯åŠ¨éé»˜è®¤æ¨¡å‹"><span>å¯åŠ¨éé»˜è®¤æ¨¡å‹</span></a></h4><p>è‹¥æƒ³æŒ‡å®šéé»˜è®¤æ¨¡å‹ï¼Œéœ€è¦ç”¨ <code>--model-name</code> é€‰é¡¹ï¼Œç¤ºä¾‹ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>$ python startup.py --all-webui --model-name Qwen-7B-Chat</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æ›´å¤šä¿¡æ¯å¯é€šè¿‡ <code>python startup.py -h</code>æŸ¥çœ‹ã€‚</p><h4 id="å¤šå¡åŠ è½½" tabindex="-1"><a class="header-anchor" href="#å¤šå¡åŠ è½½"><span>å¤šå¡åŠ è½½</span></a></h4><p>é¡¹ç›®æ”¯æŒå¤šå¡åŠ è½½ï¼Œéœ€åœ¨ startup.py ä¸­çš„ create_model_worker_app å‡½æ•°ä¸­ï¼Œä¿®æ”¹å¦‚ä¸‹ä¸‰ä¸ªå‚æ•°:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>gpus=None, </span></span>
<span class="line"><span>num_gpus=1, </span></span>
<span class="line"><span>max_gpu_memory=&quot;20GiB&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶ä¸­ï¼Œ<code>gpus</code> æ§åˆ¶ä½¿ç”¨çš„æ˜¾å¡çš„IDï¼Œä¾‹å¦‚ &quot;0,1&quot;;</p><p><code>num_gpus</code> æ§åˆ¶ä½¿ç”¨çš„å¡æ•°;</p><p><code>max_gpu_memory</code> æ§åˆ¶æ¯ä¸ªå¡ä½¿ç”¨çš„æ˜¾å­˜å®¹é‡ã€‚</p><p>æ³¨1ï¼šserver_config.pyçš„FSCHAT_MODEL_WORKERSå­—å…¸ä¸­ä¹Ÿå¢åŠ äº†ç›¸å…³é…ç½®ï¼Œå¦‚æœ‰éœ€è¦ä¹Ÿå¯é€šè¿‡ä¿®æ”¹FSCHAT_MODEL_WORKERSå­—å…¸ä¸­å¯¹åº”å‚æ•°å®ç°å¤šå¡åŠ è½½ã€‚</p><p>æ³¨2ï¼šå°‘æ•°æƒ…å†µä¸‹ï¼Œgpuså‚æ•°ä¼šä¸ç”Ÿæ•ˆï¼Œæ­¤æ—¶éœ€è¦é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡CUDA_VISIBLE_DEVICESæ¥æŒ‡å®štorchå¯è§çš„gpu,ç¤ºä¾‹ä»£ç ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>CUDA_VISIBLE_DEVICES=0,1 python startup.py</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="peft-åŠ è½½-åŒ…æ‹¬lora-p-tuning-prefix-tuning-prompt-tuning-ia3ç­‰" tabindex="-1"><a class="header-anchor" href="#peft-åŠ è½½-åŒ…æ‹¬lora-p-tuning-prefix-tuning-prompt-tuning-ia3ç­‰"><span>PEFT åŠ è½½(åŒ…æ‹¬lora,p-tuning,prefix tuning, prompt tuning,ia3ç­‰)</span></a></h4><p>æœ¬é¡¹ç›®åŸºäº FastChat åŠ è½½ LLM æœåŠ¡ï¼Œæ•…éœ€ä»¥ FastChat åŠ è½½ PEFT è·¯å¾„ï¼Œå³ä¿è¯è·¯å¾„åç§°é‡Œå¿…é¡»æœ‰ peft è¿™ä¸ªè¯ï¼Œé…ç½®æ–‡ä»¶çš„åå­—ä¸º adapter_config.jsonï¼Œpeft è·¯å¾„ä¸‹åŒ…å«.bin æ ¼å¼çš„ PEFT æƒé‡ï¼Œpeftè·¯å¾„åœ¨startup.pyä¸­create_model_worker_appå‡½æ•°çš„args.model_namesä¸­æŒ‡å®šï¼Œå¹¶å¼€å¯ç¯å¢ƒå˜é‡PEFT_SHARE_BASE_WEIGHTS=trueå‚æ•°ã€‚</p><p>æ³¨ï¼šå¦‚æœä¸Šè¿°æ–¹å¼å¯åŠ¨å¤±è´¥ï¼Œåˆ™éœ€è¦ä»¥æ ‡å‡†çš„fastchatæœåŠ¡å¯åŠ¨æ–¹å¼åˆ†æ­¥å¯åŠ¨ï¼Œåˆ†æ­¥å¯åŠ¨æ­¥éª¤å‚è€ƒç¬¬å…­èŠ‚ï¼ŒPEFTåŠ è½½è¯¦ç»†æ­¥éª¤å‚è€ƒ<a href="https://github.com/chatchat-space/Langchain-Chatchat/issues/1130#issuecomment-1685291822" target="_blank" rel="noopener noreferrer">åŠ è½½loraå¾®è°ƒåæ¨¡å‹å¤±æ•ˆ</a>ï¼Œ</p><h4 id="æ³¨æ„äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„äº‹é¡¹"><span><strong>æ³¨æ„äº‹é¡¹</strong></span></a></h4><p><strong>1. startup è„šæœ¬ç”¨å¤šè¿›ç¨‹æ–¹å¼å¯åŠ¨å„æ¨¡å—çš„æœåŠ¡ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ‰“å°é¡ºåºé—®é¢˜ï¼Œè¯·ç­‰å¾…å…¨éƒ¨æœåŠ¡å‘èµ·åå†è°ƒç”¨ï¼Œå¹¶æ ¹æ®é»˜è®¤æˆ–æŒ‡å®šç«¯å£è°ƒç”¨æœåŠ¡ï¼ˆé»˜è®¤ LLM API æœåŠ¡ç«¯å£ï¼š<code>127.0.0.1:8888</code>,é»˜è®¤ API æœåŠ¡ç«¯å£ï¼š<code>127.0.0.1:7861</code>,é»˜è®¤ WebUI æœåŠ¡ç«¯å£ï¼š<code>æœ¬æœºIPï¼š8501</code>)</strong></p><p><strong>2.æœåŠ¡å¯åŠ¨æ—¶é—´ç¤ºè®¾å¤‡ä¸åŒè€Œä¸åŒï¼Œçº¦ 3-10 åˆ†é’Ÿï¼Œå¦‚é•¿æ—¶é—´æ²¡æœ‰å¯åŠ¨è¯·å‰å¾€ <code>./logs</code>ç›®å½•ä¸‹ç›‘æ§æ—¥å¿—ï¼Œå®šä½é—®é¢˜ã€‚</strong></p><p><strong>3. åœ¨Linuxä¸Šä½¿ç”¨ctrl+Cé€€å‡ºå¯èƒ½ä¼šç”±äºlinuxçš„å¤šè¿›ç¨‹æœºåˆ¶å¯¼è‡´multiprocessingé—ç•™å­¤å„¿è¿›ç¨‹ï¼Œå¯é€šè¿‡shutdown_all.shè¿›è¡Œé€€å‡º</strong></p><h4 id="å¯åŠ¨ç•Œé¢ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#å¯åŠ¨ç•Œé¢ç¤ºä¾‹"><span>å¯åŠ¨ç•Œé¢ç¤ºä¾‹</span></a></h4><ol><li>FastAPI docs ç•Œé¢</li></ol><p><img src="`+r+'" alt="image-20230906095433786" loading="lazy"></p><ol start="2"><li>webuiå¯åŠ¨ç•Œé¢ç¤ºä¾‹ï¼š</li></ol><ul><li>Web UI å¯¹è¯ç•Œé¢ï¼š <a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/img/webui_0813_0.png" target="_blank" rel="noopener noreferrer"><img src="https://github.com/chatchat-space/Langchain-Chatchat/raw/master/img/webui_0813_0.png" alt="img" loading="lazy"></a></li><li>Web UI çŸ¥è¯†åº“ç®¡ç†é¡µé¢ï¼š <a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/img/webui_0813_1.png" target="_blank" rel="noopener noreferrer"><img src="'+h+`" alt="img" loading="lazy"></a></li></ul><h3 id="åˆ†æ­¥å¯åŠ¨-api-æœåŠ¡æˆ–-web-ui-ä¸€é”®å¯åŠ¨å¿½ç•¥æœ¬èŠ‚" tabindex="-1"><a class="header-anchor" href="#åˆ†æ­¥å¯åŠ¨-api-æœåŠ¡æˆ–-web-ui-ä¸€é”®å¯åŠ¨å¿½ç•¥æœ¬èŠ‚"><span>åˆ†æ­¥å¯åŠ¨ API æœåŠ¡æˆ– Web UIï¼ˆä¸€é”®å¯åŠ¨å¿½ç•¥æœ¬èŠ‚ï¼‰</span></a></h3><p>æ³¨æ„ï¼šå¦‚ä½¿ç”¨äº†ä¸€é”®å¯åŠ¨æ–¹å¼ï¼Œå¯å¿½ç•¥æœ¬èŠ‚ã€‚</p><h4 id="å¯åŠ¨-llm-æœåŠ¡-ä¸‰ç§æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#å¯åŠ¨-llm-æœåŠ¡-ä¸‰ç§æ–¹å¼"><span>å¯åŠ¨ LLM æœåŠ¡ (ä¸‰ç§æ–¹å¼)</span></a></h4><p>å¦‚éœ€ä½¿ç”¨å¼€æºæ¨¡å‹è¿›è¡Œæœ¬åœ°éƒ¨ç½²ï¼Œéœ€é¦–å…ˆå¯åŠ¨ LLM æœåŠ¡ï¼Œå¯åŠ¨æ–¹å¼åˆ†ä¸ºä¸‰ç§ï¼š</p><ul><li><a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/README.md#5.1.1-%E5%9F%BA%E4%BA%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B%E8%84%9A%E6%9C%AC-llm_api.py-%E5%90%AF%E5%8A%A8-LLM-%E6%9C%8D%E5%8A%A1" target="_blank" rel="noopener noreferrer">åŸºäºå¤šè¿›ç¨‹è„šæœ¬ llm_api.py å¯åŠ¨ LLM æœåŠ¡</a></li><li><a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/README.md#5.1.2-%E5%9F%BA%E4%BA%8E%E5%91%BD%E4%BB%A4%E8%A1%8C%E8%84%9A%E6%9C%AC-llm_api_stale.py-%E5%90%AF%E5%8A%A8-LLM-%E6%9C%8D%E5%8A%A1" target="_blank" rel="noopener noreferrer">åŸºäºå‘½ä»¤è¡Œè„šæœ¬ llm_api_stale.py å¯åŠ¨ LLM æœåŠ¡</a></li><li><a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/README.md#5.1.3-PEFT-%E5%8A%A0%E8%BD%BD" target="_blank" rel="noopener noreferrer">PEFT åŠ è½½</a></li></ul><p>ä¸‰ç§æ–¹å¼åªéœ€é€‰æ‹©ä¸€ä¸ªå³å¯ï¼Œå…·ä½“æ“ä½œæ–¹å¼è¯¦è§ 5.1.1 - 5.1.3ã€‚</p><p>å¦‚æœå¯åŠ¨åœ¨çº¿çš„APIæœåŠ¡ï¼ˆå¦‚ OPENAI çš„ API æ¥å£ï¼‰ï¼Œåˆ™æ— éœ€å¯åŠ¨ LLM æœåŠ¡ï¼Œå³ 5.1 å°èŠ‚çš„ä»»ä½•å‘½ä»¤å‡æ— éœ€å¯åŠ¨ã€‚</p><h5 id="åŸºäºå¤šè¿›ç¨‹è„šæœ¬-llm-api-py-å¯åŠ¨-llm-æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#åŸºäºå¤šè¿›ç¨‹è„šæœ¬-llm-api-py-å¯åŠ¨-llm-æœåŠ¡"><span>åŸºäºå¤šè¿›ç¨‹è„šæœ¬ llm_api.py å¯åŠ¨ LLM æœåŠ¡</span></a></h5><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ <a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/server/llm_api.py" target="_blank" rel="noopener noreferrer">server/llm_api.py</a> è„šæœ¬å¯åŠ¨ <strong>LLM æ¨¡å‹</strong>æœåŠ¡ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>$ python server/llm_api.py</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>é¡¹ç›®æ”¯æŒå¤šå¡åŠ è½½ï¼Œéœ€åœ¨ llm_api.py ä¸­çš„ create_model_worker_app å‡½æ•°ä¸­ï¼Œä¿®æ”¹å¦‚ä¸‹ä¸‰ä¸ªå‚æ•°:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>gpus=None, </span></span>
<span class="line"><span>num_gpus=1, </span></span>
<span class="line"><span>max_gpu_memory=&quot;20GiB&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶ä¸­ï¼Œ<code>gpus</code> æ§åˆ¶ä½¿ç”¨çš„æ˜¾å¡çš„IDï¼Œå¦‚æœ &quot;0,1&quot;;</p><p><code>num_gpus</code> æ§åˆ¶ä½¿ç”¨çš„å¡æ•°;</p><p><code>max_gpu_memory</code> æ§åˆ¶æ¯ä¸ªå¡ä½¿ç”¨çš„æ˜¾å­˜å®¹é‡ã€‚</p><h5 id="åŸºäºå‘½ä»¤è¡Œè„šæœ¬-llm-api-stale-py-å¯åŠ¨-llm-æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#åŸºäºå‘½ä»¤è¡Œè„šæœ¬-llm-api-stale-py-å¯åŠ¨-llm-æœåŠ¡"><span>åŸºäºå‘½ä»¤è¡Œè„šæœ¬ llm_api_stale.py å¯åŠ¨ LLM æœåŠ¡</span></a></h5><p>âš ï¸ <strong>æ³¨æ„:</strong></p><p><strong>1.llm_api_stale.pyè„šæœ¬åŸç”Ÿä»…é€‚ç”¨äºlinuxã€‚macè®¾å¤‡éœ€è¦å®‰è£…å¯¹åº”çš„linuxå‘½ä»¤ï¼Œwinå¹³å°è¯·ä½¿ç”¨wsl;</strong></p><p><strong>2.åŠ è½½éé»˜è®¤æ¨¡å‹éœ€è¦ç”¨å‘½ä»¤è¡Œå‚æ•°--model-path-addressæŒ‡å®šæ¨¡å‹ï¼Œä¸ä¼šè¯»å–model_config.pyé…ç½®;</strong></p><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ <a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/server/llm_api_stale.py" target="_blank" rel="noopener noreferrer">server/llm_api_stale.py</a> è„šæœ¬å¯åŠ¨ <strong>LLM æ¨¡å‹</strong>æœåŠ¡ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> python</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> server/llm_api_stale.py</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¯¥æ–¹å¼æ”¯æŒå¯åŠ¨å¤šä¸ªworkerï¼Œç¤ºä¾‹å¯åŠ¨æ–¹å¼ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> python</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> server/llm_api_stale.py</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --model-path-address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> model1@host1@port1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> model2@host2@port2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å¦‚æœå‡ºç°serverç«¯å£å ç”¨æƒ…å†µï¼Œéœ€æ‰‹åŠ¨æŒ‡å®šserverç«¯å£,å¹¶åŒæ­¥ä¿®æ”¹model_config.pyä¸‹å¯¹åº”æ¨¡å‹çš„base_api_urlä¸ºæŒ‡å®šç«¯å£:</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> python</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> server/llm_api_stale.py</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --server-port</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 8887</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å¦‚æœè¦å¯åŠ¨å¤šå¡åŠ è½½ï¼Œç¤ºä¾‹å‘½ä»¤å¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> python</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> server/llm_api_stale.py</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --gpus</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 0,1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --num-gpus</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --max-gpu-memory</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 10GiB</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æ³¨ï¼šä»¥å¦‚ä¸Šæ–¹å¼å¯åŠ¨LLMæœåŠ¡ä¼šä»¥nohupå‘½ä»¤åœ¨åå°è¿è¡Œ FastChat æœåŠ¡ï¼Œå¦‚éœ€åœæ­¢æœåŠ¡ï¼Œå¯ä»¥è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> python</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> server/llm_api_shutdown.py</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --serve</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> all</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>äº¦å¯å•ç‹¬åœæ­¢ä¸€ä¸ª FastChat æœåŠ¡æ¨¡å—ï¼Œå¯é€‰ [<code>all</code>, <code>controller</code>, <code>model_worker</code>, <code>openai_api_server</code>]</p><h5 id="peft-åŠ è½½-åŒ…æ‹¬lora-p-tuning-prefix-tuning-prompt-tuning-ia3ç­‰-1" tabindex="-1"><a class="header-anchor" href="#peft-åŠ è½½-åŒ…æ‹¬lora-p-tuning-prefix-tuning-prompt-tuning-ia3ç­‰-1"><span>PEFT åŠ è½½(åŒ…æ‹¬lora,p-tuning,prefix tuning, prompt tuning,ia3ç­‰)</span></a></h5><p>æœ¬é¡¹ç›®åŸºäº FastChat åŠ è½½ LLM æœåŠ¡ï¼Œæ•…éœ€ä»¥ FastChat åŠ è½½ PEFT è·¯å¾„ï¼Œå³ä¿è¯è·¯å¾„åç§°é‡Œå¿…é¡»æœ‰ peft è¿™ä¸ªè¯ï¼Œé…ç½®æ–‡ä»¶çš„åå­—ä¸º adapter_config.jsonï¼Œpeft è·¯å¾„ä¸‹åŒ…å« model.bin æ ¼å¼çš„ PEFT æƒé‡ã€‚ è¯¦ç»†æ­¥éª¤å‚è€ƒ<a href="https://github.com/chatchat-space/Langchain-Chatchat/issues/1130#issuecomment-1685291822" target="_blank" rel="noopener noreferrer">åŠ è½½loraå¾®è°ƒåæ¨¡å‹å¤±æ•ˆ</a></p><p><img src="`+p+'" alt="image-20230906100313064" loading="lazy"></p><h4 id="å¯åŠ¨-api-æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#å¯åŠ¨-api-æœåŠ¡"><span>å¯åŠ¨ API æœåŠ¡</span></a></h4><p>æœ¬åœ°éƒ¨ç½²æƒ…å†µä¸‹ï¼ŒæŒ‰ç…§ <a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/README.md#5.1-%E5%90%AF%E5%8A%A8-LLM-%E6%9C%8D%E5%8A%A1" target="_blank" rel="noopener noreferrer">5.1 èŠ‚</a><strong>å¯åŠ¨ LLM æœåŠ¡å</strong>ï¼Œå†æ‰§è¡Œ <a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/server/api.py" target="_blank" rel="noopener noreferrer">server/api.py</a> è„šæœ¬å¯åŠ¨ <strong>API</strong> æœåŠ¡ï¼›</p><p>åœ¨çº¿è°ƒç”¨APIæœåŠ¡çš„æƒ…å†µä¸‹ï¼Œç›´æ¥æ‰§æ‰§è¡Œ <a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/server/api.py" target="_blank" rel="noopener noreferrer">server/api.py</a> è„šæœ¬å¯åŠ¨ <strong>API</strong> æœåŠ¡ï¼›</p><p>è°ƒç”¨å‘½ä»¤ç¤ºä¾‹ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> python</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> server/api.py</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å¯åŠ¨ API æœåŠ¡åï¼Œå¯è®¿é—® <code>localhost:7861</code> æˆ– <code>{API æ‰€åœ¨æœåŠ¡å™¨ IP}:7861</code> FastAPI è‡ªåŠ¨ç”Ÿæˆçš„ docs è¿›è¡Œæ¥å£æŸ¥çœ‹ä¸æµ‹è¯•ã€‚</p><ul><li>FastAPI docs ç•Œé¢ <img src="'+c+`" alt="image-20230906100403529" loading="lazy"></li></ul><h4 id="å¯åŠ¨-web-ui-æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#å¯åŠ¨-web-ui-æœåŠ¡"><span>å¯åŠ¨ Web UI æœåŠ¡</span></a></h4><p>æŒ‰ç…§ <a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/README.md#5.2-%E5%90%AF%E5%8A%A8-API-%E6%9C%8D%E5%8A%A1" target="_blank" rel="noopener noreferrer">5.2 èŠ‚</a><strong>å¯åŠ¨ API æœåŠ¡å</strong>ï¼Œæ‰§è¡Œ <a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/webui.py" target="_blank" rel="noopener noreferrer">webui.py</a> å¯åŠ¨ <strong>Web UI</strong> æœåŠ¡ï¼ˆé»˜è®¤ä½¿ç”¨ç«¯å£ <code>8501</code>ï¼‰</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> streamlit</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> webui.py</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ä½¿ç”¨ Langchain-Chatchat ä¸»é¢˜è‰²å¯åŠ¨ <strong>Web UI</strong> æœåŠ¡ï¼ˆé»˜è®¤ä½¿ç”¨ç«¯å£ <code>8501</code>ï¼‰</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> streamlit</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> webui.py</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --theme.base</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;light&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --theme.primaryColor</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;#165dff&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --theme.secondaryBackgroundColor</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;#f5f5f5&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --theme.textColor</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;#000000&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æˆ–ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŒ‡å®šå¯åŠ¨ <strong>Web UI</strong> æœåŠ¡å¹¶æŒ‡å®šç«¯å£å·</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> streamlit</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> webui.py</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --server.port</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 666</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><p>Web UI å¯¹è¯ç•Œé¢ï¼š</p><p><a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/img/webui_0813_0.png" target="_blank" rel="noopener noreferrer"><img src="https://github.com/chatchat-space/Langchain-Chatchat/raw/master/img/webui_0813_0.png" alt="img" loading="lazy"></a></p></li><li><p>Web UI çŸ¥è¯†åº“ç®¡ç†é¡µé¢ï¼š</p><p><a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/img/webui_0813_1.png" target="_blank" rel="noopener noreferrer"><img src="https://github.com/chatchat-space/Langchain-Chatchat/raw/master/img/webui_0813_1.png" alt="img" loading="lazy"></a></p></li></ul><h2 id="å¸¸è§é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#å¸¸è§é—®é¢˜"><span>å¸¸è§é—®é¢˜</span></a></h2><p>å‚è§ <a href="https://github.com/chatchat-space/Langchain-Chatchat/blob/master/docs/FAQ.md" target="_blank" rel="noopener noreferrer">å¸¸è§é—®é¢˜</a>ã€‚</p><h2 id="è·¯çº¿å›¾" tabindex="-1"><a class="header-anchor" href="#è·¯çº¿å›¾"><span>è·¯çº¿å›¾</span></a></h2><ul><li>Langchain åº”ç”¨</li><li>æœ¬åœ°æ•°æ®æ¥å…¥ - æ¥å…¥éç»“æ„åŒ–æ–‡æ¡£ <ul><li>.md</li><li>.txt</li><li>.docx</li></ul></li></ul><pre><code>-  ç»“æ„åŒ–æ•°æ®æ¥å…¥
  -  .csv
  -  .xlsx
-  åˆ†è¯åŠå¬å›
  -  æ¥å…¥ä¸åŒç±»å‹ TextSplitter
  -  ä¼˜åŒ–ä¾æ®ä¸­æ–‡æ ‡ç‚¹ç¬¦å·è®¾è®¡çš„ ChineseTextSplitter
  -  é‡æ–°å®ç°ä¸Šä¸‹æ–‡æ‹¼æ¥å¬å›
-  æœ¬åœ°ç½‘é¡µæ¥å…¥
-  SQL æ¥å…¥
-  çŸ¥è¯†å›¾è°±/å›¾æ•°æ®åº“æ¥å…¥
</code></pre><ul><li>æœç´¢å¼•æ“æ¥å…¥ - Bing æœç´¢ - DuckDuckGo æœç´¢</li><li>Agent å®ç°</li><li>LLM æ¨¡å‹æ¥å…¥</li><li>æ”¯æŒé€šè¿‡è°ƒç”¨ <a href="https://github.com/lm-sys/fastchat" target="_blank" rel="noopener noreferrer">FastChat</a> api è°ƒç”¨ llm</li><li>æ”¯æŒ ChatGLM API ç­‰ LLM API çš„æ¥å…¥</li><li>Embedding æ¨¡å‹æ¥å…¥</li><li>æ”¯æŒè°ƒç”¨ HuggingFace ä¸­å„å¼€æº Emebdding æ¨¡å‹</li><li>æ”¯æŒ OpenAI Embedding API ç­‰ Embedding API çš„æ¥å…¥</li><li>åŸºäº FastAPI çš„ API æ–¹å¼è°ƒç”¨</li><li>Web UI</li><li>åŸºäº Streamlit çš„ Web UI</li></ul><h2 id="é¡¹ç›®äº¤æµç¾¤" tabindex="-1"><a class="header-anchor" href="#é¡¹ç›®äº¤æµç¾¤"><span>é¡¹ç›®äº¤æµç¾¤</span></a></h2><img src="`+o+'" alt="image-20230906101805804" style="zoom:25%;">',149)]))}const m=a(d,[["render",g],["__file","index.html.vue"]]),u=JSON.parse('{"path":"/01.%20DesignAndDevelop/Develop/04.%20Project/Type/Artificial_Intelligence/Project/Chat/Langchain-Chatchat/","title":"Langchain-Chatchat","lang":"zh-CN","frontmatter":{"description":"Langchain-Chatchat é¡¹ç›®æ–‡æ¡£ç›®å½• FAQ.md Install.md åœ¨Anacondaä¸­ä½¿ç”¨pipå®‰è£…åŒ…çš„é—®é¢˜.md å‘é‡åº“ç¯å¢ƒ docker.md å¯åŠ¨APIæœåŠ¡.md åœ¨Anacondaä¸­ä½¿ç”¨pipå®‰è£…åŒ…æ— æ•ˆé—®é¢˜.md å‚è€ƒï¼šhttps://github.com/chatchat-space/Langchain-Chatchat...","head":[["meta",{"property":"og:url","content":"https://LincDocs.github.io/MdNote_Public/01.%20DesignAndDevelop/Develop/04.%20Project/Type/Artificial_Intelligence/Project/Chat/Langchain-Chatchat/"}],["meta",{"property":"og:site_name","content":"MdNote_Public"}],["meta",{"property":"og:title","content":"Langchain-Chatchat"}],["meta",{"property":"og:description","content":"Langchain-Chatchat é¡¹ç›®æ–‡æ¡£ç›®å½• FAQ.md Install.md åœ¨Anacondaä¸­ä½¿ç”¨pipå®‰è£…åŒ…çš„é—®é¢˜.md å‘é‡åº“ç¯å¢ƒ docker.md å¯åŠ¨APIæœåŠ¡.md åœ¨Anacondaä¸­ä½¿ç”¨pipå®‰è£…åŒ…æ— æ•ˆé—®é¢˜.md å‚è€ƒï¼šhttps://github.com/chatchat-space/Langchain-Chatchat..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://github.com/chatchat-space/Langchain-Chatchat/raw/master/img/webui_0813_0.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-02-03T15:36:56.000Z"}],["meta",{"property":"article:modified_time","content":"2025-02-03T15:36:56.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Langchain-Chatchat\\",\\"image\\":[\\"https://github.com/chatchat-space/Langchain-Chatchat/raw/master/img/webui_0813_0.png\\",\\"https://github.com/chatchat-space/Langchain-Chatchat/raw/master/img/webui_0813_0.png\\",\\"https://github.com/chatchat-space/Langchain-Chatchat/raw/master/img/webui_0813_1.png\\"],\\"dateModified\\":\\"2025-02-03T15:36:56.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"LincDocs\\",\\"url\\":\\"https://github.com/LincDocs/MdNote_Public/\\"}]}"]]},"headers":[{"level":1,"title":"Langchain-Chatchat","slug":"langchain-chatchat","link":"#langchain-chatchat","children":[{"level":2,"title":"ä»‹ç»","slug":"ä»‹ç»","link":"#ä»‹ç»","children":[{"level":3,"title":"æ¨¡å‹æ”¯æŒ","slug":"æ¨¡å‹æ”¯æŒ","link":"#æ¨¡å‹æ”¯æŒ","children":[{"level":4,"title":"LLM æ¨¡å‹æ”¯æŒ","slug":"llm-æ¨¡å‹æ”¯æŒ","link":"#llm-æ¨¡å‹æ”¯æŒ","children":[]},{"level":4,"title":"Embedding æ¨¡å‹æ”¯æŒ","slug":"embedding-æ¨¡å‹æ”¯æŒ","link":"#embedding-æ¨¡å‹æ”¯æŒ","children":[]}]}]},{"level":2,"title":"Docker éƒ¨ç½²","slug":"docker-éƒ¨ç½²","link":"#docker-éƒ¨ç½²","children":[]},{"level":2,"title":"å¼€å‘éƒ¨ç½²","slug":"å¼€å‘éƒ¨ç½²","link":"#å¼€å‘éƒ¨ç½²","children":[{"level":3,"title":"ç¯å¢ƒå‡†å¤‡","slug":"ç¯å¢ƒå‡†å¤‡","link":"#ç¯å¢ƒå‡†å¤‡","children":[{"level":4,"title":"ç¯å¢ƒæ£€æŸ¥","slug":"ç¯å¢ƒæ£€æŸ¥","link":"#ç¯å¢ƒæ£€æŸ¥","children":[]},{"level":4,"title":"é¡¹ç›®ä¾èµ–","slug":"é¡¹ç›®ä¾èµ–","link":"#é¡¹ç›®ä¾èµ–","children":[]}]},{"level":3,"title":"æ¨¡å‹ä¸‹è½½ (LLM & Embedding)","slug":"æ¨¡å‹ä¸‹è½½-llm-embedding","link":"#æ¨¡å‹ä¸‹è½½-llm-embedding","children":[]},{"level":3,"title":"é…ç½®é€‰é¡¹","slug":"é…ç½®é€‰é¡¹","link":"#é…ç½®é€‰é¡¹","children":[]},{"level":3,"title":"çŸ¥è¯†åº“åˆå§‹åŒ–ä¸è¿ç§»","slug":"çŸ¥è¯†åº“åˆå§‹åŒ–ä¸è¿ç§»","link":"#çŸ¥è¯†åº“åˆå§‹åŒ–ä¸è¿ç§»","children":[]},{"level":3,"title":"ä¸€é”®å¯åŠ¨API æœåŠ¡æˆ– Web UI","slug":"ä¸€é”®å¯åŠ¨api-æœåŠ¡æˆ–-web-ui","link":"#ä¸€é”®å¯åŠ¨api-æœåŠ¡æˆ–-web-ui","children":[{"level":4,"title":"å¯åŠ¨å‘½ä»¤","slug":"å¯åŠ¨å‘½ä»¤","link":"#å¯åŠ¨å‘½ä»¤","children":[]},{"level":4,"title":"å¯åŠ¨éé»˜è®¤æ¨¡å‹","slug":"å¯åŠ¨éé»˜è®¤æ¨¡å‹","link":"#å¯åŠ¨éé»˜è®¤æ¨¡å‹","children":[]},{"level":4,"title":"å¤šå¡åŠ è½½","slug":"å¤šå¡åŠ è½½","link":"#å¤šå¡åŠ è½½","children":[]},{"level":4,"title":"PEFT åŠ è½½(åŒ…æ‹¬lora,p-tuning,prefix tuning, prompt tuning,ia3ç­‰)","slug":"peft-åŠ è½½-åŒ…æ‹¬lora-p-tuning-prefix-tuning-prompt-tuning-ia3ç­‰","link":"#peft-åŠ è½½-åŒ…æ‹¬lora-p-tuning-prefix-tuning-prompt-tuning-ia3ç­‰","children":[]},{"level":4,"title":"æ³¨æ„äº‹é¡¹","slug":"æ³¨æ„äº‹é¡¹","link":"#æ³¨æ„äº‹é¡¹","children":[]},{"level":4,"title":"å¯åŠ¨ç•Œé¢ç¤ºä¾‹","slug":"å¯åŠ¨ç•Œé¢ç¤ºä¾‹","link":"#å¯åŠ¨ç•Œé¢ç¤ºä¾‹","children":[]}]},{"level":3,"title":"åˆ†æ­¥å¯åŠ¨ API æœåŠ¡æˆ– Web UIï¼ˆä¸€é”®å¯åŠ¨å¿½ç•¥æœ¬èŠ‚ï¼‰","slug":"åˆ†æ­¥å¯åŠ¨-api-æœåŠ¡æˆ–-web-ui-ä¸€é”®å¯åŠ¨å¿½ç•¥æœ¬èŠ‚","link":"#åˆ†æ­¥å¯åŠ¨-api-æœåŠ¡æˆ–-web-ui-ä¸€é”®å¯åŠ¨å¿½ç•¥æœ¬èŠ‚","children":[{"level":4,"title":"å¯åŠ¨ LLM æœåŠ¡ (ä¸‰ç§æ–¹å¼)","slug":"å¯åŠ¨-llm-æœåŠ¡-ä¸‰ç§æ–¹å¼","link":"#å¯åŠ¨-llm-æœåŠ¡-ä¸‰ç§æ–¹å¼","children":[{"level":5,"title":"åŸºäºå¤šè¿›ç¨‹è„šæœ¬ llm_api.py å¯åŠ¨ LLM æœåŠ¡","slug":"åŸºäºå¤šè¿›ç¨‹è„šæœ¬-llm-api-py-å¯åŠ¨-llm-æœåŠ¡","link":"#åŸºäºå¤šè¿›ç¨‹è„šæœ¬-llm-api-py-å¯åŠ¨-llm-æœåŠ¡","children":[]},{"level":5,"title":"åŸºäºå‘½ä»¤è¡Œè„šæœ¬ llm_api_stale.py å¯åŠ¨ LLM æœåŠ¡","slug":"åŸºäºå‘½ä»¤è¡Œè„šæœ¬-llm-api-stale-py-å¯åŠ¨-llm-æœåŠ¡","link":"#åŸºäºå‘½ä»¤è¡Œè„šæœ¬-llm-api-stale-py-å¯åŠ¨-llm-æœåŠ¡","children":[]},{"level":5,"title":"PEFT åŠ è½½(åŒ…æ‹¬lora,p-tuning,prefix tuning, prompt tuning,ia3ç­‰)","slug":"peft-åŠ è½½-åŒ…æ‹¬lora-p-tuning-prefix-tuning-prompt-tuning-ia3ç­‰-1","link":"#peft-åŠ è½½-åŒ…æ‹¬lora-p-tuning-prefix-tuning-prompt-tuning-ia3ç­‰-1","children":[]}]},{"level":4,"title":"å¯åŠ¨ API æœåŠ¡","slug":"å¯åŠ¨-api-æœåŠ¡","link":"#å¯åŠ¨-api-æœåŠ¡","children":[]},{"level":4,"title":"å¯åŠ¨ Web UI æœåŠ¡","slug":"å¯åŠ¨-web-ui-æœåŠ¡","link":"#å¯åŠ¨-web-ui-æœåŠ¡","children":[]}]}]},{"level":2,"title":"å¸¸è§é—®é¢˜","slug":"å¸¸è§é—®é¢˜","link":"#å¸¸è§é—®é¢˜","children":[]},{"level":2,"title":"è·¯çº¿å›¾","slug":"è·¯çº¿å›¾","link":"#è·¯çº¿å›¾","children":[]},{"level":2,"title":"é¡¹ç›®äº¤æµç¾¤","slug":"é¡¹ç›®äº¤æµç¾¤","link":"#é¡¹ç›®äº¤æµç¾¤","children":[]}]}],"git":{"createdTime":1738597016000,"updatedTime":1738597016000,"contributors":[{"name":"Linc","username":"Linc","email":"762699299@qq.com","commits":1,"url":"https://github.com/Linc"}]},"readingTime":{"minutes":15.14,"words":4543},"filePathRelative":"01. DesignAndDevelop/Develop/04. Project/Type/Artificial_Intelligence/Project/Chat/Langchain-Chatchat/README.md","localizedDate":"2025å¹´2æœˆ3æ—¥","excerpt":"\\n<p>é¡¹ç›®æ–‡æ¡£ç›®å½•</p>\\n<ul>\\n<li>FAQ.md</li>\\n<li><a href=\\"https://github.com/chatchat-space/Langchain-Chatchat/blob/master/docs/INSTALL.md\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Install.md</a></li>\\n<li><a href=\\"https://github.com/chatchat-space/Langchain-Chatchat/blob/master/docs/Issue-with-Installing-Packages-Using-pip-in-Anaconda.md\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">åœ¨Anacondaä¸­ä½¿ç”¨pipå®‰è£…åŒ…çš„é—®é¢˜.md</a></li>\\n<li>å‘é‡åº“ç¯å¢ƒ docker.md</li>\\n<li>å¯åŠ¨APIæœåŠ¡.md</li>\\n<li><a href=\\"https://github.com/chatchat-space/Langchain-Chatchat/blob/master/docs/%E5%9C%A8Anaconda%E4%B8%AD%E4%BD%BF%E7%94%A8pip%E5%AE%89%E8%A3%85%E5%8C%85%E6%97%A0%E6%95%88%E9%97%AE%E9%A2%98.md\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">åœ¨Anacondaä¸­ä½¿ç”¨pipå®‰è£…åŒ…æ— æ•ˆé—®é¢˜.md</a></li>\\n</ul>","autoDesc":true,"bioChainData":{"outlink":[],"backlink":[],"localMap":{"nodes":[{"id":"01. DesignAndDevelop/Develop/04. Project/Type/Artificial_Intelligence/Project/Chat/Langchain-Chatchat/README.md","value":{"title":"Chat/","path":"01. DesignAndDevelop/Develop/04. Project/Type/Artificial_Intelligence/Project/Chat/Langchain-Chatchat/README.md","outlink":[],"backlink":[]}}],"links":[]}}}');export{m as comp,u as data};
