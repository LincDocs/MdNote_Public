import{_ as s,c as a,f as n,o as l}from"./app-Cy4VlaP7.js";const t={};function e(h,i){return l(),a("div",null,i[0]||(i[0]=[n(`<h1 id="sr-iov" tabindex="-1"><a class="header-anchor" href="#sr-iov"><span>SR-IOV</span></a></h1><p><code>SR-IOV</code>（<code>Single Root I/O Virtualization</code>）是一个将<code>PCIe</code>共享给虚拟机的标准，通过为虚拟机提供独立的内存空间、中断、<code>DMA</code>流，来绕过<code>VMM</code>实现数据访问。SR-IOV基于两种<code>PCIe functions</code>：</p><ul><li><strong>PF (Physical Function)</strong>： 包含完整的 PCIe 功能，包括 SR-IOV 的扩张能力，该功能用于 SR-IOV 的配置和管理。</li><li><strong>FV (Virtual Function)</strong>： 包含轻量级的 PCIe 功能。每一个 VF 有它自己独享的 PCI 配置区域，并且可能与其他VF共享着同一个物理资源</li></ul><p>![SR-IOV Architecture](05. SR-IOV.assets/sriovarchitecture.png)</p><p>![SR-IOV synthetic datapaths](05. SR-IOV.assets/sriovsynthetic-datapaths.png)</p><blockquote><p>图片来源<a href="https://docs.microsoft.com/en-us/windows-hardware/drivers/network/sr-iov-architecture" target="_blank" rel="noopener noreferrer">Microsoft - SR-IOV Architecture</a></p></blockquote><h2 id="sr-iov要求" tabindex="-1"><a class="header-anchor" href="#sr-iov要求"><span>SR-IOV要求</span></a></h2><ul><li><code>CPU</code> 必须支持<code>IOMMU</code>（比如英特尔的<code>VT-d</code> 或者<code>AMD</code>的 <code>AMD-Vi</code>，<code>Power8</code> 处理器默认支持<code>IOMMU</code>）</li><li>固件<code>Firmware</code> 必须支持<code>IOMMU</code></li><li><code>CPU</code> 根桥必须支持 <code>ACS</code> 或者<code>ACS</code>等价特性</li><li><code>PCIe</code> 设备必须支持<code>ACS</code> 或者<code>ACS</code>等价特性</li><li>建议根桥和<code>PCIe</code> 设备中间的所有<code>PCIe</code> 交换设备都支持ACS，如果某个<code>PCIe</code>交换设备不支持<code>ACS</code>，其后的所有<code>PCIe</code>设备只能共享某个<code>IOMMU</code> 组，所以只能分配给1台虚机。</li></ul><h2 id="sr-iov-vs-pci-path-through" tabindex="-1"><a class="header-anchor" href="#sr-iov-vs-pci-path-through"><span>SR-IOV vs PCI path-through</span></a></h2><h3 id="架构上的比较-以网卡为例" tabindex="-1"><a class="header-anchor" href="#架构上的比较-以网卡为例"><span>架构上的比较（以网卡为例）</span></a></h3><p>![kvm-performance-optimization-for-ubuntu](05. SR-IOV.assets/kvm-performance-optimization-for-ubuntu-17-638.jpg)</p><p>![kvm-performance-optimization-for-ubuntu](05. SR-IOV.assets/kvm-performance-optimization-for-ubuntu-18-638.jpg)</p><h3 id="virtio-和-pass-through-的详细比较" tabindex="-1"><a class="header-anchor" href="#virtio-和-pass-through-的详细比较"><span>Virtio 和 Pass-Through 的详细比较</span></a></h3><p>![Virtio 和 Pass-Through 的详细比较](05. SR-IOV.assets/virtio-vs-pass-through.jpg)</p><blockquote><p>图片来源<a href="https://www.slideshare.net/janghoonsim/kvm-performance-optimization-for-ubuntu" target="_blank" rel="noopener noreferrer">slideshare - Kvm performance optimization for ubuntu</a>、[KVM 介绍（4）：I/O 设备直接分配和 SR-IOV <a href="http://www.cnblogs.com/sammyliu/p/4548194.html" target="_blank" rel="noopener noreferrer">KVM PCI/PCIe Pass-Through SR-IOV]</a></p></blockquote><h2 id="sr-iov-vs-dpdk" tabindex="-1"><a class="header-anchor" href="#sr-iov-vs-dpdk"><span>SR-IOV vs DPDK</span></a></h2><p>![sdn-fundamentals-for-nfv-openstack-and-containers-red-hat-summit](05. SR-IOV.assets/sdn-fundamentals-for-nfv-openstack-and-containers-red-hat-summit-2016-47-638.jpg)</p><p>![sdn-fundamentals-for-nfv-openstack-and-containers-red-hat-summit](05. SR-IOV.assets/sdn-fundamentals-for-nfv-openstack-and-containers-red-hat-summit-2016-48-638.jpg)</p><p>![sdn-fundamentals-for-nfv-openstack-and-containers-red-hat-summit](05. SR-IOV.assets/sdn-fundamentals-for-nfv-openstack-and-containers-red-hat-summit-2016-49-638.jpg)</p><h2 id="sr-iov使用示例" tabindex="-1"><a class="header-anchor" href="#sr-iov使用示例"><span>SR-IOV使用示例</span></a></h2><p>开启<code>VF</code>：</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">modprobe</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -r</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> igb</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">modprobe</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> igb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> max_vfs=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">7</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;options igb max_vfs=7&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt;&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/etc/modprobe.d/igb.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查找<code>Virtual Function</code>：</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># lspci | grep 82576</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0b:00.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ethernet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> controller:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Intel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Corporation</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 82576</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Gigabit</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Connection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (rev </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">01</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0b:00.1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ethernet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> controller:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Intel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Corporation</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 82576</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Gigabit</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Connection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">rev</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 01</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0b:10.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ethernet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> controller:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Intel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Corporation</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 82576</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Virtual</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (rev </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">01</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0b:10.1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ethernet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> controller:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Intel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Corporation</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 82576</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Virtual</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (rev </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">01</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0b:10.2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ethernet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> controller:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Intel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Corporation</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 82576</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Virtual</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (rev </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">01</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0b:10.3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ethernet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> controller:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Intel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Corporation</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 82576</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Virtual</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (rev </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">01</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0b:10.4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ethernet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> controller:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Intel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Corporation</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 82576</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Virtual</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (rev </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">01</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0b:10.5</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ethernet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> controller:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Intel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Corporation</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 82576</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Virtual</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (rev </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">01</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0b:10.6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ethernet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> controller:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Intel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Corporation</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 82576</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Virtual</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (rev </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">01</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0b:10.7</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ethernet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> controller:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Intel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Corporation</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 82576</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Virtual</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (rev </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">01</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0b:11.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ethernet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> controller:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Intel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Corporation</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 82576</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Virtual</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (rev </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">01</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0b:11.1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ethernet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> controller:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Intel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Corporation</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 82576</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Virtual</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (rev </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">01</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0b:11.2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ethernet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> controller:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Intel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Corporation</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 82576</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Virtual</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (rev </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">01</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0b:11.3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ethernet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> controller:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Intel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Corporation</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 82576</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Virtual</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (rev </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">01</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0b:11.4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ethernet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> controller:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Intel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Corporation</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 82576</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Virtual</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (rev </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">01</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0b:11.5</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ethernet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> controller:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Intel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Corporation</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 82576</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Virtual</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (rev </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">01</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># virsh nodedev-list | grep 0b</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pci_0000_0b_00_0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pci_0000_0b_00_1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pci_0000_0b_10_0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pci_0000_0b_10_1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pci_0000_0b_10_2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pci_0000_0b_10_3</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pci_0000_0b_10_4</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pci_0000_0b_10_5</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pci_0000_0b_10_6</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pci_0000_0b_11_7</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pci_0000_0b_11_1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pci_0000_0b_11_2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pci_0000_0b_11_3</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pci_0000_0b_11_4</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pci_0000_0b_11_5</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> virsh</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nodedev-dumpxml</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pci_0000_0b_00_0</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;device&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">   &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">pci_0000_0b_00_0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/name&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">   &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">parent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">pci_0000_00_01_0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/parent&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">   &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">driver</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">igb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/name&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">   &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/driver</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">   &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">capability</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> type=&#39;pci&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">domain</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/domain&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">bus</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">11</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/bus&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">slot</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/slot&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&gt;0&lt;/function&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">product</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> id=&#39;0x10c9&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">82576</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Gigabit</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Connection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/produc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">t&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vendor</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> id=&#39;0x8086&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Intel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Corporation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/vendo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">r&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">   &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/capability</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/device&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>通过libvirt绑定到虚拟机</strong></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/tmp/interface.xml</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&lt;interface type=&#39;hostdev&#39; managed=&#39;yes&#39;&gt;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     &lt;source&gt;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       &lt;address type=&#39;pci&#39; domain=&#39;0&#39; bus=&#39;11&#39; slot=&#39;16&#39; function=&#39;0&#39;/&gt;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     &lt;/source&gt;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&lt;/interface&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> virsh</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> attach-device</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> MyGuest</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /tmp/interface.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> xml</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --live</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --config</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当然也可以给网卡配置<code>MAC</code>地址和<code>VLAN</code>：</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">interface</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;hostdev&#39;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> managed</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;yes&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">source</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">address</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;pci&#39;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> domain</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;0&#39;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> bus</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;11&#39;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> slot</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;16&#39;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;0&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">source</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">mac</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> address</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;52:54:00:6d:90:02&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">vlan</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">tag</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;42&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">vlan</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">virtualport</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;802.1Qbh&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">parameters</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> profileid</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;finance&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">virtualport</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">   &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">interface</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>通过Qemu绑定到虚拟机</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>/usr/bin/qemu-kvm -name vdisk -enable-kvm -m 512 -smp 2 \\</span></span>
<span class="line"><span>-hda /mnt/nfs/vdisk.img \\</span></span>
<span class="line"><span>-monitor stdio \\</span></span>
<span class="line"><span>-vnc 0.0.0.0:0 \\</span></span>
<span class="line"><span>-device pci-assign,host=0b:00.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="优缺点" tabindex="-1"><a class="header-anchor" href="#优缺点"><span>优缺点</span></a></h2><ul><li><p>Pros</p><ul><li><p>More Scalable than Direct Assign</p></li><li><p>Security through IOMMU and function isolation</p></li><li><p>Control Plane separation through PF/VF notion</p></li><li><p>High packet rate, Low CPU, Low latency thanks to Direct Pass through</p></li></ul></li><li><p>Cons</p><ul><li><p>Rigid: Composability issues</p></li><li><p>Control plane is pass through, puts pressure on Hardware resources</p></li><li><p>Parts of the PCIe config space are direct map from Hardware</p></li><li><p>Limited scalability (16 bit)</p></li><li><p>SR-IOV NIC forces switching features into the HW</p></li><li><p>All the Switching Features in the Hardware or nothing</p></li></ul></li></ul><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考"><span>参考</span></a></h2><ul><li><a href="http://www.intel.com/content/www/us/en/embedded/products/networking/xl710-sr-iov-config-guide-gbe-linux-brief.html" target="_blank" rel="noopener noreferrer">Intel SR-IOV Configuration Guide</a></li><li><a href="https://wiki.openstack.org/wiki/SR-IOV-Passthrough-For-Networking" target="_blank" rel="noopener noreferrer">OpenStack SR-IOV Passthrough for Networking</a></li><li><a href="https://access.redhat.com/documentation/zh-CN/Red_Hat_Enterprise_Linux_OpenStack_Platform/7/html/Networking_Guide/sec-sr-iov.html" target="_blank" rel="noopener noreferrer">Redhat OpenStack SR-IOV Configure</a></li><li><a href="http://www.slideshare.net/nyechiel/sdn-fundamentals-for-nfv-open-stack-and-containers-red-hat-summit-20161" target="_blank" rel="noopener noreferrer">SDN Fundamentails for NFV, Openstack and Containers</a></li><li><a href="http://www.cnblogs.com/sammyliu/p/4548194.html" target="_blank" rel="noopener noreferrer">I/O设备直接分配和SRIOV</a></li><li><a href="http://wiki.libvirt.org/page/Networking#PCI_Passthrough_of_host_network_devices" target="_blank" rel="noopener noreferrer">Libvirt PCI passthrough of host network devices</a></li><li><a href="http://netdevconf.org/2.1/session.html?jain" target="_blank" rel="noopener noreferrer">Story of Network Virtualization and its future in Software and Hardware</a></li></ul>`,34)]))}const p=s(t,[["render",e],["__file","05. SR-IOV.html.vue"]]),r=JSON.parse('{"path":"/01.%20DesignAndDevelop/Develop/02.%20Theory/Computer/03.%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%20-%20%E4%B8%93%E9%A2%98%E6%88%96%E5%AD%90%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%AD%97%E5%85%B8%E7%89%88/%E4%B8%8B%E5%B1%82%E7%9B%B8%E5%85%B3/Network/%E3%80%8Asdn-handbook%E3%80%8Btonydeng/03.%20Linux%E7%BD%91%E7%BB%9C/05.%20SR-IOV.html","title":"SR-IOV","lang":"zh-CN","frontmatter":{"description":"SR-IOV SR-IOV（Single Root I/O Virtualization）是一个将PCIe共享给虚拟机的标准，通过为虚拟机提供独立的内存空间、中断、DMA流，来绕过VMM实现数据访问。SR-IOV基于两种PCIe functions： PF (Physical Function)： 包含完整的 PCIe 功能，包括 SR-IOV 的扩张...","head":[["meta",{"property":"og:url","content":"https://LincDocs.github.io/MdNote_Public/01.%20DesignAndDevelop/Develop/02.%20Theory/Computer/03.%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%20-%20%E4%B8%93%E9%A2%98%E6%88%96%E5%AD%90%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%AD%97%E5%85%B8%E7%89%88/%E4%B8%8B%E5%B1%82%E7%9B%B8%E5%85%B3/Network/%E3%80%8Asdn-handbook%E3%80%8Btonydeng/03.%20Linux%E7%BD%91%E7%BB%9C/05.%20SR-IOV.html"}],["meta",{"property":"og:site_name","content":"MdNote_Public"}],["meta",{"property":"og:title","content":"SR-IOV"}],["meta",{"property":"og:description","content":"SR-IOV SR-IOV（Single Root I/O Virtualization）是一个将PCIe共享给虚拟机的标准，通过为虚拟机提供独立的内存空间、中断、DMA流，来绕过VMM实现数据访问。SR-IOV基于两种PCIe functions： PF (Physical Function)： 包含完整的 PCIe 功能，包括 SR-IOV 的扩张..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-02-03T08:19:47.000Z"}],["meta",{"property":"article:modified_time","content":"2025-02-03T08:19:47.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"SR-IOV\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-02-03T08:19:47.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"LincDocs\\",\\"url\\":\\"https://github.com/LincDocs/MdNote_Public/\\"}]}"]]},"headers":[{"level":1,"title":"SR-IOV","slug":"sr-iov","link":"#sr-iov","children":[{"level":2,"title":"SR-IOV要求","slug":"sr-iov要求","link":"#sr-iov要求","children":[]},{"level":2,"title":"SR-IOV vs PCI path-through","slug":"sr-iov-vs-pci-path-through","link":"#sr-iov-vs-pci-path-through","children":[{"level":3,"title":"架构上的比较（以网卡为例）","slug":"架构上的比较-以网卡为例","link":"#架构上的比较-以网卡为例","children":[]},{"level":3,"title":"Virtio 和 Pass-Through 的详细比较","slug":"virtio-和-pass-through-的详细比较","link":"#virtio-和-pass-through-的详细比较","children":[]}]},{"level":2,"title":"SR-IOV vs DPDK","slug":"sr-iov-vs-dpdk","link":"#sr-iov-vs-dpdk","children":[]},{"level":2,"title":"SR-IOV使用示例","slug":"sr-iov使用示例","link":"#sr-iov使用示例","children":[]},{"level":2,"title":"优缺点","slug":"优缺点","link":"#优缺点","children":[]},{"level":2,"title":"参考","slug":"参考","link":"#参考","children":[]}]}],"git":{"createdTime":1738570787000,"updatedTime":1738570787000,"contributors":[{"name":"Linc","username":"Linc","email":"762699299@qq.com","commits":1,"url":"https://github.com/Linc"}]},"readingTime":{"minutes":3.55,"words":1066},"filePathRelative":"01. DesignAndDevelop/Develop/02. Theory/Computer/03. 计算机系统 - 专题或子系统的字典版/下层相关/Network/《sdn-handbook》tonydeng/03. Linux网络/05. SR-IOV.md","localizedDate":"2025年2月3日","excerpt":"\\n<p><code>SR-IOV</code>（<code>Single Root I/O Virtualization</code>）是一个将<code>PCIe</code>共享给虚拟机的标准，通过为虚拟机提供独立的内存空间、中断、<code>DMA</code>流，来绕过<code>VMM</code>实现数据访问。SR-IOV基于两种<code>PCIe functions</code>：</p>\\n<ul>\\n<li><strong>PF (Physical Function)</strong>： 包含完整的 PCIe 功能，包括 SR-IOV 的扩张能力，该功能用于 SR-IOV 的配置和管理。</li>\\n<li><strong>FV (Virtual Function)</strong>： 包含轻量级的 PCIe 功能。每一个 VF 有它自己独享的 PCI 配置区域，并且可能与其他VF共享着同一个物理资源</li>\\n</ul>","autoDesc":true,"bioChainData":{"outlink":[],"backlink":[],"localMap":{"nodes":[{"id":"01. DesignAndDevelop/Develop/02. Theory/Computer/03. 计算机系统 - 专题或子系统的字典版/下层相关/Network/《sdn-handbook》tonydeng/03. Linux网络/05. SR-IOV.md","value":{"title":"05. SR-IOV","path":"01. DesignAndDevelop/Develop/02. Theory/Computer/03. 计算机系统 - 专题或子系统的字典版/下层相关/Network/《sdn-handbook》tonydeng/03. Linux网络/05. SR-IOV.md","outlink":[],"backlink":[]}}],"links":[]}}}');export{p as comp,r as data};
