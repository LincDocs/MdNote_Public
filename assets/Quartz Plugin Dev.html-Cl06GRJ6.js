import{_ as k,c as h,a as s,b as n,e as l,d as a,w as p,r as t,o as d}from"./app-dmK2pm5z.js";const o={},g={class:"callout","data-callout":"warning"},B={class:"callout-content"};function A(c,i){const e=t("RouteLink"),r=t("Mermaid");return d(),h("div",null,[i[6]||(i[6]=s("h1",{id:"quartz-plugin-dev",tabindex:"-1"},"Quartz Plugin Dev",-1)),s("div",g,[i[5]||(i[5]=n('<div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Warning</div></div>',1)),s("div",B,[s("p",null,[i[1]||(i[1]=a("在此之前，你应该先阅读完 ",-1)),i[2]||(i[2]=s("a",{href:"https://quartz.jzhao.xyz/advanced/making-plugins",target:"_blank",rel:"noopener noreferrer"},"官方文档-制作自己的插件",-1)),i[3]||(i[3]=a(" 或 ",-1)),l(e,{to:"/01.%20DesignAndDevelop/Develop/04.%20Project/Type/Doc/MarkdwonAbout/02.%20Parse%20and%20Render/Quartz/%E8%AF%91-%E5%88%B6%E4%BD%9C%E8%87%AA%E5%B7%B1%E7%9A%84%E6%8F%92%E4%BB%B6.html"},{default:p(()=>[...i[0]||(i[0]=[a("译-制作自己的插件",-1)])]),_:1}),i[4]||(i[4]=a(" 中的内容",-1))])])]),i[7]||(i[7]=n('<h2 id="官方文档" tabindex="-1">官方文档</h2><p><a href="https://quartz.jzhao.xyz/advanced/making-plugins" target="_blank" rel="noopener noreferrer">https://quartz.jzhao.xyz/advanced/making-plugins</a></p><p>制作</p><h2 id="插件类别" tabindex="-1">插件类别</h2><p>插件接口类别有:</p><ul><li>transformers <ul><li>name</li><li>textTransform</li><li>markdownPlugins</li><li>htmlPlugins</li><li>externalResource</li></ul></li><li>filters</li><li>emitters</li></ul><h3 id="数据流程" tabindex="-1">数据流程</h3>',7)),l(r,{code:"eJxLL0osyFAIceLKTSzKTskvz4svLinKzEvn0tUtSgWJ6eraKfi6OAaH6MNVADkI6aLUjMqCVJAqD5AijxBfH7gCuAxIEGouAIHnJS0="}),i[8]||(i[8]=n(`<h3 id="代码示例" tabindex="-1">代码示例</h3><p>插件类别 OFM 插件为示例</p><p>quartz/quartz.config.ts</p><div class="language-typescript line-numbers-mode" data-highlighter="shiki" data-ext="typescript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-typescript"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> config</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> QuartzConfig</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  configuration</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">...</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">  plugins</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    transformers</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">      Plugin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ObsidianFlavoredMarkdown</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">({ </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">enableInHtmlEmbed</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">      Plugin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">CrawlLinks</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">({ </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">markdownLinkResolution</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;shortest&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    ],</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    filters</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">...</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">],</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    emitters</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">...</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">],</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;"> default</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> config</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>quartz/plugins/transformers/ofm.ts</p><div class="language-typescript line-numbers-mode" data-highlighter="shiki" data-ext="typescript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-typescript"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> ObsidianFlavoredMarkdown</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> QuartzTransformerPlugin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Partial</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Options</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&gt; </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">userOpts</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">  ...</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    name</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;ObsidianFlavoredMarkdown&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    textTransform</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">_ctx</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">src</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      // 预转换wiki链接（将锚点固定到可能包含非法语法（如代码块、LaTeX）的内容上）</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">      if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">opts</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">wikilinks</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // 首先替换表格内的所有维基链接</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // 再将所有其他维基链接替换掉</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    },</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    markdownPlugins</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">ctx</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">      const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> plugins</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> PluggableList</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> []</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">      plugins</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">push</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">tree</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Root</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">file</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">          if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">opts</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">wikilinks</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            //</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          }</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">          // ... 填充plugins</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          mdastFindReplace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">tree</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">replacements</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      })</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      // ... 填充plugins</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">      return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> plugins</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    },</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    htmlPlugins</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">      const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> plugins</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> PluggableList</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">rehypeRaw</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      // ... 填充plugins</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">      return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> plugins</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    },</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    externalResources</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">      const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> js</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> JSResource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> []</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">      const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> css</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CSSResource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> []</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      // ... 填充 js 和 css</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">      return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">js</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">css</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    },</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="gpt-分别解释各种类别" tabindex="-1">GPT 分别解释各种类别</h2><p>by gpt-5.1-codex-max</p><blockquote><p>请补充文章，讲述各种插件类别(quartz4的三种主类别，和transformers的几种插件子类别)，他们分别的作用、负责什么。 并且尝试于 remark 插件进行对应。remark 插件相当于作用在哪个区域？其 mdast-util- 和 micromark-extension- 类别的部分又对应哪个区域？</p></blockquote><p>Quartz 4 的插件分为三大类，它们按照「数据→结构→输出」的顺序协作：</p><ol><li>transformers（转换器） <ul><li>作用：在 Markdown 源文档被解析、构建语法树（MDAST/HAST）以及最终渲染前，对文本或语法树进行转换与增强。</li><li>责任：处理文本预转换、为 remark/rehype 提供插件、注入额外的 JS/CSS 资源等。</li><li>输出：返回可能修改过的字符串、MDAST/HAST，或额外的资源清单。</li></ul></li><li>filters（过滤器） <ul><li>作用：对已解析的页面/节点进行过滤，决定哪些内容继续进入后续流程。</li><li>责任：根据路径、标签、Frontmatter、日期等条件筛选文档或节点。</li><li>输出：保留下来的页面/节点集合。</li></ul></li><li>emitters（发射器/生成器） <ul><li>作用：负责最终输出阶段，将处理过的页面/节点写出到目标形式。</li><li>责任：生成静态文件（HTML、RSS/Atom、sitemap、assets 等），控制路径结构与生成策略。</li><li>输出：最终的站点产物（静态文件）。</li></ul></li></ol><h3 id="transformers-的子接口与典型职责" tabindex="-1">transformers 的子接口与典型职责</h3><p>每个 transformer 插件可以提供以下接口字段，用于在不同阶段介入处理：</p><ul><li>name：插件名称（用于标识与调试）。</li><li>textTransform(ctx, src)：<strong>纯文本级预处理</strong>。在 Markdown 进入语法解析前运行，适合做快捷语法的预转换、批量替换（如 wiki 链接预处理）。</li><li>markdownPlugins(ctx)：返回 remark 兼容的 MDAST 插件列表（PluggableList），在 <strong>remark 阶段</strong> 运行，处理 Markdown 语法树（MDAST）。</li><li>htmlPlugins(ctx)：返回 rehype 兼容的 HAST 插件列表，在 <strong>rehype 阶段</strong> 运行，处理 HTML 语法树（HAST）；常见于添加属性、转换节点、支持原始 HTML。</li><li>externalResources()：声明额外需要注入的 JS/CSS 资源（用于前端交互、样式补充等）。</li></ul><blockquote><p>OFM（ObsidianFlavoredMarkdown）是一个 transformer 示例：</p><ul><li>在 <code>textTransform</code> 里先预处理 wiki 链接；</li><li>在 <code>markdownPlugins</code> 里用 remark 插件对 MDAST 做进一步替换；</li><li>在 <code>htmlPlugins</code> 里用 rehype 插件处理 HTML AST；</li><li>在 <code>externalResources</code> 中声明所需的 JS/CSS。</li></ul></blockquote><h3 id="remark-rehype-micromark-mdast-util-的对应关系" tabindex="-1">remark / rehype / micromark / mdast-util 的对应关系</h3><ul><li>remark 插件：作用于 <strong>remark 管线</strong>，处理 <strong>MDAST (Markdown AST)</strong>。Quartz 的 <code>markdownPlugins</code> 即放入 remark 插件列表。</li><li>rehype 插件：作用于 <strong>rehype 管线</strong>，处理 <strong>HAST (HTML AST)</strong>。Quartz 的 <code>htmlPlugins</code> 即放入 rehype 插件列表。</li><li>micromark-extension-*：属于 <strong>解析扩展</strong>，影响 Markdown <strong>词法/语法解析阶段</strong>（tokenization）。通常与 remark 一起，用于自定义语法（如 wiki 链接、任务列表、表格等）。它在「解析前端」扩展语法，使得新的记号可以被解析进 MDAST。</li><li>mdast-util-<em>：属于 <strong>MDAST 转换/构建工具</strong>，负责把 micromark 产生的 tokens 映射或处理成 <strong>MDAST 节点</strong>，或在 MDAST 上进行转换。这些工具通常配合 micromark-extension-</em> 使用。</li></ul><h4 id="对应到-quartz-transformers-的-区域-比对" tabindex="-1">对应到 Quartz transformers 的“区域”比对</h4><ul><li>textTransform：纯文本预处理层，尚未进入 remark/micromark。适合做字符串级替换、占位符展开等。</li><li>micromark-extension-*：解析层扩展（tokenization）。在 remark 解析 Markdown 时介入，定义新语法记号。</li><li>mdast-util-*：语法树构建/转换层（MDAST）。在 remark 构建或处理 MDAST 时介入，定义或操作节点形态。</li><li>markdownPlugins（remark 插件）：在 <strong>MDAST 层</strong> 运行，可组合 mdast-util-*，消费 micromark 扩展的节点，或做树变换。</li><li>htmlPlugins（rehype 插件）：在 <strong>HAST 层/HTML AST</strong> 运行，用于 HTML 级别的属性、结构、危险 HTML 解析（rehype-raw）等。</li><li>externalResources：与 AST 无关，负责声明产出页面需要的前端资源。</li></ul><h3 id="小结-选用何处扩展" tabindex="-1">小结：选用何处扩展？</h3><ul><li>需要新语法（如自定义标记、wiki 链接）：用 micromark-extension-* + mdast-util-*，并作为 remark 插件放入 <code>markdownPlugins</code>。</li><li>需要在解析前做大规模文本替换：用 transformer 的 <code>textTransform</code>。</li><li>需要对 Markdown 语法树做结构化改写（如批量插入节点、改属性）：用 remark 插件（<code>markdownPlugins</code>）。</li><li>需要对 HTML 语法树做处理或允许原始 HTML：用 rehype 插件（<code>htmlPlugins</code>），常配合 <code>rehype-raw</code>。</li><li>需要前端脚本/样式支持：在 <code>externalResources</code> 中声明 JS/CSS。</li></ul>`,21))])}const y=k(o,[["render",A]]),m=JSON.parse('{"path":"/01.%20DesignAndDevelop/Develop/04.%20Project/Type/Doc/MarkdwonAbout/02.%20Parse%20and%20Render/Quartz/Quartz%20Plugin%20Dev.html","title":"Quartz Plugin Dev","lang":"zh-CN","frontmatter":{"description":"Quartz Plugin Dev Warning 在此之前，你应该先阅读完 官方文档-制作自己的插件 或 中的内容 官方文档 https://quartz.jzhao.xyz/advanced/making-plugins 制作 插件类别 插件接口类别有: transformers name textTransform markdownPlugins...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Quartz Plugin Dev\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-12-13T16:40:43.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://LincDocs.github.io/MdNote_Public/01.%20DesignAndDevelop/Develop/04.%20Project/Type/Doc/MarkdwonAbout/02.%20Parse%20and%20Render/Quartz/Quartz%20Plugin%20Dev.html"}],["meta",{"property":"og:site_name","content":"MdNote_Public"}],["meta",{"property":"og:title","content":"Quartz Plugin Dev"}],["meta",{"property":"og:description","content":"Quartz Plugin Dev Warning 在此之前，你应该先阅读完 官方文档-制作自己的插件 或 中的内容 官方文档 https://quartz.jzhao.xyz/advanced/making-plugins 制作 插件类别 插件接口类别有: transformers name textTransform markdownPlugins..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-12-13T16:40:43.000Z"}],["meta",{"property":"article:modified_time","content":"2025-12-13T16:40:43.000Z"}]]},"git":{"createdTime":1765644043000,"updatedTime":1765644043000,"contributors":[{"name":"Linc","username":"Linc","email":"762699299@qq.com","commits":1,"url":"https://github.com/Linc"}]},"readingTime":{"minutes":4.43,"words":1329},"filePathRelative":"01. DesignAndDevelop/Develop/04. Project/Type/Doc/MarkdwonAbout/02. Parse and Render/Quartz/Quartz Plugin Dev.md","excerpt":"\\n\\n<div class=\\"callout\\" data-callout=\\"warning\\">\\n<div class=\\"callout-title\\">\\n<div class=\\"callout-title-icon\\">\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"24\\" height=\\"24\\" viewBox=\\"0 0 24 24\\" fill=\\"none\\" stroke=\\"currentColor\\" stroke-width=\\"2\\" stroke-linecap=\\"round\\" stroke-linejoin=\\"round\\" class=\\"lucide lucide-alert-triangle\\"><path d=\\"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\\"></path><path d=\\"M12 9v4\\"></path><path d=\\"M12 17h.01\\"></path></svg>\\n</div>\\n<div class=\\"callout-title-inner\\">Warning</div>\\n</div>\\n<div class=\\"callout-content\\"><p>在此之前，你应该先阅读完 <a href=\\"https://quartz.jzhao.xyz/advanced/making-plugins\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">官方文档-制作自己的插件</a> 或 <a href=\\"/MdNote_Public/01.%20DesignAndDevelop/Develop/04.%20Project/Type/Doc/MarkdwonAbout/02.%20Parse%20and%20Render/Quartz/%E8%AF%91-%E5%88%B6%E4%BD%9C%E8%87%AA%E5%B7%B1%E7%9A%84%E6%8F%92%E4%BB%B6.html\\" target=\\"_blank\\">译-制作自己的插件</a> 中的内容</p>\\n</div></div>","autoDesc":true,"bioChainData":{"outlink":[{"title":"译-制作自己的插件","link":"01. DesignAndDevelop/Develop/04. Project/Type/Doc/MarkdwonAbout/02. Parse and Render/Quartz/译-制作自己的插件.html"}],"backlink":[],"localMap":{"nodes":[{"id":"01. DesignAndDevelop/Develop/04. Project/Type/Doc/MarkdwonAbout/02. Parse and Render/Quartz/Quartz Plugin Dev.md","value":{"title":"Quartz Plugin Dev","path":"01. DesignAndDevelop/Develop/04. Project/Type/Doc/MarkdwonAbout/02. Parse and Render/Quartz/Quartz Plugin Dev.md","outlink":["01. DesignAndDevelop/Develop/04. Project/Type/Doc/MarkdwonAbout/02. Parse and Render/Quartz/译-制作自己的插件.md"],"backlink":[]}},{"id":"01. DesignAndDevelop/Develop/04. Project/Type/Doc/MarkdwonAbout/02. Parse and Render/Quartz/译-制作自己的插件.md","value":{"title":"译-制作自己的插件","path":"01. DesignAndDevelop/Develop/04. Project/Type/Doc/MarkdwonAbout/02. Parse and Render/Quartz/译-制作自己的插件.md","outlink":[],"backlink":[]}}],"links":[{"source":"01. DesignAndDevelop/Develop/04. Project/Type/Doc/MarkdwonAbout/02. Parse and Render/Quartz/Quartz Plugin Dev.md","target":"01. DesignAndDevelop/Develop/04. Project/Type/Doc/MarkdwonAbout/02. Parse and Render/Quartz/译-制作自己的插件.md"}]}}}');export{y as comp,m as data};
