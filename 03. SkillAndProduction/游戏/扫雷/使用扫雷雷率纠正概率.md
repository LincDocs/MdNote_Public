---
create_date: 2025-12-14
last_date: 2025-12-14
author: LincZero
---
# 使用扫雷雷率纠正概率 (编写中, 未完成)

## 雷率

各自中含有雷的概率

也是: 假设没有开局保护 (如果有, 开局点击的那下必不为雷)，开局时随机开一格遇到的雷的概率

后续使用的雷率 $R$ 均为高级扫雷中的 $99/(30\times 16)=99/480=33/160=20.625\%$

## 1/2与1/2交汇1

```
? ? ?   or   ? ? ?
1 _ 1        2 x 2
```

这里这样两种结果: (1表示有雷，0表示无雷)

```
101
010
```

### 无雷率计算

如果不考虑雷率，他们的概率均为1/2:

> [!warning]
> 常见误区: 并不是说由于中间那格被两个1/2重合，就会导致中间那格是雷的概率高于1/2或低于1/2

### 有雷率计算

如果考虑雷率R，且假设外部还有无数个待解的扫雷区域，则他们的概率为:

先验概率 (未条件化前):

$$
k表示雷数, w表示权重, r为先验雷率=0.20625\\~\\

\begin{cases}
101:k=2, &w1=r^2(1-r)&\approx 0.033765\\
010:k=1, &w2=r(1-r)^2&\approx 0.129946
\end{cases}
$$

归一化，并计算后验概率:

$$
Z=w1+w2+w3\\
\begin{aligned}
P(101)=&\frac{w1}{Z}\approx 0.206248 \\
P(010)=&\frac{w2}{Z}\approx 0.793752 \\
\end{aligned}
$$

然后发现和雷率很接近，后来我用分数算了一下，发现 `P(101)` 就等于雷率! 修正一下:

$$
\begin{aligned}
P(101)=&\frac{w1}{Z} =\frac{33}{160}  = 0.20625 \\
P(010)=&\frac{w2}{Z} =\frac{127}{160} = 0.79375 \\
\end{aligned}
$$

即：**交汇格近八成 (1-雷率) 有雷** (可以赌一下，四局里会有一局赌错)

## 1/2与1/3交汇1

先说问题

在扫雷中，如果连续的四个格子abcd中，ab有一雷，bcd有一雷

如: (没标注的可以视为无数字格/被简化掉的格/墙壁)

```
? ? ? ?   or   ? ? ? ?
1 _ 1 _        2 x 3 x
```

那么这里的雷有三种情况：(1表示有雷，0表示无雷)

```
1010
1001
0100
```

### 无雷率计算

不考虑雷数的情况下，他们的概率均为1/3

> [!warning]
> 常见误区: 并不是说由于第二格被多个1/N重合，就会导致中间那格是雷的概率高于1/3或低于1/3
> 
> 这里也可以理解成规则2(1/3)进一步约束了规则1(1/2)，两个规则没有互补

### 有雷率计算

如果考虑高级扫雷的雷率大致为 99/480 (假设还有其他很多没开的格子，这里只是一个局部)，那么他们的概率分别是多少？

我们先算先验概率 (未条件化前):

$$
k表示雷数, w表示权重, r为先验雷率=0.20625\\~\\

\begin{cases}
1010:k=2, &w1=r^2(1-r)^2&\approx 0.026801\\
1001:k=2, &w2=r^2(1-r)^2&\approx 0.026801\\
0100:k=1, &w3=r(1-r)^3&\approx 0.103144
\end{cases}
$$

归一化，并计算后验概率:

$$
Z=w1+w2+w3\\
\begin{aligned}
P(1010)=&\frac{w1}{Z}\approx 0.170983\\
P(1001)=&\frac{w2}{Z}\approx 0.170983\\
P(0100)=&\frac{w3}{Z}\approx 0.658032\\
\end{aligned}
$$

即: **交汇格六成六有雷** (概率较低，不建议赌)

## 1/3与1/3交汇1

现在你对交汇区的计算应该比较熟练了，后面就简略一些

```
? ? ? ? ?    a b c d e
_ 1 _ 1 _    _ 1 _ 1 _
```

### 无雷率计算

下面五种情况各1/5

```
0 0 1 0 0

1 0 0 1 0
1 0 0 0 1
0 1 0 1 0
0 1 0 0 1
```

### 有雷率计算

先验:

```
0 0 1 0 0 = 0.0818707766819000244140625
1 0 0 1 0 = 0.0212735089015960693359375
1 0 0 0 1 = 0.0212735089015960693359375
0 1 0 1 0 = 0.0212735089015960693359375
0 1 0 0 1 = 0.0212735089015960693359375
```

后验:

```
0 0 1 0 0 = 0.490347
1 0 0 1 0 = 0.127413
1 0 0 0 1 = 0.127413
0 1 0 1 0 = 0.127413
0 1 0 0 1 = 0.127413
```

即: **交汇格五成有雷, 为五格中雷率最高的格子** (该信息价值不高)

## 1/3与1/3交汇2

现在你对交汇区的计算应该比较熟练了，后面就简略一些

```
? ? ? ?    a b c d
_ 1 1 _    _ 1 1 _
```

### 无雷率计算

无雷率则下面三种情况各1/3

```
1 0 0 1
0 1 0 0
0 0 1 0
```

### 有雷率计算

先验:

```
1 0 0 1 = 0.02680127105712890625
0 1 0 0 = 0.10314428558349609375
0 0 1 0 = 0.10314428558349609375
```

后验:

```
1 0 0 1 = 0.114983
0 1 0 0 = 0.442509
0 0 1 0 = 0.442509
```

即: **交汇双格八成八有雷** (看起来是最好开两侧，但一般情况下11的两侧还会有更多约束，所以大概率不会是这个最终概率)

## 其他，**不涉及多格概率问题**

这部分其实不属于这章要讨论的主题。本文的主题原意是要指根据雷率去判断几种分布分别的概率，方便去在不得不进行猜测/竞速提前开时，进行一些简单的判断。但既然讨论到了其他那几种类似的情况，这里也把所有交汇的情况进行一个补全

### 1/2与1/2交汇2 (无意义)

1/2和1/2交汇2无意义，还是1/2。**不涉及多格概率问题**

```
1
? ?
1
```

### 1/2和1/3交汇2 (边一一定式，可判断安全区)

这种在边边比较常见，不难判断出一个安全区的位置。**不涉及多格概率问题**

```
? ? ?
1 1 _

为

? ? _
1 1 _
```

### 1/2和2/3交汇2 (边一二定式，可判断雷区)

这种在边边比较常见，不难判断出一个雷区的位置。**不涉及多格概率问题**

```
? ? ?
1 2 _

为

? ? x
1 2 _
```

### 1/3与2/3交汇2 (即一二定式，可判断一安一雷)

特殊: 1/3 和 2/3 交汇，就是在之前 [扫雷高级定式](扫雷/扫雷高级定式.md) 中说到过的 一二定式。**不涉及多格概率问题**

- 100% `0 ? ? 1`
  - 1/2: `0 1 0 1`
  - 1/2: `0 0 1 1`

## 其他 - 2/3

### 1/2与2/3交汇1

```
? ? ? ?
1 _ 2 _
```

情况种类+先验:

```
0 1 1 0 = 0.02680127105712890625
0 1 0 1 = 0.02680127105712890625
1 0 1 1 = 0.00696410980224609375
```

后验:

```
0 1 1 0 = 0.44250871080139372822299651567944
0 1 0 1 = 0.44250871080139372822299651567944
1 0 1 1 = 0.11498257839721254355400696864111
```

结论: 交汇区八成八有雷，1的外端八成八无雷，可先点

### 1/3与2/3交汇1

```
? ? ? ? ?
_ 1 _ 2 _
```

情况种类:

```
0 0 1 1 0
0 0 1 0 1
1 0 0 1 1
0 1 0 1 1
```

先验:

```
0 0 1 1 0 = 0.0212735089015960693359375
0 0 1 0 1 = 0.0212735089015960693359375
1 0 0 1 1 = 0.0055277621555328369140625
0 1 0 1 1 = 0.0055277621555328369140625
```

后验:

```
0 0 1 1 0 = 0.396875
0 0 1 0 1 = 0.396875
1 0 0 1 1 = 0.103125
0 1 0 1 1 = 0.103125
```

结论: 中间有雷&数字一一端无类概率，为安全率。交汇格有雷概率为**22.625%**。可以先点1侧的两格

### 2/3与2/3交汇1

```
? ? ? ? ?
_ 2 _ 2 _
```

先验

```
1 0 1 1 0 = 0.0055277621555328369140625
1 0 1 0 1 = 0.0055277621555328369140625
0 1 1 1 0 = 0.0055277621555328369140625
0 1 1 0 1 = 0.0055277621555328369140625
1 1 0 1 1 = 0.0014363476467132568359375
```

后验

```
1 0 1 1 0 = 0.23475046210720887245841035120148
1 0 1 0 1 = 0.23475046210720887245841035120148
0 1 1 1 0 = 0.23475046210720887245841035120148
0 1 1 0 1 = 0.23475046210720887245841035120148
1 1 0 1 1 = 0.060998151571164510166358595194085
```

没啥意义

### 2/3与2/3交汇2

```
? ? ? ?
_ 2 2 _
```

先验

```
0 1 1 0 = 0.02680127105712890625
1 0 1 1 = 0.00696410980224609375
1 1 0 1 = 0.00696410980224609375
```

后验

```
0 1 1 0 = 0.65803108808290155440414507772021
1 0 1 1 = 0.1709844559585492227979274611399
1 1 0 1 = 0.1709844559585492227979274611399
```

## 四格概率问题 (特殊的1/2与1/2交汇)

在扫雷高级定式里说过这个问题，其实这也算是一种特殊的 [1/2与1/2交汇](#1/2与1/2交汇) 问题。

如: (没标注的可以视为无数字格/被简化掉的格/墙壁)

```
a b
c d

or

_ 1 1
1 ? ?
1 ? ?
```

即ab有一雷，ac有一雷，问分别有雷的概率是?

这里一般是假设a有雷而bc无雷，说是概率高达80%。然后再根据开的情况看d有无雷

### 无雷率计算

如果是一雷，则只能是:

```
10
00
```

如果是二雷，则可以是

```
01   or   10
10        01
```

如果是三雷 (概率极低), 则只能是:

```
01
11
```

### 有雷率计算

cab 三格同 [1/2与1/2交汇](#1/2与1/2交汇), 至于最右下一格, 则约也是按雷率的来

```
10   p1=(1-r)^2 = 0.630039
00

10   p2=(1-r)r  = 0.163710
01

01   p3=(1-r)r  = 0.163710
10

01   p4=r^2     = 0.042539
11

p1+p2 = (1-r) = 近8成，可以直接点对角
```

### 根据剩余雷数的收尾问题

不过与平面形式不同的是，如果不追求竞速而是准确率 (即对于需要猜的，都会等最后的剩余雷数确定了后再去解)，即这种四格形式会更多地常见于最后的收尾阶段。

对于剩1或3雷的情况，可以直接推出。不过剩3雷的概率很低，只有4%! 如果碰到了且不为竞速，最好检查一下有没有标漏雷

此外，先点两侧无雷的概率很大，是因为只有一雷的概率很大。当剩余两雷的时候，bc有雷和ad有雷的概率都是 50%，而不再是bc无雷概率高达 79%

## 交汇普适算法

### 无雷率计算

把这个规律普适化（两块区域只重叠 1 个格子的情况）：

$$
\begin{aligned}
& 区域 A: Na 个格子，其中 Na' 个雷\\
& 区域 B: Nb 个格子，其中 Nb' 个雷\\
& 两者只重叠 1 个格子 x，问 x 是雷的概率？
\end{aligned}
$$

将所有满足两个计数约束的布局等概率，则：

$$
\begin{aligned}
x=1 时:~
&A 其余 Na−1 个格子放: Na'−1 个雷\\
&B 其余 Nb−1 个格子放: Nb'−1 个雷\\
&组合数：C(Na−1, Na′−1)\times C(Nb−1, Nb′−1)\\
x=0 时:~
&A 其余 Na−1 个格子放: Na' 个雷\\
&B 其余 Nb−1 个格子放: Nb' 个雷\\
&组合数：C(Na−1, Na′)\times C(Nb−1, Nb′)
\end{aligned}
$$

归一化后：

$$
\begin{aligned}
P(x=1)
&= \frac {C_{x=1}} {C_{x=1}+C_{x=0}}\\
&= \frac{C(Na−1, Na'−1) \times C(Nb−1, Nb'−1)}
    { C(Na−1, Na'−1) \times C(Nb−1, Nb'−1) + C(Na−1 , Na') \times C(Nb−1, Nb')}\\
\\~\\
P(x=0) &= 1 − P(x=1)
\end{aligned}
$$

代回1/2与1/3交汇的例子：

$$
Na=2, Na'=1, Nb=3, Nb'=1
\\
P(x=1)=\frac {1\times1}{1\times1+1\times2}=\frac 13
$$


验证正确，和前面算出来的一致。

同理，可进一步扩展到重叠N个格子的情况 (需考去除不可能出现的情况，负数的情况)

### 有雷率计算

略。不给通用公式了。反正是先把组合列出来，然后先根据雷率R计算分别的先验概率。然后计算条件约束后，归一化得到后验概率就行

## 总结表

以二数字格为基础判断的扫雷总结表

[list2table]

- < 交汇区一 | 交汇区二 | 交汇数 | 参考 | 示例
- 1/2 | 1/2
  - 1 | *一的两外侧*大概率无雷，P(abc=010)=*安全率=79.375%* | 
    ```bash
    a b c
    1 _ 1
    # P(abc=010)=安全率=79.375%
    ```
  - 2 | 无意义 | 
    ```bash
    a b
    1 1
    # 无意义
    ```
- 1/2 | 1/3
  - 1 | *一的三外侧*大概率无雷，*65.8032%*，大于一半 | 
    ```bash
    a b c d
    1 _ 1 _
    # P(abcd=0100)=65.8032%
    ```
  - 2 | **边一一定式**, 可判断安全区 | 
    ```bash
    a b c
    1 1 _
    # c安全
    ```
- 1/2 | 2/3
  - 1 | *一外侧*大概率无雷，*88.5018%* | 
    ```bash
    a b c d
    1 _ 2 _
    # P(ab=01)=88.5018%
    ```
  - 2 | **边一二定式**，可判断雷区 | 
    ```bash
    a b c
    1 2 _
    # c为雷
    ```
- 1/3 | 1/3
  - 1 | 没啥用。交汇格近五成有雷，此信息价值不大 | 
    ```bash
    a b c d e
    _ 1 _ 1 _
    # P(c=1)=0.490347
    ```
  - 2 | *一的两外侧*大概率无雷，*88.5018%*。看起来应开两端，但一般还有更多约束 | 
    ```bash
    a b c d
    _ 1 1 _
    # P(a=0&&d=0)=88.5018%
    ```
- 1/3 | 2/3
  - 1 | *一的两外侧*大概率无雷，P(abc=001)=*安全率=79.375%* | 
    ```bash
    a b c d e
    _ 1 _ 2 _
    # P(ab=001)=安全率=79.375%
    ```
  - 2 | **一二定式**，可判一安一雷 | 
    ```bash
    a b c d
    _ 1 2 _
    # a为安全，d为雷
    ```
- 2/3 | 2/3
  - 1 | 没啥用 | 
    ```bash
    a b c d e
    _ 2 _ 2 _
    # P(11011) = 0.060998
    ```
  - 2 | *二的两外侧*大概率无雷，P(0110)=*65.8031%* | 
    ```bash
    a b c d
    _ 2 2 _
    # P(0110) = 0.658031
    ```

话说几组数字多次出现了:

- 0.885018 | 出现两次, `4?` 一外侧&一的两外侧
  `1 _ 2 _` `_ 1 1 _`
- 0.79375  | (安全率) 出现两次，`3? 5?` 均为一两外侧无雷率
  `1 _ 1` `_ 1 _ 2 _`
- 0.658031 | 出现两次，`4?` 1的三外侧&二的两外侧
  `1 _ 1 _` `_ 2 2 _`

不过这里的 `_ 1 1 _` 和 `_ 1 _ 2 _` 都是不能完全确定的

总结: 有定雷先开定雷，如果一整个条未知区的边缘都是1/2、1/3、2/3等情况，那么优先赌的顺序是: (只记前三个就行)

- 0.885018
  - 记忆: *一杠二*
  - `1 _ 2 _ ` 开一外侧
  - `_ 1 _ 2 _` 开一两外侧
- 0.79375
  - 记忆: *1/2交1/2*
  - `1 _ 1` 开一两外侧
- 0.658031
  - `1 _ 1 _`
  - `_ 2 2 _`

或者简单记成: 1的安全区域远离另一个数字，雷接近另一个数字

## 其他 - 难受的10序列未知区

(尽量不用，概率特征不显示)

```
? ? _ ? ?
1 1 1 1 1

或

? ? _ ? ? _ ? ? _ ? ? _ ? ?
1 1 1 1 1 1 1 1 1 1 1 1 1 1
```

从左到右的 `?` 要么是 101010... 要么是 010101...

如果01序列是偶数，那么01数相等。否则要么0比1多一个，要么1比0多一个。而又由于雷率，更倾向认为0更多。即当奇数时，更倾向于认为两侧都是0。

所以赌的话就赌序列最边缘的数字无雷概率略大。

序列串为偶数时，还是等于50%。为奇数时，序列串越长，概率相较于50%越不显著。最显著时为序列数为三时 (即 $P(101)=安全率$ 时)，正确率为安全率 (79%左右)

### 变形

有时不完全是10序列串，序列串中可能还会参杂100或011的序列串

```
? ? _ ? ? _ ? ? ？
1 1 1 1 1 1 1 2 ？
              1 ?
              1 ?
              1 _
              1 ?
              1 ?
```

这里可能是:

- 01010???(1个1)1010, 7个0
- 01010???(1个1)0101, 7个0
- 101010001010, 7个0
- 10101???(1个1)0101, 6个0



